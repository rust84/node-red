[
    {
        "id": "afb0f186.cfb0d",
        "type": "tab",
        "label": "Home Assistant",
        "disabled": false,
        "info": "",
        "env": []
    },
    {
        "id": "cf24db3435ba68ad",
        "type": "tab",
        "label": "Heating",
        "disabled": false,
        "info": "",
        "env": []
    },
    {
        "id": "4aedf9e8.044e08",
        "type": "tab",
        "label": "Alarm",
        "disabled": false,
        "info": "",
        "env": []
    },
    {
        "id": "9cf6f1c7be069f0a",
        "type": "tab",
        "label": "Archive",
        "disabled": false,
        "info": "",
        "env": []
    },
    {
        "id": "43703bf3.b01b24",
        "type": "subflow",
        "name": "turn off lights",
        "info": "",
        "category": "",
        "in": [
            {
                "x": 60,
                "y": 80,
                "wires": [
                    {
                        "id": "da8d24c5.0c87e8"
                    },
                    {
                        "id": "8c9d4e0639f258ad"
                    },
                    {
                        "id": "510bee04.ba47c"
                    },
                    {
                        "id": "39b8136a.8621ec"
                    },
                    {
                        "id": "61b4bf0b24758188"
                    },
                    {
                        "id": "6778550e67dae48c"
                    },
                    {
                        "id": "e1ef31c3c725967b"
                    },
                    {
                        "id": "6c869c1f5fa74cb2"
                    },
                    {
                        "id": "35120a6bb4c8411b"
                    }
                ]
            }
        ],
        "out": [],
        "env": [],
        "color": "#DDAA99"
    },
    {
        "id": "998559de1e6b81d6",
        "type": "subflow",
        "name": "hyperion request",
        "info": "",
        "category": "",
        "in": [
            {
                "x": 100,
                "y": 80,
                "wires": [
                    {
                        "id": "edc52ba0eebf13d2"
                    }
                ]
            }
        ],
        "out": [
            {
                "x": 680,
                "y": 80,
                "wires": [
                    {
                        "id": "be418e669847012b",
                        "port": 0
                    }
                ]
            }
        ],
        "env": [],
        "meta": {},
        "color": "#DDAA99"
    },
    {
        "id": "ebce7e9e955e453a",
        "type": "subflow",
        "name": "frigate camera",
        "info": "",
        "category": "",
        "in": [],
        "out": [
            {
                "x": 960,
                "y": 80,
                "wires": [
                    {
                        "id": "39f15089eb952cc2",
                        "port": 0
                    }
                ]
            },
            {
                "x": 960,
                "y": 80,
                "wires": [
                    {
                        "id": "39f15089eb952cc2",
                        "port": 1
                    }
                ]
            },
            {
                "x": 960,
                "y": 80,
                "wires": [
                    {
                        "id": "39f15089eb952cc2",
                        "port": 2
                    }
                ]
            }
        ],
        "env": [],
        "color": "#DDAA99"
    },
    {
        "id": "8b52884a.b76658",
        "type": "server",
        "name": "Home Assistant",
        "version": 5,
        "addon": false,
        "rejectUnauthorizedCerts": true,
        "ha_boolean": "y|yes|true|on|home|open",
        "connectionDelay": true,
        "cacheJson": false,
        "heartbeat": false,
        "heartbeatInterval": "30",
        "areaSelector": "friendlyName",
        "deviceSelector": "friendlyName",
        "entitySelector": "friendlyName",
        "statusSeparator": "at: ",
        "statusYear": "hidden",
        "statusMonth": "short",
        "statusDay": "numeric",
        "statusHourCycle": "h23",
        "statusTimeFormat": "h:m",
        "enableGlobalContextStore": true
    },
    {
        "id": "649859a4.a17818",
        "type": "mqtt-broker",
        "name": "mqtt",
        "broker": "emqx-listeners.database.svc",
        "port": "1883",
        "clientid": "node-red",
        "autoConnect": true,
        "usetls": false,
        "protocolVersion": "5",
        "keepalive": "60",
        "cleansession": true,
        "autoUnsubscribe": true,
        "birthTopic": "",
        "birthQos": "0",
        "birthPayload": "",
        "birthMsg": {},
        "closeTopic": "",
        "closeQos": "0",
        "closePayload": "",
        "closeMsg": {},
        "willTopic": "",
        "willQos": "0",
        "willPayload": "",
        "willMsg": {},
        "userProps": "",
        "sessionExpiry": ""
    },
    {
        "id": "f26da246.74a7f",
        "type": "light-scheduler-settings",
        "name": "home",
        "latitude": "51.293768",
        "longitude": "-2.491740"
    },
    {
        "id": "06a202b01db68d7e",
        "type": "plex-ws-server",
        "hostname": "plex.media.svc",
        "port": "32400",
        "timeout": "1000",
        "token": "1VHgvvssHeNS8ZATAdxE",
        "secure": false
    },
    {
        "id": "da8d24c5.0c87e8",
        "type": "api-call-service",
        "z": "43703bf3.b01b24",
        "name": "office group",
        "server": "8b52884a.b76658",
        "version": 7,
        "debugenabled": false,
        "action": "light.turn_off",
        "floorId": [],
        "areaId": [],
        "deviceId": [],
        "entityId": [
            "group.office_group"
        ],
        "labelId": [],
        "data": "",
        "dataType": "json",
        "mergeContext": "",
        "mustacheAltTags": false,
        "outputProperties": [
            {
                "property": "payload",
                "propertyType": "msg",
                "value": "",
                "valueType": "data"
            }
        ],
        "queue": "none",
        "blockInputOverrides": false,
        "domain": "light",
        "service": "turn_off",
        "x": 270,
        "y": 40,
        "wires": [
            []
        ]
    },
    {
        "id": "510bee04.ba47c",
        "type": "api-call-service",
        "z": "43703bf3.b01b24",
        "name": "hall light",
        "server": "8b52884a.b76658",
        "version": 7,
        "debugenabled": false,
        "action": "light.turn_off",
        "floorId": [],
        "areaId": [],
        "deviceId": [],
        "entityId": [
            "light.hallway_light"
        ],
        "labelId": [],
        "data": "",
        "dataType": "json",
        "mergeContext": "",
        "mustacheAltTags": false,
        "outputProperties": [
            {
                "property": "payload",
                "propertyType": "msg",
                "value": "",
                "valueType": "data"
            }
        ],
        "queue": "none",
        "blockInputOverrides": false,
        "domain": "light",
        "service": "turn_off",
        "x": 260,
        "y": 160,
        "wires": [
            []
        ]
    },
    {
        "id": "39b8136a.8621ec",
        "type": "api-call-service",
        "z": "43703bf3.b01b24",
        "name": "bathroom light",
        "server": "8b52884a.b76658",
        "version": 7,
        "debugenabled": false,
        "action": "light.turn_off",
        "floorId": [],
        "areaId": [],
        "deviceId": [],
        "entityId": [
            "light.bathroom_light"
        ],
        "labelId": [],
        "data": "",
        "dataType": "json",
        "mergeContext": "",
        "mustacheAltTags": false,
        "outputProperties": [
            {
                "property": "payload",
                "propertyType": "msg",
                "value": "",
                "valueType": "data"
            }
        ],
        "queue": "none",
        "blockInputOverrides": false,
        "domain": "light",
        "service": "turn_off",
        "x": 280,
        "y": 220,
        "wires": [
            []
        ]
    },
    {
        "id": "61b4bf0b24758188",
        "type": "api-call-service",
        "z": "43703bf3.b01b24",
        "name": "landing light",
        "server": "8b52884a.b76658",
        "version": 7,
        "debugenabled": false,
        "action": "light.turn_off",
        "floorId": [],
        "areaId": [],
        "deviceId": [],
        "entityId": [
            "light.landing_light"
        ],
        "labelId": [],
        "data": "",
        "dataType": "json",
        "mergeContext": "",
        "mustacheAltTags": false,
        "outputProperties": [
            {
                "property": "payload",
                "propertyType": "msg",
                "value": "",
                "valueType": "data"
            }
        ],
        "queue": "none",
        "blockInputOverrides": false,
        "domain": "light",
        "service": "turn_off",
        "x": 270,
        "y": 280,
        "wires": [
            []
        ]
    },
    {
        "id": "8c9d4e0639f258ad",
        "type": "api-call-service",
        "z": "43703bf3.b01b24",
        "name": "lounge group",
        "server": "8b52884a.b76658",
        "version": 7,
        "debugenabled": false,
        "action": "light.turn_off",
        "floorId": [],
        "areaId": [],
        "deviceId": [],
        "entityId": [
            "group.lounge_group"
        ],
        "labelId": [],
        "data": "",
        "dataType": "json",
        "mergeContext": "",
        "mustacheAltTags": false,
        "outputProperties": [
            {
                "property": "payload",
                "propertyType": "msg",
                "value": "",
                "valueType": "data"
            }
        ],
        "queue": "none",
        "blockInputOverrides": false,
        "domain": "light",
        "service": "turn_off",
        "x": 270,
        "y": 100,
        "wires": [
            []
        ]
    },
    {
        "id": "6778550e67dae48c",
        "type": "api-call-service",
        "z": "43703bf3.b01b24",
        "name": "Kitchen group",
        "server": "8b52884a.b76658",
        "version": 7,
        "debugenabled": false,
        "action": "light.turn_off",
        "floorId": [],
        "areaId": [],
        "deviceId": [],
        "entityId": [
            "group.kitchen_group"
        ],
        "labelId": [],
        "data": "",
        "dataType": "json",
        "mergeContext": "",
        "mustacheAltTags": false,
        "outputProperties": [
            {
                "property": "payload",
                "propertyType": "msg",
                "value": "",
                "valueType": "data"
            }
        ],
        "queue": "none",
        "blockInputOverrides": false,
        "domain": "light",
        "service": "turn_off",
        "x": 280,
        "y": 340,
        "wires": [
            []
        ]
    },
    {
        "id": "e1ef31c3c725967b",
        "type": "api-call-service",
        "z": "43703bf3.b01b24",
        "name": "Kitchen cupboard group",
        "server": "8b52884a.b76658",
        "version": 7,
        "debugenabled": false,
        "action": "light.turn_off",
        "floorId": [],
        "areaId": [],
        "deviceId": [],
        "entityId": [
            "group.cupboard_group"
        ],
        "labelId": [],
        "data": "",
        "dataType": "json",
        "mergeContext": "",
        "mustacheAltTags": false,
        "outputProperties": [
            {
                "property": "payload",
                "propertyType": "msg",
                "value": "",
                "valueType": "data"
            }
        ],
        "queue": "none",
        "blockInputOverrides": false,
        "domain": "light",
        "service": "turn_off",
        "x": 310,
        "y": 400,
        "wires": [
            []
        ]
    },
    {
        "id": "6c869c1f5fa74cb2",
        "type": "api-call-service",
        "z": "43703bf3.b01b24",
        "name": "Bedroom group",
        "server": "8b52884a.b76658",
        "version": 7,
        "debugenabled": false,
        "action": "light.turn_off",
        "floorId": [],
        "areaId": [],
        "deviceId": [],
        "entityId": [
            "group.bedroom_group"
        ],
        "labelId": [],
        "data": "",
        "dataType": "json",
        "mergeContext": "",
        "mustacheAltTags": false,
        "outputProperties": [
            {
                "property": "payload",
                "propertyType": "msg",
                "value": "",
                "valueType": "data"
            }
        ],
        "queue": "none",
        "blockInputOverrides": false,
        "domain": "light",
        "service": "turn_off",
        "x": 280,
        "y": 460,
        "wires": [
            []
        ]
    },
    {
        "id": "35120a6bb4c8411b",
        "type": "api-call-service",
        "z": "43703bf3.b01b24",
        "name": "Diningroom",
        "server": "8b52884a.b76658",
        "version": 7,
        "debugenabled": false,
        "action": "light.turn_off",
        "floorId": [],
        "areaId": [],
        "deviceId": [],
        "entityId": [
            "group.diningroom_group"
        ],
        "labelId": [],
        "data": "",
        "dataType": "json",
        "mergeContext": "",
        "mustacheAltTags": false,
        "outputProperties": [
            {
                "property": "payload",
                "propertyType": "msg",
                "value": "",
                "valueType": "data"
            }
        ],
        "queue": "none",
        "blockInputOverrides": false,
        "domain": "light",
        "service": "turn_off",
        "x": 270,
        "y": 520,
        "wires": [
            []
        ]
    },
    {
        "id": "403394b42c104bf5",
        "type": "http request",
        "z": "998559de1e6b81d6",
        "name": "",
        "method": "POST",
        "ret": "txt",
        "paytoqs": "body",
        "url": "http://hyper.microserver.space:8090/json-rpc",
        "tls": "",
        "persist": false,
        "proxy": "",
        "insecureHTTPParser": false,
        "authType": "",
        "senderr": false,
        "headers": [],
        "x": 390,
        "y": 80,
        "wires": [
            [
                "be418e669847012b"
            ]
        ]
    },
    {
        "id": "edc52ba0eebf13d2",
        "type": "function",
        "z": "998559de1e6b81d6",
        "name": "format",
        "func": "msg.headers = {};\nmsg.headers[\"Content-Type\"] = \"application/json\";\nmsg.payload = {\n     \"command\":\"serverinfo\",\n     \"tan\":1\n    };\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 230,
        "y": 80,
        "wires": [
            [
                "403394b42c104bf5"
            ]
        ]
    },
    {
        "id": "be418e669847012b",
        "type": "json",
        "z": "998559de1e6b81d6",
        "name": "",
        "property": "payload",
        "action": "",
        "pretty": false,
        "x": 550,
        "y": 80,
        "wires": [
            []
        ]
    },
    {
        "id": "39f15089eb952cc2",
        "type": "switch",
        "z": "ebce7e9e955e453a",
        "name": "1.driveway-- 2.lounge-- 3. office",
        "property": "payload.after.camera",
        "propertyType": "msg",
        "rules": [
            {
                "t": "eq",
                "v": "driveway",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "lounge",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "office",
                "vt": "str"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 3,
        "x": 610,
        "y": 80,
        "wires": [
            [],
            [],
            []
        ],
        "info": "Change **front** and **back** Switch names to be the names of your cameras defined in the Frigate Config"
    },
    {
        "id": "683b8a153e6c214f",
        "type": "mqtt in",
        "z": "ebce7e9e955e453a",
        "name": "",
        "topic": "frigate/events",
        "qos": "2",
        "datatype": "auto-detect",
        "broker": "649859a4.a17818",
        "nl": false,
        "rap": false,
        "inputs": 0,
        "x": 90,
        "y": 80,
        "wires": [
            [
                "8d0a40061aa86682"
            ]
        ]
    },
    {
        "id": "8d0a40061aa86682",
        "type": "rbe",
        "z": "ebce7e9e955e453a",
        "name": "",
        "func": "rbe",
        "gap": "",
        "start": "",
        "inout": "out",
        "septopics": true,
        "property": "payload.after.id",
        "topi": "topic",
        "x": 330,
        "y": 80,
        "wires": [
            [
                "39f15089eb952cc2"
            ]
        ],
        "info": "Block any Messages that have  duplicate After ID.  Cuts down on multiple mqtt messages for the same notification"
    },
    {
        "id": "4b2dac557381f572",
        "type": "comment",
        "z": "ebce7e9e955e453a",
        "name": "Automation Based on Frigate Camera Name",
        "info": "Flow to action something based on the camera name that triggered detction",
        "x": 190,
        "y": 40,
        "wires": []
    },
    {
        "id": "f0357509eda72c8d",
        "type": "api-call-service",
        "z": "afb0f186.cfb0d",
        "name": "landing light",
        "server": "8b52884a.b76658",
        "version": 7,
        "debugenabled": false,
        "action": "",
        "floorId": [],
        "areaId": [],
        "deviceId": [],
        "entityId": [
            "light.landing_light"
        ],
        "labelId": [],
        "data": "",
        "dataType": "json",
        "mergeContext": "",
        "mustacheAltTags": false,
        "outputProperties": [
            {
                "property": "payload",
                "propertyType": "msg",
                "value": "",
                "valueType": "data"
            }
        ],
        "queue": "none",
        "blockInputOverrides": false,
        "domain": "light",
        "service": "turn_on",
        "x": 1270,
        "y": 60,
        "wires": [
            []
        ]
    },
    {
        "id": "312fc9f4c564b728",
        "type": "trigger",
        "z": "afb0f186.cfb0d",
        "name": "",
        "op1": "{\"action\":\"light.turn_on\"}",
        "op2": "{\"action\":\"light.turn_off\"}",
        "op1type": "json",
        "op2type": "json",
        "duration": "60",
        "extend": true,
        "overrideDelay": false,
        "units": "s",
        "reset": "",
        "bytopic": "all",
        "topic": "topic",
        "outputs": 2,
        "x": 1030,
        "y": 60,
        "wires": [
            [
                "f0357509eda72c8d"
            ],
            [
                "f0357509eda72c8d"
            ]
        ]
    },
    {
        "id": "de7ce92966ad9824",
        "type": "light-scheduler-filter",
        "z": "afb0f186.cfb0d",
        "settings": "f26da246.74a7f",
        "events": "[{\"start\":{\"dow\":1,\"mod\":0},\"end\":{\"dow\":2,\"mod\":0}},{\"start\":{\"dow\":2,\"mod\":0},\"end\":{\"dow\":3,\"mod\":0}},{\"start\":{\"dow\":3,\"mod\":0},\"end\":{\"dow\":4,\"mod\":0}},{\"start\":{\"dow\":4,\"mod\":0},\"end\":{\"dow\":5,\"mod\":0}},{\"start\":{\"dow\":5,\"mod\":0},\"end\":{\"dow\":6,\"mod\":0}},{\"start\":{\"dow\":6,\"mod\":0},\"end\":{\"dow\":0,\"mod\":0}},{\"start\":{\"dow\":0,\"mod\":0},\"end\":{\"dow\":1,\"mod\":1315}}]",
        "name": "dark? (filter)",
        "onlyWhenDark": true,
        "scheduleRndMax": 0,
        "sunElevationThreshold": "6",
        "sunShowElevationInStatus": true,
        "x": 590,
        "y": 60,
        "wires": [
            [
                "816f9cdc5591aafd"
            ],
            []
        ]
    },
    {
        "id": "9a771d738291330e",
        "type": "api-current-state",
        "z": "afb0f186.cfb0d",
        "name": "stairs lights off?",
        "server": "8b52884a.b76658",
        "version": 3,
        "outputs": 2,
        "halt_if": "on",
        "halt_if_type": "str",
        "halt_if_compare": "is",
        "entity_id": "light.landing_light",
        "state_type": "str",
        "blockInputOverrides": false,
        "outputProperties": [
            {
                "property": "payload",
                "propertyType": "msg",
                "value": "",
                "valueType": "entityState"
            },
            {
                "property": "data",
                "propertyType": "msg",
                "value": "",
                "valueType": "entity"
            },
            {
                "property": "topic",
                "propertyType": "msg",
                "value": "",
                "valueType": "triggerId"
            }
        ],
        "for": 0,
        "forType": "num",
        "forUnits": "minutes",
        "x": 360,
        "y": 60,
        "wires": [
            [],
            [
                "de7ce92966ad9824"
            ]
        ]
    },
    {
        "id": "a109a3be437e8898",
        "type": "trigger-state",
        "z": "afb0f186.cfb0d",
        "name": "home -> not_home",
        "server": "8b52884a.b76658",
        "version": 5,
        "inputs": 1,
        "outputs": 2,
        "exposeAsEntityConfig": "",
        "entities": {
            "entity": [
                "sensor.anyone_home"
            ],
            "substring": [],
            "regex": []
        },
        "debugEnabled": false,
        "constraints": [
            {
                "targetType": "this_entity",
                "targetValue": "",
                "propertyType": "current_state",
                "propertyValue": "new_state.state",
                "comparatorType": "is",
                "comparatorValueDatatype": "str",
                "comparatorValue": "not_home"
            },
            {
                "targetType": "this_entity",
                "targetValue": "",
                "propertyType": "previous_state",
                "propertyValue": "old_state.state",
                "comparatorType": "is",
                "comparatorValueDatatype": "str",
                "comparatorValue": "home"
            }
        ],
        "customOutputs": [],
        "outputInitially": false,
        "stateType": "str",
        "enableInput": true,
        "exposeToHomeAssistant": false,
        "haConfig": [
            {
                "property": "name",
                "value": ""
            },
            {
                "property": "icon",
                "value": ""
            }
        ],
        "x": 150,
        "y": 300,
        "wires": [
            [
                "53bc270379b36276"
            ],
            []
        ]
    },
    {
        "id": "53bc270379b36276",
        "type": "subflow:43703bf3.b01b24",
        "z": "afb0f186.cfb0d",
        "name": "",
        "env": [],
        "x": 390,
        "y": 300,
        "wires": []
    },
    {
        "id": "2f83921a8de3c8f4",
        "type": "api-current-state",
        "z": "afb0f186.cfb0d",
        "name": "not home?",
        "server": "8b52884a.b76658",
        "version": 3,
        "outputs": 2,
        "halt_if": "home",
        "halt_if_type": "str",
        "halt_if_compare": "is_not",
        "entity_id": "sensor.anyone_home",
        "state_type": "str",
        "blockInputOverrides": false,
        "outputProperties": [],
        "for": 0,
        "forType": "num",
        "forUnits": "minutes",
        "x": 290,
        "y": 420,
        "wires": [
            [
                "6d367913e0308ba9"
            ],
            []
        ]
    },
    {
        "id": "cc3f2a6d4b923938",
        "type": "light-scheduler",
        "z": "afb0f186.cfb0d",
        "settings": "f26da246.74a7f",
        "events": "[{\"start\":{\"dow\":1,\"mod\":540},\"end\":{\"dow\":1,\"mod\":1350}},{\"start\":{\"dow\":3,\"mod\":540},\"end\":{\"dow\":3,\"mod\":1350}},{\"start\":{\"dow\":2,\"mod\":540},\"end\":{\"dow\":2,\"mod\":1350}},{\"start\":{\"dow\":4,\"mod\":540},\"end\":{\"dow\":4,\"mod\":1350}},{\"start\":{\"dow\":5,\"mod\":540},\"end\":{\"dow\":5,\"mod\":1350}},{\"start\":{\"dow\":6,\"mod\":540},\"end\":{\"dow\":6,\"mod\":1350}},{\"start\":{\"dow\":0,\"mod\":540},\"end\":{\"dow\":0,\"mod\":1350}}]",
        "topic": "",
        "name": "dark?",
        "onPayload": "{\"action\": \"light.turn_on\"}",
        "onPayloadType": "json",
        "offPayload": "{\"action\": \"light.turn_off\"}",
        "offPayloadType": "json",
        "onlyWhenDark": true,
        "scheduleRndMax": 0,
        "sunElevationThreshold": "0",
        "sunShowElevationInStatus": false,
        "outputfreq": "output.statechange.startup",
        "x": 110,
        "y": 420,
        "wires": [
            [
                "2f83921a8de3c8f4"
            ]
        ]
    },
    {
        "id": "11d10cf26cd0621d",
        "type": "comment",
        "z": "afb0f186.cfb0d",
        "name": "Lighting",
        "info": "",
        "x": 110,
        "y": 20,
        "wires": []
    },
    {
        "id": "60f4252274bd52d5",
        "type": "comment",
        "z": "afb0f186.cfb0d",
        "name": "Office automation",
        "info": "",
        "x": 140,
        "y": 780,
        "wires": []
    },
    {
        "id": "eae36b37750c19e9",
        "type": "server-state-changed",
        "z": "afb0f186.cfb0d",
        "name": "front door",
        "server": "8b52884a.b76658",
        "version": 6,
        "outputs": 2,
        "exposeAsEntityConfig": "",
        "entities": {
            "entity": [
                "binary_sensor.front_door_contact_sensor_contact"
            ],
            "substring": [],
            "regex": []
        },
        "outputInitially": false,
        "stateType": "str",
        "ifState": "off",
        "ifStateType": "str",
        "ifStateOperator": "is",
        "outputOnlyOnStateChange": true,
        "for": 0,
        "forType": "num",
        "forUnits": "minutes",
        "ignorePrevStateNull": false,
        "ignorePrevStateUnknown": false,
        "ignorePrevStateUnavailable": false,
        "ignoreCurrentStateUnknown": false,
        "ignoreCurrentStateUnavailable": false,
        "outputProperties": [
            {
                "property": "payload",
                "propertyType": "msg",
                "value": "",
                "valueType": "entityState"
            },
            {
                "property": "data",
                "propertyType": "msg",
                "value": "",
                "valueType": "eventData"
            },
            {
                "property": "topic",
                "propertyType": "msg",
                "value": "",
                "valueType": "triggerId"
            }
        ],
        "x": 120,
        "y": 180,
        "wires": [
            [],
            [
                "30d78f0012e7ad59",
                "59b79a64e7f57ba7"
            ]
        ]
    },
    {
        "id": "4689ae8c779902cc",
        "type": "comment",
        "z": "afb0f186.cfb0d",
        "name": "Leave home routing",
        "info": "",
        "x": 150,
        "y": 260,
        "wires": []
    },
    {
        "id": "51e77ba5691fca49",
        "type": "api-call-service",
        "z": "afb0f186.cfb0d",
        "name": "Russell android notify",
        "server": "8b52884a.b76658",
        "version": 7,
        "debugenabled": false,
        "action": "notify.mobile_app_pixel_7a",
        "floorId": [],
        "areaId": [],
        "deviceId": [],
        "entityId": [],
        "labelId": [],
        "data": "",
        "dataType": "json",
        "mergeContext": "",
        "mustacheAltTags": false,
        "outputProperties": [
            {
                "property": "payload",
                "propertyType": "msg",
                "value": "",
                "valueType": "data"
            }
        ],
        "queue": "none",
        "blockInputOverrides": false,
        "domain": "notify",
        "service": "mobile_app_pixel_7a",
        "x": 960,
        "y": 1600,
        "wires": [
            []
        ]
    },
    {
        "id": "49620fe597046cdb",
        "type": "function",
        "z": "afb0f186.cfb0d",
        "name": "format Android",
        "func": "var category = \"time\"\nvar title = \"Bins reminder\"\nvar message = \"Put out the \" + msg.payload + \" 🗑\"\n\nmsg.payload = {\n    \"data\": {\n        message,\n        title,\n        data: {\n            push: {\n                category: category,\n                sound: {\n                  name: \"ct-error.caf\",\n                  critical: 1,\n                  volume: 1.0\n                }\n            }\n        }\n    }\n}\nreturn [ msg ];\n",
        "outputs": 1,
        "timeout": "",
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 560,
        "y": 1600,
        "wires": [
            [
                "36109e7738361659"
            ]
        ]
    },
    {
        "id": "ae50607a2737d8ee",
        "type": "poll-state",
        "z": "afb0f186.cfb0d",
        "name": "Household bin",
        "server": "8b52884a.b76658",
        "version": 3,
        "exposeAsEntityConfig": "",
        "updateInterval": "3600",
        "updateIntervalType": "num",
        "updateIntervalUnits": "seconds",
        "outputInitially": true,
        "outputOnChanged": true,
        "entityId": "sensor.waste_collection_household",
        "stateType": "str",
        "ifState": "TOMORROW",
        "ifStateType": "str",
        "ifStateOperator": "is",
        "outputs": 2,
        "outputProperties": [
            {
                "property": "payload",
                "propertyType": "msg",
                "value": "",
                "valueType": "entityState"
            },
            {
                "property": "data",
                "propertyType": "msg",
                "value": "",
                "valueType": "entity"
            },
            {
                "property": "topic",
                "propertyType": "msg",
                "value": "",
                "valueType": "triggerId"
            }
        ],
        "x": 130,
        "y": 1600,
        "wires": [
            [
                "d91202f41b3c1696"
            ],
            []
        ]
    },
    {
        "id": "bae7e1cdf2bf377e",
        "type": "comment",
        "z": "afb0f186.cfb0d",
        "name": "Bins",
        "info": "",
        "x": 110,
        "y": 1540,
        "wires": []
    },
    {
        "id": "36109e7738361659",
        "type": "delay",
        "z": "afb0f186.cfb0d",
        "name": "",
        "pauseType": "rate",
        "timeout": "2",
        "timeoutUnits": "minutes",
        "rate": "1",
        "nbRateUnits": "1",
        "rateUnits": "day",
        "randomFirst": "1",
        "randomLast": "5",
        "randomUnits": "seconds",
        "drop": true,
        "allowrate": false,
        "outputs": 1,
        "x": 750,
        "y": 1600,
        "wires": [
            [
                "51e77ba5691fca49"
            ]
        ]
    },
    {
        "id": "950f806ee77e84e4",
        "type": "server-state-changed",
        "z": "afb0f186.cfb0d",
        "name": "landing motion",
        "server": "8b52884a.b76658",
        "version": 6,
        "outputs": 2,
        "exposeAsEntityConfig": "",
        "entities": {
            "entity": [
                "binary_sensor.landing_motion_sensor_occupancy"
            ],
            "substring": [],
            "regex": []
        },
        "outputInitially": false,
        "stateType": "str",
        "ifState": "off",
        "ifStateType": "str",
        "ifStateOperator": "is",
        "outputOnlyOnStateChange": true,
        "for": 0,
        "forType": "num",
        "forUnits": "minutes",
        "ignorePrevStateNull": false,
        "ignorePrevStateUnknown": false,
        "ignorePrevStateUnavailable": false,
        "ignoreCurrentStateUnknown": false,
        "ignoreCurrentStateUnavailable": false,
        "outputProperties": [
            {
                "property": "payload",
                "propertyType": "msg",
                "value": "",
                "valueType": "entityState"
            },
            {
                "property": "data",
                "propertyType": "msg",
                "value": "",
                "valueType": "eventData"
            },
            {
                "property": "topic",
                "propertyType": "msg",
                "value": "",
                "valueType": "triggerId"
            }
        ],
        "x": 140,
        "y": 60,
        "wires": [
            [],
            [
                "9a771d738291330e"
            ]
        ]
    },
    {
        "id": "fa2a161f51d65d28",
        "type": "trigger-state",
        "z": "afb0f186.cfb0d",
        "name": "unoccupied -> occupied",
        "server": "8b52884a.b76658",
        "version": 5,
        "inputs": 0,
        "outputs": 2,
        "exposeAsEntityConfig": "",
        "entities": {
            "entity": [
                "binary_sensor.ep1_01_7f753c_occupancy"
            ],
            "substring": [],
            "regex": []
        },
        "debugEnabled": false,
        "constraints": [
            {
                "targetType": "this_entity",
                "targetValue": "",
                "propertyType": "current_state",
                "propertyValue": "new_state.state",
                "comparatorType": "is",
                "comparatorValueDatatype": "str",
                "comparatorValue": "on"
            },
            {
                "targetType": "this_entity",
                "targetValue": "",
                "propertyType": "previous_state",
                "propertyValue": "old_state.state",
                "comparatorType": "is",
                "comparatorValueDatatype": "str",
                "comparatorValue": "off"
            }
        ],
        "customOutputs": [],
        "outputInitially": false,
        "stateType": "str",
        "enableInput": false,
        "exposeToHomeAssistant": false,
        "haConfig": [
            {
                "property": "name",
                "value": ""
            },
            {
                "property": "icon",
                "value": ""
            }
        ],
        "x": 160,
        "y": 860,
        "wires": [
            [
                "0c08982549b67008"
            ],
            []
        ]
    },
    {
        "id": "aec496c709063c49",
        "type": "function",
        "z": "afb0f186.cfb0d",
        "name": "turn_off",
        "func": "var action = \"light.turn_off\"\n\nmsg.payload = {\n    \"action\": action,\n}\nreturn [ msg ];\n",
        "outputs": 1,
        "timeout": "",
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1100,
        "y": 920,
        "wires": [
            [
                "5b2070e801e7c8a1",
                "8ead5fb51ad6d599"
            ]
        ]
    },
    {
        "id": "a1ceebb6cd381b75",
        "type": "function",
        "z": "afb0f186.cfb0d",
        "name": "turn_on",
        "func": "var action = \"light.turn_on\"\n\nmsg.payload = {\n    \"action\": action,\n}\nreturn [ msg ];\n",
        "outputs": 1,
        "timeout": "",
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1100,
        "y": 860,
        "wires": [
            [
                "8ead5fb51ad6d599"
            ]
        ]
    },
    {
        "id": "bc36c13ee490f021",
        "type": "api-current-state",
        "z": "afb0f186.cfb0d",
        "name": "illuminance < 10",
        "server": "8b52884a.b76658",
        "version": 3,
        "outputs": 2,
        "halt_if": "10",
        "halt_if_type": "num",
        "halt_if_compare": "lt",
        "entity_id": "sensor.ep1_01_7f753c_illuminance",
        "state_type": "str",
        "blockInputOverrides": false,
        "outputProperties": [
            {
                "property": "payload",
                "propertyType": "msg",
                "value": "",
                "valueType": "entityState"
            },
            {
                "property": "data",
                "propertyType": "msg",
                "value": "",
                "valueType": "entity"
            }
        ],
        "for": "0",
        "forType": "num",
        "forUnits": "minutes",
        "override_topic": false,
        "state_location": "payload",
        "override_payload": "msg",
        "entity_location": "data",
        "override_data": "msg",
        "x": 860,
        "y": 800,
        "wires": [
            [
                "0bf98c34b9c79a18"
            ],
            []
        ]
    },
    {
        "id": "5b2070e801e7c8a1",
        "type": "api-call-service",
        "z": "afb0f186.cfb0d",
        "name": "office light",
        "server": "8b52884a.b76658",
        "version": 7,
        "debugenabled": false,
        "action": "",
        "floorId": [],
        "areaId": [],
        "deviceId": [],
        "entityId": [
            "light.office_light"
        ],
        "labelId": [],
        "data": "",
        "dataType": "json",
        "mergeContext": "",
        "mustacheAltTags": false,
        "outputProperties": [
            {
                "property": "payload",
                "propertyType": "msg",
                "value": "payload",
                "valueType": "msg"
            }
        ],
        "queue": "none",
        "blockInputOverrides": false,
        "domain": "light",
        "service": "turn_off",
        "x": 1340,
        "y": 800,
        "wires": [
            []
        ]
    },
    {
        "id": "0bf98c34b9c79a18",
        "type": "function",
        "z": "afb0f186.cfb0d",
        "name": "turn_on",
        "func": "var action = \"light.turn_on\"\n\nmsg.payload = {\n    \"action\": action,\n}\nreturn [ msg ];\n",
        "outputs": 1,
        "timeout": "",
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1100,
        "y": 800,
        "wires": [
            [
                "5b2070e801e7c8a1"
            ]
        ]
    },
    {
        "id": "731142af522cf3d3",
        "type": "server-state-changed",
        "z": "afb0f186.cfb0d",
        "name": "occupied -> unoccupied",
        "server": "8b52884a.b76658",
        "version": 6,
        "outputs": 2,
        "exposeAsEntityConfig": "",
        "entities": {
            "entity": [
                "binary_sensor.ep1_01_7f753c_occupancy"
            ],
            "substring": [],
            "regex": []
        },
        "outputInitially": false,
        "stateType": "str",
        "ifState": "off",
        "ifStateType": "str",
        "ifStateOperator": "is",
        "outputOnlyOnStateChange": true,
        "for": "5",
        "forType": "num",
        "forUnits": "minutes",
        "ignorePrevStateNull": true,
        "ignorePrevStateUnknown": true,
        "ignorePrevStateUnavailable": true,
        "ignoreCurrentStateUnknown": false,
        "ignoreCurrentStateUnavailable": false,
        "outputProperties": [
            {
                "property": "payload",
                "propertyType": "msg",
                "value": "",
                "valueType": "entityState"
            },
            {
                "property": "data",
                "propertyType": "msg",
                "value": "",
                "valueType": "eventData"
            },
            {
                "property": "topic",
                "propertyType": "msg",
                "value": "",
                "valueType": "triggerId"
            }
        ],
        "x": 160,
        "y": 940,
        "wires": [
            [
                "aec496c709063c49"
            ],
            []
        ]
    },
    {
        "id": "687240d745c3448c",
        "type": "comment",
        "z": "afb0f186.cfb0d",
        "name": "Lounge automation",
        "info": "",
        "x": 150,
        "y": 500,
        "wires": []
    },
    {
        "id": "8449b131d31f148d",
        "type": "trigger-state",
        "z": "afb0f186.cfb0d",
        "name": "unoccupied -> occupied",
        "server": "8b52884a.b76658",
        "version": 5,
        "inputs": 0,
        "outputs": 2,
        "exposeAsEntityConfig": "",
        "entities": {
            "entity": [
                "binary_sensor.ep1_02_dac9c4_occupancy"
            ],
            "substring": [],
            "regex": []
        },
        "debugEnabled": false,
        "constraints": [
            {
                "targetType": "this_entity",
                "targetValue": "",
                "propertyType": "current_state",
                "propertyValue": "new_state.state",
                "comparatorType": "is",
                "comparatorValueDatatype": "str",
                "comparatorValue": "on"
            },
            {
                "targetType": "this_entity",
                "targetValue": "",
                "propertyType": "previous_state",
                "propertyValue": "old_state.state",
                "comparatorType": "is",
                "comparatorValueDatatype": "str",
                "comparatorValue": "off"
            }
        ],
        "customOutputs": [],
        "outputInitially": false,
        "stateType": "str",
        "enableInput": false,
        "exposeToHomeAssistant": false,
        "haConfig": [
            {
                "property": "name",
                "value": ""
            },
            {
                "property": "icon",
                "value": ""
            }
        ],
        "x": 160,
        "y": 620,
        "wires": [
            [
                "8075223ba4513be8"
            ],
            []
        ]
    },
    {
        "id": "3a20c09f99eb06f8",
        "type": "function",
        "z": "afb0f186.cfb0d",
        "name": "turn_off",
        "func": "var action = \"light.turn_off\"\n\nmsg.payload = {\n    \"action\": action,\n}\nreturn [ msg ];\n",
        "outputs": 1,
        "timeout": "",
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 980,
        "y": 700,
        "wires": [
            [
                "9024635ac412c326"
            ]
        ]
    },
    {
        "id": "8075223ba4513be8",
        "type": "api-current-state",
        "z": "afb0f186.cfb0d",
        "name": "lounge illuminance",
        "server": "8b52884a.b76658",
        "version": 3,
        "outputs": 2,
        "halt_if": "1",
        "halt_if_type": "num",
        "halt_if_compare": "lt",
        "entity_id": "sensor.ep1_02_dac9c4_illuminance",
        "state_type": "str",
        "blockInputOverrides": false,
        "outputProperties": [
            {
                "property": "payload",
                "propertyType": "msg",
                "value": "",
                "valueType": "entityState"
            },
            {
                "property": "data",
                "propertyType": "msg",
                "value": "",
                "valueType": "entity"
            }
        ],
        "for": "0",
        "forType": "num",
        "forUnits": "minutes",
        "override_topic": false,
        "state_location": "payload",
        "override_payload": "msg",
        "entity_location": "data",
        "override_data": "msg",
        "x": 410,
        "y": 620,
        "wires": [
            [
                "3ca9d267b0d9d63a"
            ],
            []
        ]
    },
    {
        "id": "9024635ac412c326",
        "type": "api-call-service",
        "z": "afb0f186.cfb0d",
        "name": "livingroom lights",
        "server": "8b52884a.b76658",
        "version": 7,
        "debugenabled": false,
        "action": "",
        "floorId": [],
        "areaId": [],
        "deviceId": [],
        "entityId": [
            "light.lounge_wall_lights",
            "light.lounge_light"
        ],
        "labelId": [],
        "data": "",
        "dataType": "json",
        "mergeContext": "",
        "mustacheAltTags": false,
        "outputProperties": [
            {
                "property": "payload",
                "propertyType": "msg",
                "value": "payload",
                "valueType": "msg"
            }
        ],
        "queue": "none",
        "blockInputOverrides": false,
        "domain": "light",
        "service": "turn_off",
        "x": 1180,
        "y": 660,
        "wires": [
            []
        ]
    },
    {
        "id": "d0b932920b123d3e",
        "type": "function",
        "z": "afb0f186.cfb0d",
        "name": "turn_on",
        "func": "var action = \"light.turn_on\"\n\nmsg.payload = {\n    \"action\": action,\n}\nreturn [ msg ];\n",
        "outputs": 1,
        "timeout": "",
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 980,
        "y": 620,
        "wires": [
            [
                "9024635ac412c326"
            ]
        ]
    },
    {
        "id": "2f749f5f8d4664a9",
        "type": "server-state-changed",
        "z": "afb0f186.cfb0d",
        "name": "occupied -> unoccupied",
        "server": "8b52884a.b76658",
        "version": 6,
        "outputs": 2,
        "exposeAsEntityConfig": "",
        "entities": {
            "entity": [
                "binary_sensor.ep1_02_dac9c4_occupancy"
            ],
            "substring": [],
            "regex": []
        },
        "outputInitially": false,
        "stateType": "str",
        "ifState": "off",
        "ifStateType": "str",
        "ifStateOperator": "is",
        "outputOnlyOnStateChange": true,
        "for": "5",
        "forType": "num",
        "forUnits": "minutes",
        "ignorePrevStateNull": true,
        "ignorePrevStateUnknown": true,
        "ignorePrevStateUnavailable": true,
        "ignoreCurrentStateUnknown": false,
        "ignoreCurrentStateUnavailable": false,
        "outputProperties": [
            {
                "property": "payload",
                "propertyType": "msg",
                "value": "",
                "valueType": "entityState"
            },
            {
                "property": "data",
                "propertyType": "msg",
                "value": "",
                "valueType": "eventData"
            },
            {
                "property": "topic",
                "propertyType": "msg",
                "value": "",
                "valueType": "triggerId"
            }
        ],
        "x": 160,
        "y": 700,
        "wires": [
            [
                "a4e9a08774b5f904"
            ],
            []
        ]
    },
    {
        "id": "3ca9d267b0d9d63a",
        "type": "api-current-state",
        "z": "afb0f186.cfb0d",
        "name": "home?",
        "server": "8b52884a.b76658",
        "version": 3,
        "outputs": 2,
        "halt_if": "home",
        "halt_if_type": "str",
        "halt_if_compare": "is_not",
        "entity_id": "sensor.anyone_home",
        "state_type": "str",
        "blockInputOverrides": false,
        "outputProperties": [
            {
                "property": "payload",
                "propertyType": "msg",
                "value": "",
                "valueType": "entityState"
            },
            {
                "property": "data",
                "propertyType": "msg",
                "value": "",
                "valueType": "entity"
            },
            {
                "property": "topic",
                "propertyType": "msg",
                "value": "",
                "valueType": "triggerId"
            }
        ],
        "for": 0,
        "forType": "num",
        "forUnits": "minutes",
        "x": 610,
        "y": 620,
        "wires": [
            [],
            [
                "0edc6027c8a03d35"
            ]
        ]
    },
    {
        "id": "8ead5fb51ad6d599",
        "type": "api-call-service",
        "z": "afb0f186.cfb0d",
        "name": "office rgb",
        "server": "8b52884a.b76658",
        "version": 7,
        "debugenabled": false,
        "action": "",
        "floorId": [],
        "areaId": [],
        "deviceId": [],
        "entityId": [
            "group.office_rgb"
        ],
        "labelId": [],
        "data": "",
        "dataType": "jsonata",
        "mergeContext": "",
        "mustacheAltTags": false,
        "outputProperties": [],
        "queue": "none",
        "blockInputOverrides": false,
        "domain": "light",
        "service": "",
        "x": 1340,
        "y": 900,
        "wires": [
            []
        ]
    },
    {
        "id": "fc0a39c6a5e146f3",
        "type": "poll-state",
        "z": "afb0f186.cfb0d",
        "name": "Garden bin",
        "server": "8b52884a.b76658",
        "version": 3,
        "exposeAsEntityConfig": "",
        "updateInterval": "3600",
        "updateIntervalType": "num",
        "updateIntervalUnits": "seconds",
        "outputInitially": true,
        "outputOnChanged": true,
        "entityId": "sensor.waste_collection_garden",
        "stateType": "str",
        "ifState": "TOMORROW",
        "ifStateType": "str",
        "ifStateOperator": "is",
        "outputs": 2,
        "outputProperties": [
            {
                "property": "payload",
                "propertyType": "msg",
                "value": "",
                "valueType": "entityState"
            },
            {
                "property": "data",
                "propertyType": "msg",
                "value": "",
                "valueType": "entity"
            },
            {
                "property": "topic",
                "propertyType": "msg",
                "value": "",
                "valueType": "triggerId"
            }
        ],
        "x": 120,
        "y": 1680,
        "wires": [
            [
                "8f10bf20fa4f02e1"
            ],
            []
        ]
    },
    {
        "id": "816f9cdc5591aafd",
        "type": "time-range-switch",
        "z": "afb0f186.cfb0d",
        "name": "02:00-9am",
        "lat": "51.293768",
        "lon": "-2.491740",
        "startTime": "02:00",
        "endTime": "09:00",
        "startOffset": 0,
        "endOffset": 0,
        "x": 810,
        "y": 60,
        "wires": [
            [],
            [
                "312fc9f4c564b728"
            ]
        ]
    },
    {
        "id": "0edc6027c8a03d35",
        "type": "time-range-switch",
        "z": "afb0f186.cfb0d",
        "name": "02:00-9am",
        "lat": "51.293768",
        "lon": "-2.491740",
        "startTime": "02:00",
        "endTime": "09:00",
        "startOffset": 0,
        "endOffset": 0,
        "x": 790,
        "y": 620,
        "wires": [
            [],
            [
                "d0b932920b123d3e"
            ]
        ]
    },
    {
        "id": "0f5ec4d827651734",
        "type": "bigtimer",
        "z": "afb0f186.cfb0d",
        "outtopic": "",
        "outpayload1": "1",
        "outpayload2": "0",
        "name": "Standup",
        "comment": "",
        "lat": "51.32063880734896",
        "lon": "-2.2089664938383327",
        "starttime": "585",
        "endtime": "600",
        "starttime2": "0",
        "endtime2": "0",
        "startoff": 0,
        "endoff": 0,
        "startoff2": 0,
        "endoff2": 0,
        "offs": 0,
        "outtext1": "",
        "outtext2": "",
        "timeout": 1440,
        "sun": false,
        "mon": true,
        "tue": true,
        "wed": true,
        "thu": true,
        "fri": true,
        "sat": false,
        "jan": true,
        "feb": true,
        "mar": true,
        "apr": true,
        "may": true,
        "jun": true,
        "jul": true,
        "aug": true,
        "sep": true,
        "oct": true,
        "nov": true,
        "dec": true,
        "day1": 0,
        "month1": 0,
        "day2": 0,
        "month2": 0,
        "day3": 0,
        "month3": 0,
        "day4": 0,
        "month4": 0,
        "day5": 0,
        "month5": 0,
        "day6": 0,
        "month6": 0,
        "day7": 0,
        "month7": 0,
        "day8": 0,
        "month8": 0,
        "day9": 0,
        "month9": 0,
        "day10": 0,
        "month10": 0,
        "day11": 0,
        "month11": 0,
        "day12": 0,
        "month12": 0,
        "d1": 0,
        "w1": 0,
        "d2": 0,
        "w2": 0,
        "d3": 0,
        "w3": 0,
        "d4": 0,
        "w4": 0,
        "d5": 0,
        "w5": 0,
        "d6": 0,
        "w6": 0,
        "xday1": 0,
        "xmonth1": 0,
        "xday2": 0,
        "xmonth2": 0,
        "xday3": 0,
        "xmonth3": 0,
        "xday4": 0,
        "xmonth4": 0,
        "xday5": 0,
        "xmonth5": 0,
        "xday6": 0,
        "xmonth6": 0,
        "xday7": 0,
        "xmonth7": 0,
        "xday8": 0,
        "xmonth8": 0,
        "xday9": 0,
        "xmonth9": 0,
        "xday10": 0,
        "xmonth10": 0,
        "xday11": 0,
        "xmonth11": 0,
        "xday12": 0,
        "xmonth12": 0,
        "xd1": 0,
        "xw1": 0,
        "xd2": 0,
        "xw2": 0,
        "xd3": 0,
        "xw3": 0,
        "xd4": 0,
        "xw4": 0,
        "xd5": 0,
        "xw5": 0,
        "xd6": 0,
        "xw6": 0,
        "suspend": false,
        "random": false,
        "randon1": false,
        "randoff1": false,
        "randon2": false,
        "randoff2": false,
        "repeat": true,
        "atstart": true,
        "odd": false,
        "even": false,
        "x": 320,
        "y": 1060,
        "wires": [
            [
                "b91207c71348b1a0"
            ],
            [],
            []
        ]
    },
    {
        "id": "e9fbabbe92463f6f",
        "type": "api-call-service",
        "z": "afb0f186.cfb0d",
        "name": "Enable white background",
        "server": "8b52884a.b76658",
        "version": 7,
        "debugenabled": false,
        "action": "scene.turn_on",
        "floorId": [],
        "areaId": [],
        "deviceId": [],
        "entityId": [
            "scene.meeting"
        ],
        "labelId": [],
        "data": "",
        "dataType": "jsonata",
        "mergeContext": "",
        "mustacheAltTags": false,
        "outputProperties": [],
        "queue": "none",
        "blockInputOverrides": true,
        "domain": "scene",
        "service": "turn_on",
        "x": 1230,
        "y": 1020,
        "wires": [
            []
        ]
    },
    {
        "id": "baed99b548761938",
        "type": "api-call-service",
        "z": "afb0f186.cfb0d",
        "name": "Enable normal background",
        "server": "8b52884a.b76658",
        "version": 7,
        "debugenabled": false,
        "action": "scene.turn_on",
        "floorId": [],
        "areaId": [],
        "deviceId": [],
        "entityId": [
            "scene.ambient"
        ],
        "labelId": [],
        "data": "",
        "dataType": "jsonata",
        "mergeContext": "",
        "mustacheAltTags": false,
        "outputProperties": [],
        "queue": "none",
        "blockInputOverrides": true,
        "domain": "scene",
        "service": "turn_on",
        "x": 1240,
        "y": 1100,
        "wires": [
            []
        ]
    },
    {
        "id": "e0c3bcba76c6cc8f",
        "type": "switch",
        "z": "afb0f186.cfb0d",
        "name": "1. Scene on -> 2. Scene off",
        "property": "payload",
        "propertyType": "msg",
        "rules": [
            {
                "t": "eq",
                "v": "1",
                "vt": "num"
            },
            {
                "t": "eq",
                "v": "0",
                "vt": "num"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 2,
        "x": 960,
        "y": 1060,
        "wires": [
            [
                "e9fbabbe92463f6f"
            ],
            [
                "baed99b548761938"
            ]
        ]
    },
    {
        "id": "3c4e305494c302d7",
        "type": "api-current-state",
        "z": "afb0f186.cfb0d",
        "name": "hexa off?",
        "server": "8b52884a.b76658",
        "version": 3,
        "outputs": 2,
        "halt_if": "off",
        "halt_if_type": "str",
        "halt_if_compare": "is",
        "entity_id": "light.glide_hexa",
        "state_type": "str",
        "blockInputOverrides": false,
        "outputProperties": [
            {
                "property": "data",
                "propertyType": "msg",
                "value": "",
                "valueType": "entity"
            }
        ],
        "for": "0",
        "forType": "num",
        "forUnits": "minutes",
        "override_topic": false,
        "state_location": "payload",
        "override_payload": "msg",
        "entity_location": "data",
        "override_data": "msg",
        "x": 720,
        "y": 1060,
        "wires": [
            [],
            [
                "e0c3bcba76c6cc8f"
            ]
        ]
    },
    {
        "id": "fa0f38968fb7e244",
        "type": "inject",
        "z": "afb0f186.cfb0d",
        "name": "",
        "props": [
            {
                "p": "payload"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "off",
        "payloadType": "str",
        "x": 130,
        "y": 1100,
        "wires": [
            [
                "0f5ec4d827651734"
            ]
        ]
    },
    {
        "id": "b2014ae2e758c30d",
        "type": "inject",
        "z": "afb0f186.cfb0d",
        "name": "",
        "props": [
            {
                "p": "payload"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "on",
        "payloadType": "str",
        "x": 130,
        "y": 1060,
        "wires": [
            [
                "0f5ec4d827651734"
            ]
        ]
    },
    {
        "id": "4b14019036776ac3",
        "type": "inject",
        "z": "afb0f186.cfb0d",
        "name": "",
        "props": [
            {
                "p": "payload"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "auto",
        "payloadType": "str",
        "x": 130,
        "y": 1020,
        "wires": [
            [
                "0f5ec4d827651734"
            ]
        ]
    },
    {
        "id": "af203991a57978f9",
        "type": "time-range-switch",
        "z": "afb0f186.cfb0d",
        "name": "02:00-9am",
        "lat": "51.293768",
        "lon": "-2.491740",
        "startTime": "02:00",
        "endTime": "09:00",
        "startOffset": 0,
        "endOffset": 0,
        "x": 600,
        "y": 860,
        "wires": [
            [],
            [
                "bc36c13ee490f021",
                "a1ceebb6cd381b75"
            ]
        ]
    },
    {
        "id": "0c08982549b67008",
        "type": "api-current-state",
        "z": "afb0f186.cfb0d",
        "name": "home?",
        "server": "8b52884a.b76658",
        "version": 3,
        "outputs": 2,
        "halt_if": "home",
        "halt_if_type": "str",
        "halt_if_compare": "is_not",
        "entity_id": "sensor.anyone_home",
        "state_type": "str",
        "blockInputOverrides": false,
        "outputProperties": [
            {
                "property": "payload",
                "propertyType": "msg",
                "value": "",
                "valueType": "entityState"
            },
            {
                "property": "data",
                "propertyType": "msg",
                "value": "",
                "valueType": "entity"
            },
            {
                "property": "topic",
                "propertyType": "msg",
                "value": "",
                "valueType": "triggerId"
            }
        ],
        "for": 0,
        "forType": "num",
        "forUnits": "minutes",
        "x": 380,
        "y": 860,
        "wires": [
            [],
            [
                "af203991a57978f9"
            ]
        ]
    },
    {
        "id": "b91207c71348b1a0",
        "type": "api-current-state",
        "z": "afb0f186.cfb0d",
        "name": "enabled?",
        "server": "8b52884a.b76658",
        "version": 3,
        "outputs": 2,
        "halt_if": "on",
        "halt_if_type": "str",
        "halt_if_compare": "is",
        "entity_id": "input_boolean.auto_enable_call_lighting",
        "state_type": "str",
        "blockInputOverrides": true,
        "outputProperties": [
            {
                "property": "data",
                "propertyType": "msg",
                "value": "",
                "valueType": "entity"
            }
        ],
        "for": "0",
        "forType": "num",
        "forUnits": "minutes",
        "override_topic": false,
        "state_location": "payload",
        "override_payload": "msg",
        "entity_location": "data",
        "override_data": "msg",
        "x": 520,
        "y": 1060,
        "wires": [
            [
                "3c4e305494c302d7"
            ],
            []
        ]
    },
    {
        "id": "8ea739f308c5adfb",
        "type": "trigger-state",
        "z": "afb0f186.cfb0d",
        "name": "Wall lights -> On",
        "server": "8b52884a.b76658",
        "version": 5,
        "inputs": 0,
        "outputs": 2,
        "exposeAsEntityConfig": "",
        "entities": {
            "entity": [
                "light.lounge_wall_lights"
            ],
            "substring": [],
            "regex": []
        },
        "debugEnabled": false,
        "constraints": [
            {
                "targetType": "this_entity",
                "targetValue": "",
                "propertyType": "current_state",
                "propertyValue": "new_state.state",
                "comparatorType": "is",
                "comparatorValueDatatype": "str",
                "comparatorValue": "on"
            },
            {
                "targetType": "this_entity",
                "targetValue": "",
                "propertyType": "previous_state",
                "propertyValue": "old_state.state",
                "comparatorType": "is",
                "comparatorValueDatatype": "str",
                "comparatorValue": "off"
            }
        ],
        "customOutputs": [],
        "outputInitially": false,
        "stateType": "str",
        "enableInput": false,
        "x": 140,
        "y": 540,
        "wires": [
            [
                "246fa932fc815084"
            ],
            []
        ]
    },
    {
        "id": "246fa932fc815084",
        "type": "api-call-service",
        "z": "afb0f186.cfb0d",
        "name": "Set to Warm White",
        "server": "8b52884a.b76658",
        "version": 7,
        "debugenabled": false,
        "action": "scene.turn_on",
        "floorId": [],
        "areaId": [],
        "deviceId": [],
        "entityId": [
            "scene.wall_lights_on_white"
        ],
        "labelId": [],
        "data": "",
        "dataType": "jsonata",
        "mergeContext": "",
        "mustacheAltTags": false,
        "outputProperties": [],
        "queue": "none",
        "blockInputOverrides": true,
        "domain": "scene",
        "service": "turn_on",
        "x": 430,
        "y": 540,
        "wires": [
            []
        ]
    },
    {
        "id": "cb42db283867e042",
        "type": "comment",
        "z": "afb0f186.cfb0d",
        "name": "Kitchen",
        "info": "",
        "x": 110,
        "y": 1160,
        "wires": []
    },
    {
        "id": "a07a256e41d896f2",
        "type": "trigger-state",
        "z": "afb0f186.cfb0d",
        "name": "unoccupied -> occupied",
        "server": "8b52884a.b76658",
        "version": 5,
        "inputs": 0,
        "outputs": 2,
        "exposeAsEntityConfig": "",
        "entities": {
            "entity": [
                "binary_sensor.everything_presence_one_042214_occupancy"
            ],
            "substring": [],
            "regex": []
        },
        "debugEnabled": false,
        "constraints": [
            {
                "targetType": "this_entity",
                "targetValue": "",
                "propertyType": "current_state",
                "propertyValue": "new_state.state",
                "comparatorType": "is",
                "comparatorValueDatatype": "str",
                "comparatorValue": "on"
            },
            {
                "targetType": "this_entity",
                "targetValue": "",
                "propertyType": "previous_state",
                "propertyValue": "old_state.state",
                "comparatorType": "is",
                "comparatorValueDatatype": "str",
                "comparatorValue": "off"
            }
        ],
        "customOutputs": [],
        "outputInitially": false,
        "stateType": "str",
        "enableInput": false,
        "exposeToHomeAssistant": false,
        "haConfig": [
            {
                "property": "name",
                "value": ""
            },
            {
                "property": "icon",
                "value": ""
            }
        ],
        "x": 160,
        "y": 1220,
        "wires": [
            [
                "e7a301f368e1d25d"
            ],
            []
        ]
    },
    {
        "id": "e4729b81a4179226",
        "type": "function",
        "z": "afb0f186.cfb0d",
        "name": "turn_off",
        "func": "var action = \"light.turn_off\"\n\nmsg.payload = {\n    \"action\": action,\n}\nreturn [ msg ];\n",
        "outputs": 1,
        "timeout": "",
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 980,
        "y": 1300,
        "wires": [
            [
                "ea428e60bcd53a8d"
            ]
        ]
    },
    {
        "id": "e7a301f368e1d25d",
        "type": "api-current-state",
        "z": "afb0f186.cfb0d",
        "name": "illuminance < 5",
        "server": "8b52884a.b76658",
        "version": 3,
        "outputs": 2,
        "halt_if": "5",
        "halt_if_type": "num",
        "halt_if_compare": "lt",
        "entity_id": "sensor.everything_presence_one_042214_illuminance",
        "state_type": "str",
        "blockInputOverrides": false,
        "outputProperties": [
            {
                "property": "payload",
                "propertyType": "msg",
                "value": "",
                "valueType": "entityState"
            },
            {
                "property": "data",
                "propertyType": "msg",
                "value": "",
                "valueType": "entity"
            }
        ],
        "for": "0",
        "forType": "num",
        "forUnits": "minutes",
        "override_topic": false,
        "state_location": "payload",
        "override_payload": "msg",
        "entity_location": "data",
        "override_data": "msg",
        "x": 400,
        "y": 1220,
        "wires": [
            [
                "63020bdfb40f460f"
            ],
            []
        ]
    },
    {
        "id": "ea428e60bcd53a8d",
        "type": "api-call-service",
        "z": "afb0f186.cfb0d",
        "name": "Kitchen Group",
        "server": "8b52884a.b76658",
        "version": 7,
        "debugenabled": false,
        "action": "",
        "floorId": [],
        "areaId": [],
        "deviceId": [],
        "entityId": [
            "group.kitchen_group"
        ],
        "labelId": [],
        "data": "",
        "dataType": "json",
        "mergeContext": "",
        "mustacheAltTags": false,
        "outputProperties": [
            {
                "property": "payload",
                "propertyType": "msg",
                "value": "payload",
                "valueType": "msg"
            }
        ],
        "queue": "none",
        "blockInputOverrides": false,
        "domain": "light",
        "service": "turn_off",
        "x": 1180,
        "y": 1260,
        "wires": [
            []
        ]
    },
    {
        "id": "2a3494931e8858ce",
        "type": "function",
        "z": "afb0f186.cfb0d",
        "name": "turn_on",
        "func": "var action = \"light.turn_on\"\n\nmsg.payload = {\n    \"action\": action,\n}\nreturn [ msg ];\n",
        "outputs": 1,
        "timeout": "",
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 980,
        "y": 1220,
        "wires": [
            [
                "ea428e60bcd53a8d"
            ]
        ]
    },
    {
        "id": "cfc8d7e51d6cc6b4",
        "type": "server-state-changed",
        "z": "afb0f186.cfb0d",
        "name": "occupied -> unoccupied",
        "server": "8b52884a.b76658",
        "version": 6,
        "outputs": 2,
        "exposeAsEntityConfig": "",
        "entities": {
            "entity": [
                "binary_sensor.everything_presence_one_042214_occupancy"
            ],
            "substring": [],
            "regex": []
        },
        "outputInitially": false,
        "stateType": "str",
        "ifState": "off",
        "ifStateType": "str",
        "ifStateOperator": "is",
        "outputOnlyOnStateChange": true,
        "for": "0",
        "forType": "num",
        "forUnits": "seconds",
        "ignorePrevStateNull": true,
        "ignorePrevStateUnknown": true,
        "ignorePrevStateUnavailable": true,
        "ignoreCurrentStateUnknown": false,
        "ignoreCurrentStateUnavailable": false,
        "outputProperties": [
            {
                "property": "payload",
                "propertyType": "msg",
                "value": "",
                "valueType": "entityState"
            },
            {
                "property": "data",
                "propertyType": "msg",
                "value": "",
                "valueType": "eventData"
            },
            {
                "property": "topic",
                "propertyType": "msg",
                "value": "",
                "valueType": "triggerId"
            }
        ],
        "x": 160,
        "y": 1300,
        "wires": [
            [
                "e4729b81a4179226"
            ],
            []
        ]
    },
    {
        "id": "63020bdfb40f460f",
        "type": "api-current-state",
        "z": "afb0f186.cfb0d",
        "name": "home?",
        "server": "8b52884a.b76658",
        "version": 3,
        "outputs": 2,
        "halt_if": "home",
        "halt_if_type": "str",
        "halt_if_compare": "is_not",
        "entity_id": "sensor.anyone_home",
        "state_type": "str",
        "blockInputOverrides": false,
        "outputProperties": [
            {
                "property": "payload",
                "propertyType": "msg",
                "value": "",
                "valueType": "entityState"
            },
            {
                "property": "data",
                "propertyType": "msg",
                "value": "",
                "valueType": "entity"
            },
            {
                "property": "topic",
                "propertyType": "msg",
                "value": "",
                "valueType": "triggerId"
            }
        ],
        "for": 0,
        "forType": "num",
        "forUnits": "minutes",
        "x": 610,
        "y": 1220,
        "wires": [
            [],
            [
                "abc2c3f3a85353ee"
            ]
        ]
    },
    {
        "id": "abc2c3f3a85353ee",
        "type": "time-range-switch",
        "z": "afb0f186.cfb0d",
        "name": "02:00-9am",
        "lat": "51.293768",
        "lon": "-2.491740",
        "startTime": "02:00",
        "endTime": "09:00",
        "startOffset": 0,
        "endOffset": 0,
        "x": 790,
        "y": 1220,
        "wires": [
            [],
            [
                "2a3494931e8858ce"
            ]
        ]
    },
    {
        "id": "6842a88d9e1f9e42",
        "type": "server-state-changed",
        "z": "afb0f186.cfb0d",
        "name": "kitchen => on",
        "server": "8b52884a.b76658",
        "version": 6,
        "outputs": 2,
        "exposeAsEntityConfig": "",
        "entities": {
            "entity": [
                "light.kitchen_bottom_1",
                "light.kitchen_bottom_2",
                "light.kitchen_top_1",
                "light.kitchen_top_2"
            ],
            "substring": [],
            "regex": []
        },
        "outputInitially": true,
        "stateType": "str",
        "ifState": "on",
        "ifStateType": "str",
        "ifStateOperator": "is",
        "outputOnlyOnStateChange": true,
        "for": "0",
        "forType": "num",
        "forUnits": "minutes",
        "ignorePrevStateNull": false,
        "ignorePrevStateUnknown": false,
        "ignorePrevStateUnavailable": false,
        "ignoreCurrentStateUnknown": false,
        "ignoreCurrentStateUnavailable": false,
        "outputProperties": [
            {
                "property": "payload",
                "propertyType": "msg",
                "value": "",
                "valueType": "entityState"
            },
            {
                "property": "data",
                "propertyType": "msg",
                "value": "",
                "valueType": "eventData"
            },
            {
                "property": "topic",
                "propertyType": "msg",
                "value": "",
                "valueType": "triggerId"
            }
        ],
        "x": 130,
        "y": 1380,
        "wires": [
            [
                "cbf47b0a1b2cd6a8"
            ],
            []
        ]
    },
    {
        "id": "cbf47b0a1b2cd6a8",
        "type": "api-call-service",
        "z": "afb0f186.cfb0d",
        "name": "Turn on cupboards",
        "server": "8b52884a.b76658",
        "version": 7,
        "debugenabled": false,
        "action": "light.turn_on",
        "floorId": [],
        "areaId": [],
        "deviceId": [],
        "entityId": [
            "light.kitchen_left",
            "light.kitchen_right"
        ],
        "labelId": [],
        "data": "",
        "dataType": "jsonata",
        "mergeContext": "",
        "mustacheAltTags": false,
        "outputProperties": [],
        "queue": "none",
        "blockInputOverrides": true,
        "domain": "light",
        "service": "turn_on",
        "x": 410,
        "y": 1380,
        "wires": [
            []
        ]
    },
    {
        "id": "63d91a0ce4435845",
        "type": "server-state-changed",
        "z": "afb0f186.cfb0d",
        "name": "kitchen => off",
        "server": "8b52884a.b76658",
        "version": 6,
        "outputs": 2,
        "exposeAsEntityConfig": "",
        "entities": {
            "entity": [
                "light.kitchen_top_1",
                "light.kitchen_top_2"
            ],
            "substring": [],
            "regex": []
        },
        "outputInitially": true,
        "stateType": "str",
        "ifState": "on",
        "ifStateType": "str",
        "ifStateOperator": "is_not",
        "outputOnlyOnStateChange": true,
        "for": "0",
        "forType": "num",
        "forUnits": "minutes",
        "ignorePrevStateNull": false,
        "ignorePrevStateUnknown": false,
        "ignorePrevStateUnavailable": false,
        "ignoreCurrentStateUnknown": false,
        "ignoreCurrentStateUnavailable": false,
        "outputProperties": [
            {
                "property": "payload",
                "propertyType": "msg",
                "value": "",
                "valueType": "entityState"
            },
            {
                "property": "data",
                "propertyType": "msg",
                "value": "",
                "valueType": "eventData"
            },
            {
                "property": "topic",
                "propertyType": "msg",
                "value": "",
                "valueType": "triggerId"
            }
        ],
        "x": 130,
        "y": 1460,
        "wires": [
            [
                "a76abc4d27ebdbee"
            ],
            []
        ]
    },
    {
        "id": "a76abc4d27ebdbee",
        "type": "api-call-service",
        "z": "afb0f186.cfb0d",
        "name": "Turn off cupboards",
        "server": "8b52884a.b76658",
        "version": 7,
        "debugenabled": false,
        "action": "light.turn_off",
        "floorId": [],
        "areaId": [],
        "deviceId": [],
        "entityId": [
            "light.kitchen_left",
            "light.kitchen_right"
        ],
        "labelId": [],
        "data": "",
        "dataType": "jsonata",
        "mergeContext": "",
        "mustacheAltTags": false,
        "outputProperties": [],
        "queue": "none",
        "blockInputOverrides": true,
        "domain": "light",
        "service": "turn_off",
        "x": 410,
        "y": 1460,
        "wires": [
            []
        ]
    },
    {
        "id": "fbbd67618959ce72",
        "type": "server-state-changed",
        "z": "afb0f186.cfb0d",
        "name": "hallway motion",
        "server": "8b52884a.b76658",
        "version": 6,
        "outputs": 2,
        "exposeAsEntityConfig": "",
        "entities": {
            "entity": [
                "binary_sensor.hallway_motion_sensor_occupancy"
            ],
            "substring": [],
            "regex": []
        },
        "outputInitially": false,
        "stateType": "str",
        "ifState": "off",
        "ifStateType": "str",
        "ifStateOperator": "is",
        "outputOnlyOnStateChange": true,
        "for": 0,
        "forType": "num",
        "forUnits": "minutes",
        "ignorePrevStateNull": false,
        "ignorePrevStateUnknown": false,
        "ignorePrevStateUnavailable": false,
        "ignoreCurrentStateUnknown": false,
        "ignoreCurrentStateUnavailable": false,
        "outputProperties": [
            {
                "property": "payload",
                "propertyType": "msg",
                "value": "",
                "valueType": "entityState"
            },
            {
                "property": "data",
                "propertyType": "msg",
                "value": "",
                "valueType": "eventData"
            },
            {
                "property": "topic",
                "propertyType": "msg",
                "value": "",
                "valueType": "triggerId"
            }
        ],
        "x": 140,
        "y": 120,
        "wires": [
            [],
            [
                "30d78f0012e7ad59"
            ]
        ]
    },
    {
        "id": "18ec67cdd8f8ef62",
        "type": "api-call-service",
        "z": "afb0f186.cfb0d",
        "name": "hallway light",
        "server": "8b52884a.b76658",
        "version": 7,
        "debugenabled": false,
        "action": "",
        "floorId": [],
        "areaId": [],
        "deviceId": [],
        "entityId": [
            "light.hallway_light"
        ],
        "labelId": [],
        "data": "",
        "dataType": "json",
        "mergeContext": "",
        "mustacheAltTags": false,
        "outputProperties": [
            {
                "property": "payload",
                "propertyType": "msg",
                "value": "",
                "valueType": "data"
            }
        ],
        "queue": "none",
        "blockInputOverrides": false,
        "domain": "light",
        "service": "turn_on",
        "x": 1270,
        "y": 120,
        "wires": [
            []
        ]
    },
    {
        "id": "a36287ac55bfdec7",
        "type": "trigger",
        "z": "afb0f186.cfb0d",
        "name": "",
        "op1": "{\"action\":\"light.turn_on\"}",
        "op2": "{\"action\":\"light.turn_off\"}",
        "op1type": "json",
        "op2type": "json",
        "duration": "60",
        "extend": true,
        "overrideDelay": false,
        "units": "s",
        "reset": "",
        "bytopic": "all",
        "topic": "topic",
        "outputs": 2,
        "x": 1030,
        "y": 120,
        "wires": [
            [
                "18ec67cdd8f8ef62"
            ],
            [
                "18ec67cdd8f8ef62"
            ]
        ]
    },
    {
        "id": "56201e012813590b",
        "type": "light-scheduler-filter",
        "z": "afb0f186.cfb0d",
        "settings": "f26da246.74a7f",
        "events": "[{\"start\":{\"dow\":1,\"mod\":0},\"end\":{\"dow\":2,\"mod\":0}},{\"start\":{\"dow\":2,\"mod\":0},\"end\":{\"dow\":3,\"mod\":0}},{\"start\":{\"dow\":3,\"mod\":0},\"end\":{\"dow\":4,\"mod\":0}},{\"start\":{\"dow\":4,\"mod\":0},\"end\":{\"dow\":5,\"mod\":0}},{\"start\":{\"dow\":5,\"mod\":0},\"end\":{\"dow\":6,\"mod\":0}},{\"start\":{\"dow\":6,\"mod\":0},\"end\":{\"dow\":0,\"mod\":0}},{\"start\":{\"dow\":0,\"mod\":0},\"end\":{\"dow\":1,\"mod\":1315}}]",
        "name": "dark? (filter)",
        "onlyWhenDark": true,
        "scheduleRndMax": 0,
        "sunElevationThreshold": "6",
        "sunShowElevationInStatus": true,
        "x": 590,
        "y": 120,
        "wires": [
            [
                "19897b73b8809d71"
            ],
            []
        ]
    },
    {
        "id": "30d78f0012e7ad59",
        "type": "api-current-state",
        "z": "afb0f186.cfb0d",
        "name": "hallway lights off?",
        "server": "8b52884a.b76658",
        "version": 3,
        "outputs": 2,
        "halt_if": "on",
        "halt_if_type": "str",
        "halt_if_compare": "is",
        "entity_id": "light.hallway_light",
        "state_type": "str",
        "blockInputOverrides": false,
        "outputProperties": [
            {
                "property": "payload",
                "propertyType": "msg",
                "value": "",
                "valueType": "entityState"
            },
            {
                "property": "data",
                "propertyType": "msg",
                "value": "",
                "valueType": "entity"
            },
            {
                "property": "topic",
                "propertyType": "msg",
                "value": "",
                "valueType": "triggerId"
            }
        ],
        "for": 0,
        "forType": "num",
        "forUnits": "minutes",
        "x": 370,
        "y": 120,
        "wires": [
            [],
            [
                "56201e012813590b"
            ]
        ]
    },
    {
        "id": "19897b73b8809d71",
        "type": "time-range-switch",
        "z": "afb0f186.cfb0d",
        "name": "02:00-9am",
        "lat": "51.293768",
        "lon": "-2.491740",
        "startTime": "02:00",
        "endTime": "09:00",
        "startOffset": 0,
        "endOffset": 0,
        "x": 810,
        "y": 120,
        "wires": [
            [],
            [
                "a36287ac55bfdec7"
            ]
        ]
    },
    {
        "id": "544091c02efc2067",
        "type": "light-scheduler-filter",
        "z": "afb0f186.cfb0d",
        "settings": "f26da246.74a7f",
        "events": "[{\"start\":{\"dow\":1,\"mod\":0},\"end\":{\"dow\":2,\"mod\":0}},{\"start\":{\"dow\":2,\"mod\":0},\"end\":{\"dow\":3,\"mod\":0}},{\"start\":{\"dow\":3,\"mod\":0},\"end\":{\"dow\":4,\"mod\":0}},{\"start\":{\"dow\":4,\"mod\":0},\"end\":{\"dow\":5,\"mod\":0}},{\"start\":{\"dow\":5,\"mod\":0},\"end\":{\"dow\":6,\"mod\":0}},{\"start\":{\"dow\":6,\"mod\":0},\"end\":{\"dow\":0,\"mod\":0}},{\"start\":{\"dow\":0,\"mod\":0},\"end\":{\"dow\":1,\"mod\":1315}}]",
        "name": "dark? (filter)",
        "onlyWhenDark": true,
        "scheduleRndMax": 0,
        "sunElevationThreshold": "6",
        "sunShowElevationInStatus": true,
        "x": 590,
        "y": 180,
        "wires": [
            [
                "05988d7c31fa6a56"
            ],
            []
        ]
    },
    {
        "id": "59b79a64e7f57ba7",
        "type": "api-current-state",
        "z": "afb0f186.cfb0d",
        "name": "lounge lights off?",
        "server": "8b52884a.b76658",
        "version": 3,
        "outputs": 2,
        "halt_if": "on",
        "halt_if_type": "str",
        "halt_if_compare": "is",
        "entity_id": "light.lounge_light",
        "state_type": "str",
        "blockInputOverrides": false,
        "outputProperties": [
            {
                "property": "payload",
                "propertyType": "msg",
                "value": "",
                "valueType": "entityState"
            },
            {
                "property": "data",
                "propertyType": "msg",
                "value": "",
                "valueType": "entity"
            },
            {
                "property": "topic",
                "propertyType": "msg",
                "value": "",
                "valueType": "triggerId"
            }
        ],
        "for": 0,
        "forType": "num",
        "forUnits": "minutes",
        "x": 370,
        "y": 180,
        "wires": [
            [],
            [
                "544091c02efc2067"
            ]
        ]
    },
    {
        "id": "6a380189dbea5c57",
        "type": "comment",
        "z": "afb0f186.cfb0d",
        "name": "Routines",
        "info": "",
        "x": 120,
        "y": 1760,
        "wires": []
    },
    {
        "id": "7d0471d079fc624d",
        "type": "server-state-changed",
        "z": "afb0f186.cfb0d",
        "name": "pixel charging",
        "server": "8b52884a.b76658",
        "version": 6,
        "outputs": 2,
        "exposeAsEntityConfig": "",
        "entities": {
            "entity": [
                "binary_sensor.pixel_7a_is_charging"
            ],
            "substring": [],
            "regex": []
        },
        "outputInitially": false,
        "stateType": "str",
        "ifState": "on",
        "ifStateType": "str",
        "ifStateOperator": "is",
        "outputOnlyOnStateChange": true,
        "for": "0",
        "forType": "num",
        "forUnits": "minutes",
        "ignorePrevStateNull": true,
        "ignorePrevStateUnknown": true,
        "ignorePrevStateUnavailable": true,
        "ignoreCurrentStateUnknown": false,
        "ignoreCurrentStateUnavailable": false,
        "outputProperties": [
            {
                "property": "payload",
                "propertyType": "msg",
                "value": "",
                "valueType": "entityState"
            },
            {
                "property": "topic",
                "propertyType": "msg",
                "value": "",
                "valueType": "triggerId"
            }
        ],
        "x": 130,
        "y": 1820,
        "wires": [
            [
                "b07a4225f1062486"
            ],
            []
        ]
    },
    {
        "id": "b07a4225f1062486",
        "type": "time-range-switch",
        "z": "afb0f186.cfb0d",
        "name": "11pm-6am",
        "lat": "51.293768",
        "lon": "-2.491740",
        "startTime": "23:00",
        "endTime": "06:00",
        "startOffset": 0,
        "endOffset": 0,
        "x": 330,
        "y": 1820,
        "wires": [
            [
                "f5578ef037e66b02"
            ],
            []
        ]
    },
    {
        "id": "91b74c3a8e467d13",
        "type": "api-call-service",
        "z": "afb0f186.cfb0d",
        "name": "bedtime routine",
        "server": "8b52884a.b76658",
        "version": 7,
        "debugenabled": false,
        "action": "media_player.play_media",
        "floorId": [],
        "areaId": [],
        "deviceId": [],
        "entityId": [
            "media_player.bedroom_echo"
        ],
        "labelId": [],
        "data": "{\"media_content_type\":\"routine\",\"media_content_id\":\"bed time\"}",
        "dataType": "json",
        "mergeContext": "",
        "mustacheAltTags": false,
        "outputProperties": [
            {
                "property": "payload",
                "propertyType": "msg",
                "value": "",
                "valueType": "data"
            }
        ],
        "queue": "none",
        "blockInputOverrides": true,
        "domain": "media_player",
        "service": "play_media",
        "x": 800,
        "y": 1820,
        "wires": [
            []
        ]
    },
    {
        "id": "f5578ef037e66b02",
        "type": "api-current-state",
        "z": "afb0f186.cfb0d",
        "name": "russell home?",
        "server": "8b52884a.b76658",
        "version": 3,
        "outputs": 2,
        "halt_if": "False",
        "halt_if_type": "str",
        "halt_if_compare": "is",
        "entity_id": "sensor.russell_home_status",
        "state_type": "str",
        "blockInputOverrides": false,
        "outputProperties": [
            {
                "property": "payload",
                "propertyType": "msg",
                "value": "",
                "valueType": "entityState"
            },
            {
                "property": "data",
                "propertyType": "msg",
                "value": "",
                "valueType": "entity"
            },
            {
                "property": "topic",
                "propertyType": "msg",
                "value": "",
                "valueType": "triggerId"
            }
        ],
        "for": 0,
        "forType": "num",
        "forUnits": "minutes",
        "x": 580,
        "y": 1820,
        "wires": [
            [],
            [
                "91b74c3a8e467d13"
            ]
        ]
    },
    {
        "id": "4cb8e4b220039a61",
        "type": "api-call-service",
        "z": "afb0f186.cfb0d",
        "name": "Decking Light",
        "server": "8b52884a.b76658",
        "version": 7,
        "debugenabled": false,
        "action": "",
        "floorId": [],
        "areaId": [],
        "deviceId": [],
        "entityId": [
            "light.garden_light"
        ],
        "labelId": [],
        "data": "",
        "dataType": "jsonata",
        "mergeContext": "",
        "mustacheAltTags": false,
        "outputProperties": [
            {
                "property": "payload",
                "propertyType": "msg",
                "value": "payload",
                "valueType": "msg"
            }
        ],
        "queue": "none",
        "blockInputOverrides": false,
        "domain": "light",
        "service": "turn_on",
        "x": 800,
        "y": 300,
        "wires": [
            []
        ]
    },
    {
        "id": "be134a2187368252",
        "type": "light-scheduler",
        "z": "afb0f186.cfb0d",
        "settings": "f26da246.74a7f",
        "events": "[{\"start\":{\"dow\":6,\"mod\":540},\"end\":{\"dow\":6,\"mod\":1380}},{\"start\":{\"dow\":1,\"mod\":540},\"end\":{\"dow\":1,\"mod\":1380}},{\"start\":{\"dow\":2,\"mod\":540},\"end\":{\"dow\":2,\"mod\":1380}},{\"start\":{\"dow\":3,\"mod\":540},\"end\":{\"dow\":3,\"mod\":1380}},{\"start\":{\"dow\":4,\"mod\":540},\"end\":{\"dow\":4,\"mod\":1380}},{\"start\":{\"dow\":5,\"mod\":540},\"end\":{\"dow\":5,\"mod\":1380}},{\"start\":{\"dow\":0,\"mod\":540},\"end\":{\"dow\":0,\"mod\":1380}}]",
        "topic": "",
        "name": "dark?",
        "onPayload": "{\"action\": \"light.turn_on\"}",
        "onPayloadType": "json",
        "offPayload": "{\"action\": \"light.turn_off\"}",
        "offPayloadType": "json",
        "onlyWhenDark": true,
        "scheduleRndMax": 0,
        "sunElevationThreshold": 6,
        "sunShowElevationInStatus": false,
        "outputfreq": "output.statechange.startup",
        "x": 570,
        "y": 300,
        "wires": [
            [
                "4cb8e4b220039a61"
            ]
        ]
    },
    {
        "id": "fba191b3528158d3",
        "type": "comment",
        "z": "afb0f186.cfb0d",
        "name": "Garden",
        "info": "",
        "x": 570,
        "y": 260,
        "wires": []
    },
    {
        "id": "05988d7c31fa6a56",
        "type": "link out",
        "z": "afb0f186.cfb0d",
        "name": "link out 1",
        "mode": "link",
        "links": [
            "c59f8d92028a5d4c"
        ],
        "x": 715,
        "y": 180,
        "wires": []
    },
    {
        "id": "c59f8d92028a5d4c",
        "type": "link in",
        "z": "afb0f186.cfb0d",
        "name": "link in 1",
        "links": [
            "05988d7c31fa6a56"
        ],
        "x": 275,
        "y": 500,
        "wires": [
            [
                "246fa932fc815084"
            ]
        ]
    },
    {
        "id": "a4e9a08774b5f904",
        "type": "api-current-state",
        "z": "afb0f186.cfb0d",
        "name": "home?",
        "server": "8b52884a.b76658",
        "version": 3,
        "outputs": 2,
        "halt_if": "home",
        "halt_if_type": "str",
        "halt_if_compare": "is_not",
        "entity_id": "sensor.anyone_home",
        "state_type": "str",
        "blockInputOverrides": false,
        "outputProperties": [
            {
                "property": "payload",
                "propertyType": "msg",
                "value": "",
                "valueType": "entityState"
            },
            {
                "property": "data",
                "propertyType": "msg",
                "value": "",
                "valueType": "entity"
            },
            {
                "property": "topic",
                "propertyType": "msg",
                "value": "",
                "valueType": "triggerId"
            }
        ],
        "for": 0,
        "forType": "num",
        "forUnits": "minutes",
        "x": 610,
        "y": 700,
        "wires": [
            [],
            [
                "3a20c09f99eb06f8"
            ]
        ]
    },
    {
        "id": "71832b48049d504b",
        "type": "comment",
        "z": "afb0f186.cfb0d",
        "name": "Security light",
        "info": "",
        "x": 130,
        "y": 380,
        "wires": []
    },
    {
        "id": "6d367913e0308ba9",
        "type": "api-call-service",
        "z": "afb0f186.cfb0d",
        "name": "lounge lamp",
        "server": "8b52884a.b76658",
        "version": 7,
        "debugenabled": false,
        "action": "",
        "floorId": [],
        "areaId": [],
        "deviceId": [],
        "entityId": [
            "light.lounge_light"
        ],
        "labelId": [],
        "data": "",
        "dataType": "jsonata",
        "mergeContext": "",
        "mustacheAltTags": false,
        "outputProperties": [],
        "queue": "none",
        "blockInputOverrides": false,
        "domain": "",
        "service": "",
        "x": 510,
        "y": 420,
        "wires": [
            []
        ]
    },
    {
        "id": "d91202f41b3c1696",
        "type": "change",
        "z": "afb0f186.cfb0d",
        "name": "household",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "household bin",
                "tot": "str"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 330,
        "y": 1600,
        "wires": [
            [
                "49620fe597046cdb"
            ]
        ]
    },
    {
        "id": "8f10bf20fa4f02e1",
        "type": "change",
        "z": "afb0f186.cfb0d",
        "name": "garden",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "garden waste",
                "tot": "str"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 320,
        "y": 1680,
        "wires": [
            [
                "49620fe597046cdb"
            ]
        ]
    },
    {
        "id": "361dc94cadb6200d",
        "type": "api-call-service",
        "z": "afb0f186.cfb0d",
        "name": "rain sounds",
        "server": "8b52884a.b76658",
        "version": 7,
        "debugenabled": false,
        "action": "media_player.play_media",
        "floorId": [],
        "areaId": [],
        "deviceId": [],
        "entityId": [
            "media_player.office_echo"
        ],
        "labelId": [],
        "data": "{\"media_content_type\":\"skill\",\"media_content_id\":\"amzn1.ask.skill.89bb8c9b-6f47-4f93-9a40-7c572ade7ea3\"}",
        "dataType": "json",
        "mergeContext": "",
        "mustacheAltTags": false,
        "outputProperties": [
            {
                "property": "payload",
                "propertyType": "msg",
                "value": "",
                "valueType": "data"
            }
        ],
        "queue": "none",
        "blockInputOverrides": true,
        "domain": "media_player",
        "service": "play_media",
        "x": 330,
        "y": 1900,
        "wires": [
            []
        ]
    },
    {
        "id": "b82483786ea1d7ac",
        "type": "inject",
        "z": "afb0f186.cfb0d",
        "name": "",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "",
        "payloadType": "date",
        "x": 140,
        "y": 1900,
        "wires": [
            [
                "361dc94cadb6200d"
            ]
        ]
    },
    {
        "id": "4dc09f17ec5909f3",
        "type": "api-call-service",
        "z": "afb0f186.cfb0d",
        "name": "stop",
        "server": "8b52884a.b76658",
        "version": 7,
        "debugenabled": false,
        "action": "media_player.media_stop",
        "floorId": [],
        "areaId": [],
        "deviceId": [],
        "entityId": [
            "media_player.office_echo"
        ],
        "labelId": [],
        "data": "",
        "dataType": "json",
        "mergeContext": "",
        "mustacheAltTags": false,
        "outputProperties": [
            {
                "property": "payload",
                "propertyType": "msg",
                "value": "",
                "valueType": "data"
            }
        ],
        "queue": "none",
        "blockInputOverrides": true,
        "domain": "media_player",
        "service": "media_stop",
        "x": 310,
        "y": 1960,
        "wires": [
            []
        ]
    },
    {
        "id": "acb5dd2c57158bb2",
        "type": "inject",
        "z": "afb0f186.cfb0d",
        "name": "",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "",
        "payloadType": "date",
        "x": 140,
        "y": 1960,
        "wires": [
            [
                "4dc09f17ec5909f3"
            ]
        ]
    },
    {
        "id": "bf32148190399df8",
        "type": "switch",
        "z": "afb0f186.cfb0d",
        "name": "1. playing => 2. paused => 3. stopped",
        "property": "payload",
        "propertyType": "msg",
        "rules": [
            {
                "t": "eq",
                "v": "playing",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "paused",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "stopped",
                "vt": "str"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 3,
        "x": 990,
        "y": 540,
        "wires": [
            [
                "3e4674b9a3d86e4d"
            ],
            [
                "bd15c4ccc56c8597"
            ],
            [
                "bd15c4ccc56c8597"
            ]
        ]
    },
    {
        "id": "2448d2a6cd0a2234",
        "type": "api-call-service",
        "z": "afb0f186.cfb0d",
        "name": "Reduce brightness",
        "server": "8b52884a.b76658",
        "version": 7,
        "debugenabled": false,
        "action": "light.turn_on",
        "floorId": [],
        "areaId": [],
        "deviceId": [],
        "entityId": [
            "light.lounge_wall_lights"
        ],
        "labelId": [],
        "data": "{\"brightness_pct\":30}",
        "dataType": "jsonata",
        "mergeContext": "",
        "mustacheAltTags": false,
        "outputProperties": [],
        "queue": "none",
        "blockInputOverrides": true,
        "domain": "light",
        "service": "turn_on",
        "x": 1510,
        "y": 500,
        "wires": [
            [
                "2f2afe4ebadaf169"
            ]
        ]
    },
    {
        "id": "826d5f2474cc3f13",
        "type": "api-call-service",
        "z": "afb0f186.cfb0d",
        "name": "Increase brightness",
        "server": "8b52884a.b76658",
        "version": 7,
        "debugenabled": false,
        "action": "light.turn_on",
        "floorId": [],
        "areaId": [],
        "deviceId": [],
        "entityId": [
            "light.lounge_wall_lights"
        ],
        "labelId": [],
        "data": "{\"brightness_pct\":65}",
        "dataType": "jsonata",
        "mergeContext": "",
        "mustacheAltTags": false,
        "outputProperties": [],
        "queue": "none",
        "blockInputOverrides": true,
        "domain": "light",
        "service": "turn_on",
        "x": 1510,
        "y": 560,
        "wires": [
            [
                "9d9b9cfc58cb8795"
            ]
        ]
    },
    {
        "id": "3e4674b9a3d86e4d",
        "type": "api-current-state",
        "z": "afb0f186.cfb0d",
        "name": "wall lights on?",
        "server": "8b52884a.b76658",
        "version": 3,
        "outputs": 2,
        "halt_if": "on",
        "halt_if_type": "str",
        "halt_if_compare": "is",
        "entity_id": "light.lounge_wall_lights",
        "state_type": "str",
        "blockInputOverrides": false,
        "outputProperties": [
            {
                "property": "payload",
                "propertyType": "msg",
                "value": "",
                "valueType": "entityState"
            },
            {
                "property": "data",
                "propertyType": "msg",
                "value": "",
                "valueType": "entity"
            },
            {
                "property": "topic",
                "propertyType": "msg",
                "value": "",
                "valueType": "triggerId"
            }
        ],
        "for": 0,
        "forType": "num",
        "forUnits": "minutes",
        "x": 1300,
        "y": 500,
        "wires": [
            [
                "2448d2a6cd0a2234"
            ],
            []
        ]
    },
    {
        "id": "bd15c4ccc56c8597",
        "type": "api-current-state",
        "z": "afb0f186.cfb0d",
        "name": "wall lights on?",
        "server": "8b52884a.b76658",
        "version": 3,
        "outputs": 2,
        "halt_if": "on",
        "halt_if_type": "str",
        "halt_if_compare": "is",
        "entity_id": "light.lounge_wall_lights",
        "state_type": "str",
        "blockInputOverrides": false,
        "outputProperties": [
            {
                "property": "payload",
                "propertyType": "msg",
                "value": "",
                "valueType": "entityState"
            },
            {
                "property": "data",
                "propertyType": "msg",
                "value": "",
                "valueType": "entity"
            },
            {
                "property": "topic",
                "propertyType": "msg",
                "value": "",
                "valueType": "triggerId"
            }
        ],
        "for": 0,
        "forType": "num",
        "forUnits": "minutes",
        "x": 1300,
        "y": 560,
        "wires": [
            [
                "826d5f2474cc3f13"
            ],
            []
        ]
    },
    {
        "id": "2f2afe4ebadaf169",
        "type": "api-call-service",
        "z": "afb0f186.cfb0d",
        "name": "lamp off",
        "server": "8b52884a.b76658",
        "version": 7,
        "debugenabled": false,
        "action": "light.turn_off",
        "floorId": [],
        "areaId": [],
        "deviceId": [],
        "entityId": [
            "light.lounge_light"
        ],
        "labelId": [],
        "data": "",
        "dataType": "jsonata",
        "mergeContext": "",
        "mustacheAltTags": false,
        "outputProperties": [],
        "queue": "none",
        "blockInputOverrides": false,
        "domain": "light",
        "service": "turn_off",
        "x": 1720,
        "y": 500,
        "wires": [
            []
        ]
    },
    {
        "id": "9d9b9cfc58cb8795",
        "type": "api-call-service",
        "z": "afb0f186.cfb0d",
        "name": "lamp on",
        "server": "8b52884a.b76658",
        "version": 7,
        "debugenabled": false,
        "action": "light.turn_on",
        "floorId": [],
        "areaId": [],
        "deviceId": [],
        "entityId": [
            "light.lounge_light"
        ],
        "labelId": [],
        "data": "",
        "dataType": "jsonata",
        "mergeContext": "",
        "mustacheAltTags": false,
        "outputProperties": [],
        "queue": "none",
        "blockInputOverrides": false,
        "domain": "light",
        "service": "turn_on",
        "x": 1720,
        "y": 560,
        "wires": [
            []
        ]
    },
    {
        "id": "a3b9f6c92b47935b",
        "type": "rbe",
        "z": "afb0f186.cfb0d",
        "name": "",
        "func": "rbe",
        "gap": "",
        "start": "",
        "inout": "out",
        "septopics": true,
        "property": "payload",
        "topi": "topic",
        "x": 770,
        "y": 540,
        "wires": [
            [
                "bf32148190399df8"
            ]
        ]
    },
    {
        "id": "773f00f39635d835",
        "type": "plex-ws-playing",
        "z": "afb0f186.cfb0d",
        "name": "Lounge",
        "server": "06a202b01db68d7e",
        "allowUpdates": false,
        "filters": [
            {
                "idx": 0,
                "key": "Player.local",
                "operator": "eq",
                "value": "true",
                "valueType": "str"
            },
            {
                "idx": 1,
                "key": "Player.title",
                "operator": "eq",
                "value": "SHIELD Android TV",
                "valueType": "str"
            }
        ],
        "x": 630,
        "y": 540,
        "wires": [
            [
                "a3b9f6c92b47935b"
            ]
        ]
    },
    {
        "id": "d841ce2f97c502f8",
        "type": "trigger-state",
        "z": "cf24db3435ba68ad",
        "name": "Toggle schedules",
        "server": "8b52884a.b76658",
        "version": 5,
        "inputs": 0,
        "outputs": 2,
        "exposeAsEntityConfig": "",
        "entities": {
            "entity": [
                "input_boolean.enable_heating_schedules"
            ],
            "substring": [],
            "regex": []
        },
        "debugEnabled": false,
        "constraints": [
            {
                "targetType": "this_entity",
                "targetValue": "",
                "propertyType": "current_state",
                "propertyValue": "new_state.state",
                "comparatorType": "is",
                "comparatorValueDatatype": "str",
                "comparatorValue": "off"
            },
            {
                "targetType": "this_entity",
                "targetValue": "",
                "propertyType": "previous_state",
                "propertyValue": "old_state.state",
                "comparatorType": "is",
                "comparatorValueDatatype": "str",
                "comparatorValue": "on"
            }
        ],
        "customOutputs": [],
        "outputInitially": false,
        "stateType": "str",
        "enableInput": false,
        "exposeToHomeAssistant": false,
        "haConfig": [
            {
                "property": "name",
                "value": ""
            },
            {
                "property": "icon",
                "value": ""
            }
        ],
        "x": 140,
        "y": 180,
        "wires": [
            [
                "4aed068020384b78"
            ],
            [
                "2447d1c9ace3b941"
            ]
        ]
    },
    {
        "id": "4aed068020384b78",
        "type": "api-call-service",
        "z": "cf24db3435ba68ad",
        "name": "Disable schedules",
        "server": "8b52884a.b76658",
        "version": 7,
        "debugenabled": false,
        "action": "switch.turn_off",
        "floorId": [],
        "areaId": [],
        "deviceId": [],
        "entityId": [
            "switch.schedule_weekday",
            "switch.schedule_weekend"
        ],
        "labelId": [],
        "data": "",
        "dataType": "json",
        "mergeContext": "",
        "mustacheAltTags": false,
        "outputProperties": [
            {
                "property": "payload",
                "propertyType": "msg",
                "value": "",
                "valueType": "data"
            }
        ],
        "queue": "none",
        "blockInputOverrides": false,
        "domain": "switch",
        "service": "turn_off",
        "x": 590,
        "y": 100,
        "wires": [
            [
                "7ec8e0266c2aa99d"
            ]
        ]
    },
    {
        "id": "2447d1c9ace3b941",
        "type": "api-call-service",
        "z": "cf24db3435ba68ad",
        "name": "Enable schedules",
        "server": "8b52884a.b76658",
        "version": 7,
        "debugenabled": false,
        "action": "switch.turn_on",
        "floorId": [],
        "areaId": [],
        "deviceId": [],
        "entityId": [
            "switch.schedule_weekday",
            "switch.schedule_weekend"
        ],
        "labelId": [],
        "data": "",
        "dataType": "json",
        "mergeContext": "",
        "mustacheAltTags": false,
        "outputProperties": [],
        "queue": "none",
        "blockInputOverrides": false,
        "domain": "switch",
        "service": "turn_on",
        "x": 590,
        "y": 240,
        "wires": [
            [
                "424007945ad5ab08",
                "e7a3956752206bc2"
            ]
        ]
    },
    {
        "id": "424007945ad5ab08",
        "type": "api-call-service",
        "z": "cf24db3435ba68ad",
        "name": "Run Weekday schedule",
        "server": "8b52884a.b76658",
        "version": 7,
        "debugenabled": false,
        "action": "scheduler.run_action",
        "floorId": [],
        "areaId": [],
        "deviceId": [],
        "entityId": [],
        "labelId": [],
        "data": "{\"entity_id\":\"switch.schedule_weekday\"}",
        "dataType": "json",
        "mergeContext": "",
        "mustacheAltTags": false,
        "outputProperties": [],
        "queue": "none",
        "blockInputOverrides": false,
        "domain": "scheduler",
        "service": "run_action",
        "x": 910,
        "y": 220,
        "wires": [
            []
        ]
    },
    {
        "id": "ce29b54fee8ac32e",
        "type": "trigger-state",
        "z": "cf24db3435ba68ad",
        "name": "home -> not_home",
        "server": "8b52884a.b76658",
        "version": 5,
        "inputs": 1,
        "outputs": 2,
        "exposeAsEntityConfig": "",
        "entities": {
            "entity": [
                "sensor.anyone_home"
            ],
            "substring": [],
            "regex": []
        },
        "debugEnabled": false,
        "constraints": [
            {
                "targetType": "this_entity",
                "targetValue": "",
                "propertyType": "current_state",
                "propertyValue": "new_state.state",
                "comparatorType": "is",
                "comparatorValueDatatype": "str",
                "comparatorValue": "not_home"
            },
            {
                "targetType": "this_entity",
                "targetValue": "",
                "propertyType": "previous_state",
                "propertyValue": "old_state.state",
                "comparatorType": "is",
                "comparatorValueDatatype": "str",
                "comparatorValue": "home"
            }
        ],
        "customOutputs": [],
        "outputInitially": false,
        "stateType": "str",
        "enableInput": true,
        "exposeToHomeAssistant": false,
        "haConfig": [
            {
                "property": "name",
                "value": ""
            },
            {
                "property": "icon",
                "value": ""
            }
        ],
        "x": 150,
        "y": 80,
        "wires": [
            [
                "bd1afed023a81c58"
            ],
            []
        ]
    },
    {
        "id": "1b39e02438a1c605",
        "type": "trigger-state",
        "z": "cf24db3435ba68ad",
        "name": "not_home -> home",
        "server": "8b52884a.b76658",
        "version": 5,
        "inputs": 1,
        "outputs": 2,
        "exposeAsEntityConfig": "",
        "entities": {
            "entity": [
                "sensor.anyone_home"
            ],
            "substring": [],
            "regex": []
        },
        "debugEnabled": false,
        "constraints": [
            {
                "targetType": "this_entity",
                "targetValue": "",
                "propertyType": "current_state",
                "propertyValue": "new_state.state",
                "comparatorType": "is",
                "comparatorValueDatatype": "str",
                "comparatorValue": "home"
            },
            {
                "targetType": "this_entity",
                "targetValue": "",
                "propertyType": "previous_state",
                "propertyValue": "old_state.state",
                "comparatorType": "is",
                "comparatorValueDatatype": "str",
                "comparatorValue": "not_home"
            }
        ],
        "customOutputs": [],
        "outputInitially": false,
        "stateType": "str",
        "enableInput": true,
        "exposeToHomeAssistant": false,
        "haConfig": [
            {
                "property": "name",
                "value": ""
            },
            {
                "property": "icon",
                "value": ""
            }
        ],
        "x": 150,
        "y": 280,
        "wires": [
            [
                "dde8862116e0100f"
            ],
            []
        ]
    },
    {
        "id": "066749878081405d",
        "type": "comment",
        "z": "cf24db3435ba68ad",
        "d": true,
        "name": "Aircon",
        "info": "",
        "x": 110,
        "y": 420,
        "wires": []
    },
    {
        "id": "a3258b5588c62c7c",
        "type": "trigger-state",
        "z": "cf24db3435ba68ad",
        "d": true,
        "name": "off -> auto",
        "server": "8b52884a.b76658",
        "version": 5,
        "inputs": 1,
        "outputs": 2,
        "exposeAsEntityConfig": "",
        "entities": {
            "entity": [
                "climate.midea_ac_42880953513406_2"
            ],
            "substring": [],
            "regex": []
        },
        "debugEnabled": false,
        "constraints": [
            {
                "targetType": "this_entity",
                "targetValue": "",
                "propertyType": "current_state",
                "propertyValue": "new_state.state",
                "comparatorType": "is",
                "comparatorValueDatatype": "str",
                "comparatorValue": "auto"
            },
            {
                "targetType": "this_entity",
                "targetValue": "",
                "propertyType": "previous_state",
                "propertyValue": "old_state.state",
                "comparatorType": "is",
                "comparatorValueDatatype": "str",
                "comparatorValue": "off"
            }
        ],
        "customOutputs": [],
        "outputInitially": false,
        "stateType": "str",
        "enableInput": true,
        "exposeToHomeAssistant": false,
        "haConfig": [
            {
                "property": "name",
                "value": ""
            },
            {
                "property": "icon",
                "value": ""
            }
        ],
        "x": 120,
        "y": 500,
        "wires": [
            [
                "f0c9108db605c58f"
            ],
            []
        ]
    },
    {
        "id": "be27bd4df8ea1392",
        "type": "api-call-service",
        "z": "cf24db3435ba68ad",
        "d": true,
        "name": "Enable swing mode",
        "server": "8b52884a.b76658",
        "version": 7,
        "debugenabled": false,
        "action": "climate.set_swing_mode",
        "floorId": [],
        "areaId": [],
        "deviceId": [],
        "entityId": [
            "climate.midea_ac_42880953513406_2"
        ],
        "labelId": [],
        "data": "{\"swing_mode\":\"Vertical\"}",
        "dataType": "jsonata",
        "mergeContext": "",
        "mustacheAltTags": false,
        "outputProperties": [],
        "queue": "none",
        "blockInputOverrides": false,
        "domain": "climate",
        "service": "set_swing_mode",
        "x": 570,
        "y": 500,
        "wires": [
            []
        ]
    },
    {
        "id": "77cb539139b1e947",
        "type": "api-current-state",
        "z": "cf24db3435ba68ad",
        "d": true,
        "name": "run?",
        "server": "8b52884a.b76658",
        "version": 3,
        "outputs": 2,
        "halt_if": "on",
        "halt_if_type": "str",
        "halt_if_compare": "is",
        "entity_id": "input_boolean.auto_set_aircon_mode",
        "state_type": "str",
        "blockInputOverrides": false,
        "outputProperties": [
            {
                "property": "payload",
                "propertyType": "msg",
                "value": "",
                "valueType": "entityState"
            },
            {
                "property": "data",
                "propertyType": "msg",
                "value": "",
                "valueType": "entity"
            },
            {
                "property": "topic",
                "propertyType": "msg",
                "value": "",
                "valueType": "triggerId"
            }
        ],
        "for": 0,
        "forType": "num",
        "forUnits": "minutes",
        "x": 390,
        "y": 640,
        "wires": [
            [
                "0d6f721153f28d46"
            ],
            []
        ]
    },
    {
        "id": "f0c9108db605c58f",
        "type": "api-current-state",
        "z": "cf24db3435ba68ad",
        "d": true,
        "name": "run?",
        "server": "8b52884a.b76658",
        "version": 3,
        "outputs": 2,
        "halt_if": "on",
        "halt_if_type": "str",
        "halt_if_compare": "is",
        "entity_id": "input_boolean.auto_enable_aircon_swing_mode",
        "state_type": "str",
        "blockInputOverrides": false,
        "outputProperties": [
            {
                "property": "payload",
                "propertyType": "msg",
                "value": "",
                "valueType": "entityState"
            },
            {
                "property": "data",
                "propertyType": "msg",
                "value": "",
                "valueType": "entity"
            },
            {
                "property": "topic",
                "propertyType": "msg",
                "value": "",
                "valueType": "triggerId"
            }
        ],
        "for": 0,
        "forType": "num",
        "forUnits": "minutes",
        "x": 350,
        "y": 500,
        "wires": [
            [
                "be27bd4df8ea1392"
            ],
            []
        ]
    },
    {
        "id": "cdd7e2012c671703",
        "type": "trigger-state",
        "z": "cf24db3435ba68ad",
        "d": true,
        "name": "off -> cool",
        "server": "8b52884a.b76658",
        "version": 5,
        "inputs": 1,
        "outputs": 2,
        "exposeAsEntityConfig": "",
        "entities": {
            "entity": [
                "climate.midea_ac_42880953513406_2"
            ],
            "substring": [],
            "regex": []
        },
        "debugEnabled": false,
        "constraints": [
            {
                "targetType": "this_entity",
                "targetValue": "",
                "propertyType": "current_state",
                "propertyValue": "new_state.state",
                "comparatorType": "is",
                "comparatorValueDatatype": "str",
                "comparatorValue": "cool"
            },
            {
                "targetType": "this_entity",
                "targetValue": "",
                "propertyType": "previous_state",
                "propertyValue": "old_state.state",
                "comparatorType": "is",
                "comparatorValueDatatype": "str",
                "comparatorValue": "off"
            }
        ],
        "customOutputs": [],
        "outputInitially": false,
        "stateType": "str",
        "enableInput": true,
        "exposeToHomeAssistant": false,
        "haConfig": [
            {
                "property": "name",
                "value": ""
            },
            {
                "property": "icon",
                "value": ""
            }
        ],
        "x": 120,
        "y": 560,
        "wires": [
            [
                "f0c9108db605c58f"
            ],
            []
        ]
    },
    {
        "id": "bd1afed023a81c58",
        "type": "api-current-state",
        "z": "cf24db3435ba68ad",
        "name": "run?",
        "server": "8b52884a.b76658",
        "version": 3,
        "outputs": 2,
        "halt_if": "on",
        "halt_if_type": "str",
        "halt_if_compare": "is",
        "entity_id": "input_boolean.heating_schedule_away",
        "state_type": "str",
        "blockInputOverrides": false,
        "outputProperties": [
            {
                "property": "payload",
                "propertyType": "msg",
                "value": "",
                "valueType": "entityState"
            },
            {
                "property": "data",
                "propertyType": "msg",
                "value": "",
                "valueType": "entity"
            },
            {
                "property": "topic",
                "propertyType": "msg",
                "value": "",
                "valueType": "triggerId"
            }
        ],
        "for": 0,
        "forType": "num",
        "forUnits": "minutes",
        "x": 350,
        "y": 80,
        "wires": [
            [
                "4aed068020384b78"
            ],
            []
        ]
    },
    {
        "id": "dde8862116e0100f",
        "type": "api-current-state",
        "z": "cf24db3435ba68ad",
        "name": "run?",
        "server": "8b52884a.b76658",
        "version": 3,
        "outputs": 2,
        "halt_if": "on",
        "halt_if_type": "str",
        "halt_if_compare": "is",
        "entity_id": "input_boolean.heating_schedule_away",
        "state_type": "str",
        "blockInputOverrides": false,
        "outputProperties": [
            {
                "property": "payload",
                "propertyType": "msg",
                "value": "",
                "valueType": "entityState"
            },
            {
                "property": "data",
                "propertyType": "msg",
                "value": "",
                "valueType": "entity"
            },
            {
                "property": "topic",
                "propertyType": "msg",
                "value": "",
                "valueType": "triggerId"
            }
        ],
        "for": 0,
        "forType": "num",
        "forUnits": "minutes",
        "x": 350,
        "y": 280,
        "wires": [
            [
                "2447d1c9ace3b941"
            ],
            []
        ]
    },
    {
        "id": "789faa8144a6a6d9",
        "type": "trigger-state",
        "z": "cf24db3435ba68ad",
        "d": true,
        "name": "unoccupied -> occupied",
        "server": "8b52884a.b76658",
        "version": 5,
        "inputs": 0,
        "outputs": 2,
        "exposeAsEntityConfig": "",
        "entities": {
            "entity": [
                "binary_sensor.office_occupancy"
            ],
            "substring": [],
            "regex": []
        },
        "debugEnabled": false,
        "constraints": [
            {
                "targetType": "this_entity",
                "targetValue": "",
                "propertyType": "current_state",
                "propertyValue": "new_state.state",
                "comparatorType": "is",
                "comparatorValueDatatype": "str",
                "comparatorValue": "on"
            },
            {
                "targetType": "this_entity",
                "targetValue": "",
                "propertyType": "previous_state",
                "propertyValue": "old_state.state",
                "comparatorType": "is",
                "comparatorValueDatatype": "str",
                "comparatorValue": "off"
            }
        ],
        "customOutputs": [],
        "outputInitially": false,
        "stateType": "str",
        "enableInput": false,
        "exposeToHomeAssistant": false,
        "haConfig": [
            {
                "property": "name",
                "value": ""
            },
            {
                "property": "icon",
                "value": ""
            }
        ],
        "x": 160,
        "y": 640,
        "wires": [
            [
                "77cb539139b1e947"
            ],
            []
        ]
    },
    {
        "id": "7d5b2888c68e0320",
        "type": "trigger-state",
        "z": "cf24db3435ba68ad",
        "d": true,
        "name": "occupied -> unoccupied",
        "server": "8b52884a.b76658",
        "version": 5,
        "inputs": 0,
        "outputs": 2,
        "exposeAsEntityConfig": "",
        "entities": {
            "entity": [
                "binary_sensor.office_occupancy"
            ],
            "substring": [],
            "regex": []
        },
        "debugEnabled": false,
        "constraints": [
            {
                "targetType": "this_entity",
                "targetValue": "",
                "propertyType": "current_state",
                "propertyValue": "new_state.state",
                "comparatorType": "is",
                "comparatorValueDatatype": "str",
                "comparatorValue": "off"
            },
            {
                "targetType": "this_entity",
                "targetValue": "",
                "propertyType": "previous_state",
                "propertyValue": "old_state.state",
                "comparatorType": "is",
                "comparatorValueDatatype": "str",
                "comparatorValue": "on"
            }
        ],
        "customOutputs": [],
        "outputInitially": false,
        "stateType": "str",
        "enableInput": false,
        "exposeToHomeAssistant": false,
        "haConfig": [
            {
                "property": "name",
                "value": ""
            },
            {
                "property": "icon",
                "value": ""
            }
        ],
        "x": 160,
        "y": 700,
        "wires": [
            [
                "f9edfad88e5fc1c2"
            ],
            []
        ]
    },
    {
        "id": "0d6f721153f28d46",
        "type": "api-current-state",
        "z": "cf24db3435ba68ad",
        "d": true,
        "name": "fan mode",
        "server": "8b52884a.b76658",
        "version": 3,
        "outputs": 2,
        "halt_if": "fan_only",
        "halt_if_type": "str",
        "halt_if_compare": "is",
        "entity_id": "climate.midea_ac_42880953513406_2",
        "state_type": "str",
        "blockInputOverrides": false,
        "outputProperties": [
            {
                "property": "payload",
                "propertyType": "msg",
                "value": "",
                "valueType": "entityState"
            },
            {
                "property": "data",
                "propertyType": "msg",
                "value": "",
                "valueType": "entity"
            }
        ],
        "for": "0",
        "forType": "num",
        "forUnits": "minutes",
        "override_topic": false,
        "state_location": "payload",
        "override_payload": "msg",
        "entity_location": "data",
        "override_data": "msg",
        "x": 620,
        "y": 640,
        "wires": [
            [
                "f96177401fdd7f7f"
            ],
            []
        ]
    },
    {
        "id": "7cced1da5dab434e",
        "type": "api-call-service",
        "z": "cf24db3435ba68ad",
        "d": true,
        "name": "Set mode",
        "server": "8b52884a.b76658",
        "version": 7,
        "debugenabled": false,
        "action": "climate.set_hvac_mode",
        "floorId": [],
        "areaId": [],
        "deviceId": [],
        "entityId": [
            "climate.midea_ac_42880953513406_2"
        ],
        "labelId": [],
        "data": "",
        "dataType": "jsonata",
        "mergeContext": "",
        "mustacheAltTags": false,
        "outputProperties": [],
        "queue": "none",
        "blockInputOverrides": false,
        "domain": "climate",
        "service": "set_hvac_mode",
        "x": 1020,
        "y": 640,
        "wires": [
            []
        ]
    },
    {
        "id": "c0b3c0530fced4db",
        "type": "api-current-state",
        "z": "cf24db3435ba68ad",
        "d": true,
        "name": "cool mode",
        "server": "8b52884a.b76658",
        "version": 3,
        "outputs": 2,
        "halt_if": "cool",
        "halt_if_type": "str",
        "halt_if_compare": "is",
        "entity_id": "climate.midea_ac_42880953513406_2",
        "state_type": "str",
        "blockInputOverrides": false,
        "outputProperties": [
            {
                "property": "payload",
                "propertyType": "msg",
                "value": "",
                "valueType": "entityState"
            },
            {
                "property": "data",
                "propertyType": "msg",
                "value": "",
                "valueType": "entity"
            }
        ],
        "for": "0",
        "forType": "num",
        "forUnits": "minutes",
        "override_topic": false,
        "state_location": "payload",
        "override_payload": "msg",
        "entity_location": "data",
        "override_data": "msg",
        "x": 630,
        "y": 700,
        "wires": [
            [
                "d1259e05b00b447a"
            ],
            []
        ]
    },
    {
        "id": "d1259e05b00b447a",
        "type": "function",
        "z": "cf24db3435ba68ad",
        "d": true,
        "name": "fan_only",
        "func": "var hvac = \"fan_only\"\n\nmsg.payload = { data:{\"hvac_mode\": hvac }}\nreturn [ msg ];\n",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 840,
        "y": 700,
        "wires": [
            [
                "7cced1da5dab434e"
            ]
        ]
    },
    {
        "id": "f96177401fdd7f7f",
        "type": "function",
        "z": "cf24db3435ba68ad",
        "d": true,
        "name": "cool",
        "func": "var hvac = \"cool\"\n\nmsg.payload = { data:{\"hvac_mode\": hvac }}\nreturn [ msg ];\n",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 830,
        "y": 640,
        "wires": [
            [
                "7cced1da5dab434e"
            ]
        ]
    },
    {
        "id": "f9edfad88e5fc1c2",
        "type": "api-current-state",
        "z": "cf24db3435ba68ad",
        "d": true,
        "name": "run?",
        "server": "8b52884a.b76658",
        "version": 3,
        "outputs": 2,
        "halt_if": "on",
        "halt_if_type": "str",
        "halt_if_compare": "is",
        "entity_id": "input_boolean.auto_set_aircon_mode",
        "state_type": "str",
        "blockInputOverrides": false,
        "outputProperties": [
            {
                "property": "payload",
                "propertyType": "msg",
                "value": "",
                "valueType": "entityState"
            },
            {
                "property": "data",
                "propertyType": "msg",
                "value": "",
                "valueType": "entity"
            },
            {
                "property": "topic",
                "propertyType": "msg",
                "value": "",
                "valueType": "triggerId"
            }
        ],
        "for": 0,
        "forType": "num",
        "forUnits": "minutes",
        "x": 390,
        "y": 700,
        "wires": [
            [
                "c0b3c0530fced4db"
            ],
            []
        ]
    },
    {
        "id": "076fb63d73d6fa3c",
        "type": "comment",
        "z": "cf24db3435ba68ad",
        "name": "Hive",
        "info": "",
        "x": 110,
        "y": 20,
        "wires": []
    },
    {
        "id": "e7a3956752206bc2",
        "type": "api-call-service",
        "z": "cf24db3435ba68ad",
        "name": "Run Weekend schedule",
        "server": "8b52884a.b76658",
        "version": 7,
        "debugenabled": false,
        "action": "scheduler.run_action",
        "floorId": [],
        "areaId": [],
        "deviceId": [],
        "entityId": [],
        "labelId": [],
        "data": "{\"entity_id\":\"switch.schedule_weekend\"}",
        "dataType": "json",
        "mergeContext": "",
        "mustacheAltTags": false,
        "outputProperties": [],
        "queue": "none",
        "blockInputOverrides": false,
        "domain": "scheduler",
        "service": "run_action",
        "x": 910,
        "y": 280,
        "wires": [
            []
        ]
    },
    {
        "id": "7fe79f7de8931c66",
        "type": "mqtt out",
        "z": "cf24db3435ba68ad",
        "name": "",
        "topic": "zigbee2mqtt/Hive Receiver/set",
        "qos": "",
        "retain": "",
        "respTopic": "",
        "contentType": "",
        "userProps": "",
        "correl": "",
        "expiry": "",
        "broker": "649859a4.a17818",
        "x": 1690,
        "y": 100,
        "wires": []
    },
    {
        "id": "7ec8e0266c2aa99d",
        "type": "template",
        "z": "cf24db3435ba68ad",
        "name": "Set heating mode to OFF",
        "field": "payload",
        "fieldType": "msg",
        "format": "json",
        "syntax": "mustache",
        "template": "{\n    \"system_mode_heat\": \"off\",\n    \"temperature_setpoint_hold_heat\": 0\n}",
        "output": "str",
        "x": 910,
        "y": 100,
        "wires": [
            [
                "7fe79f7de8931c66",
                "76f04810f8e99fe6"
            ]
        ]
    },
    {
        "id": "67bc7133f23fd51c",
        "type": "inject",
        "z": "cf24db3435ba68ad",
        "name": "",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "",
        "payloadType": "date",
        "x": 1140,
        "y": 160,
        "wires": [
            [
                "379e2926901a187a"
            ]
        ]
    },
    {
        "id": "379e2926901a187a",
        "type": "template",
        "z": "cf24db3435ba68ad",
        "name": "Set heating mode to ON",
        "field": "payload",
        "fieldType": "msg",
        "format": "json",
        "syntax": "mustache",
        "template": "{\n    \"system_mode\": \"heat\",\n    \"temperature_setpoint_hold_heat\": 1,\n    \"occupied_heating_setpoint_heat\": 20\n}",
        "output": "str",
        "x": 1350,
        "y": 160,
        "wires": [
            [
                "7fe79f7de8931c66"
            ]
        ]
    },
    {
        "id": "76f04810f8e99fe6",
        "type": "delay",
        "z": "cf24db3435ba68ad",
        "name": "",
        "pauseType": "delay",
        "timeout": "0.5",
        "timeoutUnits": "seconds",
        "rate": "1",
        "nbRateUnits": "1",
        "rateUnits": "second",
        "randomFirst": "1",
        "randomLast": "5",
        "randomUnits": "seconds",
        "drop": false,
        "allowrate": false,
        "outputs": 1,
        "x": 1170,
        "y": 40,
        "wires": [
            [
                "f6539d3e06185755"
            ]
        ]
    },
    {
        "id": "f6539d3e06185755",
        "type": "template",
        "z": "cf24db3435ba68ad",
        "name": "Frost prevention",
        "field": "payload",
        "fieldType": "msg",
        "format": "json",
        "syntax": "mustache",
        "template": "{\n    \"occupied_heating_setpoint_heat\": 12,\n    \"temperature_setpoint_hold_duration_heat\": 65535,\n    \"temperature_setpoint_hold_heat\": 1\n}",
        "output": "str",
        "x": 1360,
        "y": 40,
        "wires": [
            [
                "7fe79f7de8931c66"
            ]
        ]
    },
    {
        "id": "24e58e6b.442df2",
        "type": "bigtimer",
        "z": "4aedf9e8.044e08",
        "outtopic": "",
        "outpayload1": "1",
        "outpayload2": "",
        "name": "6am every day",
        "comment": "",
        "lat": "51.32063880734896",
        "lon": "-2.2089664938383327",
        "starttime": "360",
        "endtime": "375",
        "starttime2": "0",
        "endtime2": "0",
        "startoff": "0",
        "endoff": "0",
        "startoff2": "",
        "endoff2": "",
        "offs": 0,
        "outtext1": "",
        "outtext2": "",
        "timeout": 1440,
        "sun": true,
        "mon": true,
        "tue": true,
        "wed": true,
        "thu": true,
        "fri": true,
        "sat": true,
        "jan": true,
        "feb": true,
        "mar": true,
        "apr": true,
        "may": true,
        "jun": true,
        "jul": true,
        "aug": true,
        "sep": true,
        "oct": true,
        "nov": true,
        "dec": true,
        "day1": 0,
        "month1": 0,
        "day2": 0,
        "month2": 0,
        "day3": 0,
        "month3": 0,
        "day4": 0,
        "month4": 0,
        "day5": 0,
        "month5": 0,
        "day6": 0,
        "month6": 0,
        "day7": "",
        "month7": "",
        "day8": "",
        "month8": "",
        "day9": "",
        "month9": "",
        "day10": "",
        "month10": "",
        "day11": "",
        "month11": "",
        "day12": "",
        "month12": "",
        "d1": 0,
        "w1": 0,
        "d2": 0,
        "w2": 0,
        "d3": 0,
        "w3": 0,
        "d4": 0,
        "w4": 0,
        "d5": 0,
        "w5": 0,
        "d6": 0,
        "w6": 0,
        "xday1": 0,
        "xmonth1": 0,
        "xday2": 0,
        "xmonth2": 0,
        "xday3": 0,
        "xmonth3": 0,
        "xday4": 0,
        "xmonth4": 0,
        "xday5": 0,
        "xmonth5": 0,
        "xday6": 0,
        "xmonth6": 0,
        "xday7": "",
        "xmonth7": "",
        "xday8": "",
        "xmonth8": "",
        "xday9": "",
        "xmonth9": "",
        "xday10": "",
        "xmonth10": "",
        "xday11": "",
        "xmonth11": "",
        "xday12": "",
        "xmonth12": "",
        "xd1": 0,
        "xw1": 0,
        "xd2": 0,
        "xw2": 0,
        "xd3": 0,
        "xw3": 0,
        "xd4": 0,
        "xw4": 0,
        "xd5": 0,
        "xw5": 0,
        "xd6": 0,
        "xw6": 0,
        "suspend": false,
        "random": false,
        "randon1": false,
        "randoff1": false,
        "randon2": false,
        "randoff2": false,
        "repeat": false,
        "atstart": true,
        "odd": false,
        "even": false,
        "x": 120,
        "y": 420,
        "wires": [
            [
                "b15d162c.105c28"
            ],
            [],
            []
        ]
    },
    {
        "id": "73c30e71.e8d46",
        "type": "api-current-state",
        "z": "4aedf9e8.044e08",
        "name": "home?",
        "server": "8b52884a.b76658",
        "version": 3,
        "outputs": 2,
        "halt_if": "home",
        "halt_if_type": "str",
        "halt_if_compare": "is_not",
        "entity_id": "sensor.anyone_home",
        "state_type": "str",
        "blockInputOverrides": false,
        "outputProperties": [
            {
                "property": "payload",
                "propertyType": "msg",
                "value": "",
                "valueType": "entityState"
            },
            {
                "property": "data",
                "propertyType": "msg",
                "value": "",
                "valueType": "entity"
            },
            {
                "property": "topic",
                "propertyType": "msg",
                "value": "",
                "valueType": "triggerId"
            }
        ],
        "for": 0,
        "forType": "num",
        "forUnits": "minutes",
        "x": 530,
        "y": 420,
        "wires": [
            [],
            [
                "f36487b8.7e8c48"
            ]
        ]
    },
    {
        "id": "d6646d02.af28b",
        "type": "inject",
        "z": "4aedf9e8.044e08",
        "name": "force-run",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payloadType": "date",
        "x": 120,
        "y": 500,
        "wires": [
            [
                "7f300b61.5a4044"
            ]
        ]
    },
    {
        "id": "8d782ee4.3daf1",
        "type": "api-current-state",
        "z": "4aedf9e8.044e08",
        "name": "alarm disarmed?",
        "server": "8b52884a.b76658",
        "version": 3,
        "outputs": 2,
        "halt_if": "disarmed",
        "halt_if_type": "str",
        "halt_if_compare": "is_not",
        "entity_id": "alarm_control_panel.alarm_panel",
        "state_type": "str",
        "blockInputOverrides": false,
        "outputProperties": [
            {
                "property": "payload",
                "propertyType": "msg",
                "value": "",
                "valueType": "entityState"
            },
            {
                "property": "data",
                "propertyType": "msg",
                "value": "",
                "valueType": "entity"
            },
            {
                "property": "topic",
                "propertyType": "msg",
                "value": "",
                "valueType": "triggerId"
            }
        ],
        "for": 0,
        "forType": "num",
        "forUnits": "minutes",
        "x": 830,
        "y": 140,
        "wires": [
            [],
            [
                "03f68328699a88c3"
            ]
        ]
    },
    {
        "id": "f36487b8.7e8c48",
        "type": "api-current-state",
        "z": "4aedf9e8.044e08",
        "name": "alarm disarmed?",
        "server": "8b52884a.b76658",
        "version": 3,
        "outputs": 2,
        "halt_if": "disarmed",
        "halt_if_type": "str",
        "halt_if_compare": "is",
        "entity_id": "alarm_control_panel.alarm_panel",
        "state_type": "str",
        "blockInputOverrides": false,
        "outputProperties": [
            {
                "property": "payload",
                "propertyType": "msg",
                "value": "",
                "valueType": "entityState"
            },
            {
                "property": "data",
                "propertyType": "msg",
                "value": "",
                "valueType": "entity"
            },
            {
                "property": "topic",
                "propertyType": "msg",
                "value": "",
                "valueType": "triggerId"
            }
        ],
        "for": 0,
        "forType": "num",
        "forUnits": "minutes",
        "x": 570,
        "y": 560,
        "wires": [
            [],
            [
                "81c2d258.033ce"
            ]
        ]
    },
    {
        "id": "cd1caa8c.300358",
        "type": "api-current-state",
        "z": "4aedf9e8.044e08",
        "name": "run?",
        "server": "8b52884a.b76658",
        "version": 3,
        "outputs": 2,
        "halt_if": "on",
        "halt_if_type": "str",
        "halt_if_compare": "is_not",
        "entity_id": "input_boolean.auto_arm_disarm_alarm_night",
        "state_type": "str",
        "blockInputOverrides": false,
        "outputProperties": [
            {
                "property": "payload",
                "propertyType": "msg",
                "value": "",
                "valueType": "entityState"
            },
            {
                "property": "data",
                "propertyType": "msg",
                "value": "",
                "valueType": "entity"
            },
            {
                "property": "topic",
                "propertyType": "msg",
                "value": "",
                "valueType": "triggerId"
            }
        ],
        "for": 0,
        "forType": "num",
        "forUnits": "minutes",
        "x": 470,
        "y": 140,
        "wires": [
            [],
            [
                "0c9a7af0b87001f7"
            ]
        ]
    },
    {
        "id": "b15d162c.105c28",
        "type": "api-current-state",
        "z": "4aedf9e8.044e08",
        "name": "run?",
        "server": "8b52884a.b76658",
        "version": 3,
        "outputs": 2,
        "halt_if": "on",
        "halt_if_type": "str",
        "halt_if_compare": "is_not",
        "entity_id": "input_boolean.auto_arm_disarm_alarm_night",
        "state_type": "str",
        "blockInputOverrides": false,
        "outputProperties": [
            {
                "property": "payload",
                "propertyType": "msg",
                "value": "",
                "valueType": "entityState"
            },
            {
                "property": "data",
                "propertyType": "msg",
                "value": "",
                "valueType": "entity"
            },
            {
                "property": "topic",
                "propertyType": "msg",
                "value": "",
                "valueType": "triggerId"
            }
        ],
        "for": 0,
        "forType": "num",
        "forUnits": "minutes",
        "x": 350,
        "y": 420,
        "wires": [
            [],
            [
                "73c30e71.e8d46"
            ]
        ]
    },
    {
        "id": "1104f7d2.7a2938",
        "type": "function",
        "z": "4aedf9e8.044e08",
        "name": "Alarm Android msg",
        "func": "var action = msg.payload\n\nvar category = \"alarm\"\nvar title = \"Alarm System\"\nvar message = \"Alarm is now \" + action\n\n\nmsg.payload = {\n    \"data\": {\n        message,\n        title,\n        data: {\n            push: {\n                category: category\n            }\n        }\n    }\n}\nreturn [ msg ];\n",
        "outputs": 1,
        "timeout": "",
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 810,
        "y": 680,
        "wires": [
            [
                "2e21fe95824d7621"
            ]
        ]
    },
    {
        "id": "aeafe637.1aeaf8",
        "type": "api-call-service",
        "z": "4aedf9e8.044e08",
        "name": "notify Russell android",
        "server": "8b52884a.b76658",
        "version": 7,
        "debugenabled": false,
        "action": "notify.mobile_app_pixel_7a",
        "floorId": [],
        "areaId": [],
        "deviceId": [],
        "entityId": [],
        "labelId": [],
        "data": "",
        "dataType": "json",
        "mergeContext": "",
        "mustacheAltTags": false,
        "outputProperties": [
            {
                "property": "payload",
                "propertyType": "msg",
                "value": "",
                "valueType": "data"
            }
        ],
        "queue": "none",
        "blockInputOverrides": false,
        "domain": "notify",
        "service": "mobile_app_pixel_7a",
        "x": 1420,
        "y": 680,
        "wires": [
            []
        ]
    },
    {
        "id": "3700839b.3d543c",
        "type": "server-state-changed",
        "z": "4aedf9e8.044e08",
        "name": "Alarm Triggered",
        "server": "8b52884a.b76658",
        "version": 6,
        "outputs": 2,
        "exposeAsEntityConfig": "",
        "entities": {
            "entity": [],
            "substring": [
                "alarm_control_panel.alarm_panel"
            ],
            "regex": []
        },
        "outputInitially": false,
        "stateType": "str",
        "ifState": "triggered",
        "ifStateType": "str",
        "ifStateOperator": "is_not",
        "outputOnlyOnStateChange": false,
        "for": "",
        "forType": "num",
        "forUnits": "minutes",
        "ignorePrevStateNull": false,
        "ignorePrevStateUnknown": false,
        "ignorePrevStateUnavailable": false,
        "ignoreCurrentStateUnknown": false,
        "ignoreCurrentStateUnavailable": false,
        "outputProperties": [
            {
                "property": "payload",
                "propertyType": "msg",
                "value": "",
                "valueType": "entityState"
            },
            {
                "property": "data",
                "propertyType": "msg",
                "value": "",
                "valueType": "eventData"
            },
            {
                "property": "topic",
                "propertyType": "msg",
                "value": "",
                "valueType": "triggerId"
            }
        ],
        "x": 120,
        "y": 840,
        "wires": [
            [],
            [
                "cca292a3.05942"
            ]
        ]
    },
    {
        "id": "71941591.c8558c",
        "type": "trigger-state",
        "z": "4aedf9e8.044e08",
        "name": "home -> not_home",
        "server": "8b52884a.b76658",
        "version": 5,
        "inputs": 1,
        "outputs": 2,
        "exposeAsEntityConfig": "",
        "entities": {
            "entity": [
                "sensor.anyone_home"
            ],
            "substring": [],
            "regex": []
        },
        "debugEnabled": false,
        "constraints": [
            {
                "targetType": "this_entity",
                "targetValue": "",
                "propertyType": "current_state",
                "comparatorType": "is",
                "comparatorValueDatatype": "str",
                "comparatorValue": "not_home",
                "propertyValue": "new_state.state"
            },
            {
                "targetType": "this_entity",
                "targetValue": "",
                "propertyType": "previous_state",
                "comparatorType": "is",
                "comparatorValueDatatype": "str",
                "comparatorValue": "home",
                "propertyValue": "old_state.state"
            }
        ],
        "customOutputs": [],
        "outputInitially": false,
        "stateType": "str",
        "enableInput": true,
        "exposeToHomeAssistant": false,
        "haConfig": [
            {
                "property": "name",
                "value": ""
            },
            {
                "property": "icon",
                "value": ""
            }
        ],
        "x": 130,
        "y": 240,
        "wires": [
            [
                "ccda8ca7.269df"
            ],
            []
        ]
    },
    {
        "id": "ccda8ca7.269df",
        "type": "api-current-state",
        "z": "4aedf9e8.044e08",
        "name": "run?",
        "server": "8b52884a.b76658",
        "version": 3,
        "outputs": 2,
        "halt_if": "on",
        "halt_if_type": "str",
        "halt_if_compare": "is_not",
        "entity_id": "input_boolean.auto_arm_alarm_when_gone",
        "state_type": "str",
        "blockInputOverrides": false,
        "outputProperties": [
            {
                "property": "payload",
                "propertyType": "msg",
                "value": "",
                "valueType": "entityState"
            },
            {
                "property": "data",
                "propertyType": "msg",
                "value": "",
                "valueType": "entity"
            },
            {
                "property": "topic",
                "propertyType": "msg",
                "value": "",
                "valueType": "triggerId"
            }
        ],
        "for": 0,
        "forType": "num",
        "forUnits": "minutes",
        "x": 350,
        "y": 240,
        "wires": [
            [],
            [
                "892a8bfd.69c738"
            ]
        ]
    },
    {
        "id": "892a8bfd.69c738",
        "type": "credentials",
        "z": "4aedf9e8.044e08",
        "name": "alarm code",
        "props": [
            {
                "value": "alarm_code",
                "type": "msg"
            }
        ],
        "x": 550,
        "y": 240,
        "wires": [
            [
                "c901e347.7a1dc"
            ]
        ]
    },
    {
        "id": "c901e347.7a1dc",
        "type": "api-call-service",
        "z": "4aedf9e8.044e08",
        "name": "arm alarm away",
        "server": "8b52884a.b76658",
        "version": 7,
        "debugenabled": false,
        "action": "alarm_control_panel.alarm_arm_away",
        "floorId": [],
        "areaId": [],
        "deviceId": [],
        "entityId": [
            "alarm_control_panel.alarm_panel"
        ],
        "labelId": [],
        "data": "{\"code\":\"{{ alarm_code }}\"}",
        "dataType": "json",
        "mergeContext": "",
        "mustacheAltTags": false,
        "outputProperties": [
            {
                "property": "payload",
                "propertyType": "msg",
                "value": "",
                "valueType": "data"
            }
        ],
        "queue": "none",
        "blockInputOverrides": false,
        "domain": "alarm_control_panel",
        "service": "alarm_arm_away",
        "x": 740,
        "y": 240,
        "wires": [
            []
        ]
    },
    {
        "id": "d530f3f1.e8195",
        "type": "trigger-state",
        "z": "4aedf9e8.044e08",
        "name": "not_home -> home",
        "server": "8b52884a.b76658",
        "version": 5,
        "inputs": 1,
        "outputs": 2,
        "exposeAsEntityConfig": "",
        "entities": {
            "entity": [
                "sensor.anyone_home"
            ],
            "substring": [],
            "regex": []
        },
        "debugEnabled": false,
        "constraints": [
            {
                "targetType": "this_entity",
                "targetValue": "",
                "propertyType": "current_state",
                "propertyValue": "new_state.state",
                "comparatorType": "is",
                "comparatorValueDatatype": "str",
                "comparatorValue": "home"
            },
            {
                "targetType": "this_entity",
                "targetValue": "",
                "propertyType": "previous_state",
                "propertyValue": "old_state.state",
                "comparatorType": "is",
                "comparatorValueDatatype": "str",
                "comparatorValue": "not_home"
            }
        ],
        "customOutputs": [],
        "outputInitially": false,
        "stateType": "str",
        "enableInput": true,
        "exposeToHomeAssistant": false,
        "haConfig": [
            {
                "property": "name",
                "value": ""
            },
            {
                "property": "icon",
                "value": ""
            }
        ],
        "x": 130,
        "y": 560,
        "wires": [
            [
                "7f300b61.5a4044"
            ],
            []
        ]
    },
    {
        "id": "7f300b61.5a4044",
        "type": "api-current-state",
        "z": "4aedf9e8.044e08",
        "name": "run?",
        "server": "8b52884a.b76658",
        "version": 3,
        "outputs": 2,
        "halt_if": "on",
        "halt_if_type": "str",
        "halt_if_compare": "is_not",
        "entity_id": "input_boolean.auto_disarm_alarm_when_home",
        "state_type": "str",
        "blockInputOverrides": false,
        "outputProperties": [
            {
                "property": "payload",
                "propertyType": "msg",
                "value": "",
                "valueType": "entityState"
            },
            {
                "property": "data",
                "propertyType": "msg",
                "value": "",
                "valueType": "entity"
            },
            {
                "property": "topic",
                "propertyType": "msg",
                "value": "",
                "valueType": "triggerId"
            }
        ],
        "for": 0,
        "forType": "num",
        "forUnits": "minutes",
        "x": 330,
        "y": 560,
        "wires": [
            [],
            [
                "f36487b8.7e8c48"
            ]
        ]
    },
    {
        "id": "81c2d258.033ce",
        "type": "credentials",
        "z": "4aedf9e8.044e08",
        "name": "alarm code",
        "props": [
            {
                "value": "alarm_code",
                "type": "msg"
            }
        ],
        "x": 810,
        "y": 560,
        "wires": [
            [
                "d837e04d.b2546"
            ]
        ]
    },
    {
        "id": "d837e04d.b2546",
        "type": "api-call-service",
        "z": "4aedf9e8.044e08",
        "name": "disarm alarm",
        "server": "8b52884a.b76658",
        "version": 7,
        "debugenabled": false,
        "action": "alarm_control_panel.alarm_disarm",
        "floorId": [],
        "areaId": [],
        "deviceId": [],
        "entityId": [
            "alarm_control_panel.alarm_panel"
        ],
        "labelId": [],
        "data": "{\"code\":\"{{ alarm_code }}\"}",
        "dataType": "json",
        "mergeContext": "",
        "mustacheAltTags": false,
        "outputProperties": [
            {
                "property": "payload",
                "propertyType": "msg",
                "value": "",
                "valueType": "data"
            }
        ],
        "queue": "none",
        "blockInputOverrides": false,
        "domain": "alarm_control_panel",
        "service": "alarm_disarm",
        "x": 1030,
        "y": 560,
        "wires": [
            []
        ]
    },
    {
        "id": "3d0081db.06ffce",
        "type": "api-current-state",
        "z": "4aedf9e8.044e08",
        "name": "run?",
        "server": "8b52884a.b76658",
        "version": 3,
        "outputs": 2,
        "halt_if": "on",
        "halt_if_type": "str",
        "halt_if_compare": "is_not",
        "entity_id": "input_boolean.notify_alarm_armed",
        "state_type": "str",
        "blockInputOverrides": false,
        "outputProperties": [
            {
                "property": "payload",
                "propertyType": "msg",
                "value": "",
                "valueType": "entityState"
            },
            {
                "property": "data",
                "propertyType": "msg",
                "value": "",
                "valueType": "entity"
            },
            {
                "property": "topic",
                "propertyType": "msg",
                "value": "",
                "valueType": "triggerId"
            }
        ],
        "for": 0,
        "forType": "num",
        "forUnits": "minutes",
        "x": 330,
        "y": 680,
        "wires": [
            [],
            [
                "fe046407.ab0868"
            ]
        ]
    },
    {
        "id": "7c85f3a.d00500c",
        "type": "api-current-state",
        "z": "4aedf9e8.044e08",
        "name": "run?",
        "server": "8b52884a.b76658",
        "version": 3,
        "outputs": 2,
        "halt_if": "on",
        "halt_if_type": "str",
        "halt_if_compare": "is_not",
        "entity_id": "input_boolean.notify_alarm_disarmed",
        "state_type": "str",
        "blockInputOverrides": false,
        "outputProperties": [
            {
                "property": "payload",
                "propertyType": "msg",
                "value": "",
                "valueType": "entityState"
            },
            {
                "property": "data",
                "propertyType": "msg",
                "value": "",
                "valueType": "entity"
            },
            {
                "property": "topic",
                "propertyType": "msg",
                "value": "",
                "valueType": "triggerId"
            }
        ],
        "for": 0,
        "forType": "num",
        "forUnits": "minutes",
        "x": 330,
        "y": 760,
        "wires": [
            [],
            [
                "fe046407.ab0868",
                "c28e839a592e1ad9"
            ]
        ]
    },
    {
        "id": "cca292a3.05942",
        "type": "api-current-state",
        "z": "4aedf9e8.044e08",
        "name": "run?",
        "server": "8b52884a.b76658",
        "version": 3,
        "outputs": 2,
        "halt_if": "on",
        "halt_if_type": "str",
        "halt_if_compare": "is_not",
        "entity_id": "input_boolean.notify_alarm_triggered",
        "state_type": "str",
        "blockInputOverrides": false,
        "outputProperties": [
            {
                "property": "payload",
                "propertyType": "msg",
                "value": "",
                "valueType": "entityState"
            },
            {
                "property": "data",
                "propertyType": "msg",
                "value": "",
                "valueType": "entity"
            },
            {
                "property": "topic",
                "propertyType": "msg",
                "value": "",
                "valueType": "triggerId"
            }
        ],
        "for": 0,
        "forType": "num",
        "forUnits": "minutes",
        "x": 330,
        "y": 840,
        "wires": [
            [],
            [
                "8af4ba1c.44a458",
                "c7a9e7a495ed59d3"
            ]
        ]
    },
    {
        "id": "fe046407.ab0868",
        "type": "api-current-state",
        "z": "4aedf9e8.044e08",
        "name": "Alarm Status",
        "server": "8b52884a.b76658",
        "version": 3,
        "outputs": 1,
        "halt_if": "",
        "halt_if_type": "str",
        "halt_if_compare": "is",
        "entity_id": "alarm_control_panel.alarm_panel",
        "state_type": "str",
        "blockInputOverrides": false,
        "outputProperties": [
            {
                "property": "payload",
                "propertyType": "msg",
                "value": "",
                "valueType": "entityState"
            },
            {
                "property": "data",
                "propertyType": "msg",
                "value": "",
                "valueType": "entity"
            },
            {
                "property": "topic",
                "propertyType": "msg",
                "value": "",
                "valueType": "triggerId"
            }
        ],
        "for": 0,
        "forType": "num",
        "forUnits": "minutes",
        "x": 550,
        "y": 680,
        "wires": [
            [
                "1104f7d2.7a2938"
            ]
        ]
    },
    {
        "id": "1ab168ac.d3e527",
        "type": "trigger-state",
        "z": "4aedf9e8.044e08",
        "name": "Alarm Disarmed",
        "server": "8b52884a.b76658",
        "version": 5,
        "inputs": 1,
        "outputs": 2,
        "exposeAsEntityConfig": "",
        "entities": {
            "entity": [
                "alarm_control_panel.alarm_panel"
            ],
            "substring": [],
            "regex": []
        },
        "debugEnabled": false,
        "constraints": [
            {
                "targetType": "this_entity",
                "targetValue": "",
                "propertyType": "current_state",
                "propertyValue": "new_state.state",
                "comparatorType": "is",
                "comparatorValueDatatype": "str",
                "comparatorValue": "disarmed"
            },
            {
                "targetType": "this_entity",
                "targetValue": "",
                "propertyType": "previous_state",
                "propertyValue": "old_state.state",
                "comparatorType": "is_not",
                "comparatorValueDatatype": "str",
                "comparatorValue": "disarmed"
            }
        ],
        "customOutputs": [],
        "outputInitially": false,
        "stateType": "str",
        "enableInput": true,
        "exposeToHomeAssistant": false,
        "haConfig": [
            {
                "property": "name",
                "value": ""
            },
            {
                "property": "icon",
                "value": ""
            }
        ],
        "x": 120,
        "y": 760,
        "wires": [
            [
                "7c85f3a.d00500c"
            ],
            []
        ]
    },
    {
        "id": "cea06a40.728948",
        "type": "trigger-state",
        "z": "4aedf9e8.044e08",
        "name": "Alarm Armed",
        "server": "8b52884a.b76658",
        "version": 5,
        "inputs": 1,
        "outputs": 2,
        "exposeAsEntityConfig": "",
        "entities": {
            "entity": [
                "alarm_control_panel.alarm_panel"
            ],
            "substring": [],
            "regex": []
        },
        "debugEnabled": false,
        "constraints": [
            {
                "id": "ty01v74n8h",
                "targetType": "this_entity",
                "targetValue": "",
                "propertyType": "current_state",
                "propertyValue": "new_state.state",
                "comparatorType": "is",
                "comparatorValueDatatype": "re",
                "comparatorValue": "^armed.*"
            },
            {
                "id": "i15iybgnzt",
                "targetType": "this_entity",
                "targetValue": "",
                "propertyType": "previous_state",
                "propertyValue": "old_state.state",
                "comparatorType": "is_not",
                "comparatorValueDatatype": "re",
                "comparatorValue": "^armed.*"
            }
        ],
        "customOutputs": [],
        "outputInitially": false,
        "stateType": "str",
        "enableInput": true,
        "x": 110,
        "y": 680,
        "wires": [
            [
                "3d0081db.06ffce"
            ],
            []
        ]
    },
    {
        "id": "8af4ba1c.44a458",
        "type": "function",
        "z": "4aedf9e8.044e08",
        "name": "Alarm Triggerred Android msg",
        "func": "var category = \"alarm\"\nvar title = \"🚨 INTRUDER ALARM TRIGGERED! 🚨\"\nvar message = \"INTRUDER ALARM HAS TRIGGERED! OMG WTFBBQ!!!!111 🔥 \\n\"\n\nmsg.payload = {\n    \"data\": {\n        message,\n        title,\n        data: {\n            push: {\n                category: category,\n                sound: {\n                  name: \"ct-error.caf\",\n                  critical: 1,\n                  volume: 1.0\n                }\n            }\n        }\n    }\n}\nreturn [ msg ];\n",
        "outputs": 1,
        "timeout": "",
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 610,
        "y": 880,
        "wires": [
            [
                "6529d1c46782bfcc"
            ]
        ]
    },
    {
        "id": "e2f0bf60.7c222",
        "type": "delay",
        "z": "4aedf9e8.044e08",
        "name": "",
        "pauseType": "rate",
        "timeout": "2",
        "timeoutUnits": "minutes",
        "rate": "1",
        "nbRateUnits": "30",
        "rateUnits": "second",
        "randomFirst": "1",
        "randomLast": "5",
        "randomUnits": "seconds",
        "drop": true,
        "allowrate": false,
        "outputs": 1,
        "x": 1200,
        "y": 680,
        "wires": [
            [
                "aeafe637.1aeaf8"
            ]
        ]
    },
    {
        "id": "e021dad5f8f45d4e",
        "type": "server-state-changed",
        "z": "4aedf9e8.044e08",
        "name": "landing motion",
        "server": "8b52884a.b76658",
        "version": 6,
        "outputs": 2,
        "exposeAsEntityConfig": "",
        "entities": {
            "entity": [
                "binary_sensor.landing_motion_sensor_occupancy"
            ],
            "substring": [],
            "regex": []
        },
        "outputInitially": false,
        "stateType": "str",
        "ifState": "off",
        "ifStateType": "str",
        "ifStateOperator": "is",
        "outputOnlyOnStateChange": true,
        "for": 0,
        "forType": "num",
        "forUnits": "minutes",
        "ignorePrevStateNull": false,
        "ignorePrevStateUnknown": false,
        "ignorePrevStateUnavailable": false,
        "ignoreCurrentStateUnknown": true,
        "ignoreCurrentStateUnavailable": true,
        "outputProperties": [
            {
                "property": "payload",
                "propertyType": "msg",
                "value": "",
                "valueType": "entityState"
            },
            {
                "property": "data",
                "propertyType": "msg",
                "value": "",
                "valueType": "eventData"
            },
            {
                "property": "topic",
                "propertyType": "msg",
                "value": "",
                "valueType": "triggerId"
            }
        ],
        "x": 120,
        "y": 1200,
        "wires": [
            [],
            [
                "9637fd97fca06cc2"
            ]
        ]
    },
    {
        "id": "57d24fab2cc21bf7",
        "type": "api-current-state",
        "z": "4aedf9e8.044e08",
        "name": "alarm armed home?",
        "server": "8b52884a.b76658",
        "version": 3,
        "outputs": 2,
        "halt_if": "armed_home",
        "halt_if_type": "str",
        "halt_if_compare": "is",
        "entity_id": "alarm_control_panel.alarm_panel",
        "state_type": "str",
        "blockInputOverrides": false,
        "outputProperties": [
            {
                "property": "payload",
                "propertyType": "msg",
                "value": "",
                "valueType": "entityState"
            },
            {
                "property": "data",
                "propertyType": "msg",
                "value": "",
                "valueType": "entity"
            },
            {
                "property": "topic",
                "propertyType": "msg",
                "value": "",
                "valueType": "triggerId"
            }
        ],
        "for": 0,
        "forType": "num",
        "forUnits": "minutes",
        "x": 480,
        "y": 1360,
        "wires": [
            [
                "9f89b06296441bf5"
            ],
            []
        ]
    },
    {
        "id": "9f89b06296441bf5",
        "type": "api-call-service",
        "z": "4aedf9e8.044e08",
        "name": "trigger",
        "server": "8b52884a.b76658",
        "version": 7,
        "debugenabled": false,
        "action": "alarm_control_panel.alarm_trigger",
        "floorId": [],
        "areaId": [],
        "deviceId": [],
        "entityId": [
            "alarm_control_panel.alarm_panel"
        ],
        "labelId": [],
        "data": "",
        "dataType": "json",
        "mergeContext": "",
        "mustacheAltTags": false,
        "outputProperties": [
            {
                "property": "payload",
                "propertyType": "msg",
                "value": "",
                "valueType": "data"
            }
        ],
        "queue": "none",
        "blockInputOverrides": false,
        "domain": "alarm_control_panel",
        "service": "alarm_trigger",
        "x": 710,
        "y": 1280,
        "wires": [
            []
        ]
    },
    {
        "id": "9637fd97fca06cc2",
        "type": "api-current-state",
        "z": "4aedf9e8.044e08",
        "name": "alarm armed away?",
        "server": "8b52884a.b76658",
        "version": 3,
        "outputs": 2,
        "halt_if": "armed_away",
        "halt_if_type": "str",
        "halt_if_compare": "is",
        "entity_id": "alarm_control_panel.alarm_panel",
        "state_type": "str",
        "blockInputOverrides": false,
        "outputProperties": [
            {
                "property": "payload",
                "propertyType": "msg",
                "value": "",
                "valueType": "entityState"
            },
            {
                "property": "data",
                "propertyType": "msg",
                "value": "",
                "valueType": "entity"
            },
            {
                "property": "topic",
                "propertyType": "msg",
                "value": "",
                "valueType": "triggerId"
            }
        ],
        "for": 0,
        "forType": "num",
        "forUnits": "minutes",
        "x": 470,
        "y": 1220,
        "wires": [
            [
                "9f89b06296441bf5"
            ],
            []
        ]
    },
    {
        "id": "621ca1e8399b5330",
        "type": "server-state-changed",
        "z": "4aedf9e8.044e08",
        "name": "office motion",
        "server": "8b52884a.b76658",
        "version": 6,
        "outputs": 2,
        "exposeAsEntityConfig": "",
        "entities": {
            "entity": [
                "binary_sensor.ep1_01_7f753c_pir"
            ],
            "substring": [],
            "regex": []
        },
        "outputInitially": false,
        "stateType": "str",
        "ifState": "off",
        "ifStateType": "str",
        "ifStateOperator": "is",
        "outputOnlyOnStateChange": true,
        "for": 0,
        "forType": "num",
        "forUnits": "minutes",
        "ignorePrevStateNull": false,
        "ignorePrevStateUnknown": false,
        "ignorePrevStateUnavailable": false,
        "ignoreCurrentStateUnknown": true,
        "ignoreCurrentStateUnavailable": true,
        "outputProperties": [
            {
                "property": "payload",
                "propertyType": "msg",
                "value": "",
                "valueType": "entityState"
            },
            {
                "property": "data",
                "propertyType": "msg",
                "value": "",
                "valueType": "eventData"
            },
            {
                "property": "topic",
                "propertyType": "msg",
                "value": "",
                "valueType": "triggerId"
            }
        ],
        "x": 110,
        "y": 1260,
        "wires": [
            [],
            [
                "9637fd97fca06cc2"
            ]
        ]
    },
    {
        "id": "cb4f4c10fdcaa680",
        "type": "server-state-changed",
        "z": "4aedf9e8.044e08",
        "name": "lounge motion",
        "server": "8b52884a.b76658",
        "version": 6,
        "outputs": 2,
        "exposeAsEntityConfig": "",
        "entities": {
            "entity": [
                "binary_sensor.ep1_02_dac9c4_pir"
            ],
            "substring": [],
            "regex": []
        },
        "outputInitially": false,
        "stateType": "str",
        "ifState": "off",
        "ifStateType": "str",
        "ifStateOperator": "is",
        "outputOnlyOnStateChange": true,
        "for": 0,
        "forType": "num",
        "forUnits": "minutes",
        "ignorePrevStateNull": false,
        "ignorePrevStateUnknown": false,
        "ignorePrevStateUnavailable": false,
        "ignoreCurrentStateUnknown": true,
        "ignoreCurrentStateUnavailable": true,
        "outputProperties": [
            {
                "property": "payload",
                "propertyType": "msg",
                "value": "",
                "valueType": "entityState"
            },
            {
                "property": "data",
                "propertyType": "msg",
                "value": "",
                "valueType": "eventData"
            },
            {
                "property": "topic",
                "propertyType": "msg",
                "value": "",
                "valueType": "triggerId"
            }
        ],
        "x": 110,
        "y": 1320,
        "wires": [
            [],
            [
                "9637fd97fca06cc2"
            ]
        ]
    },
    {
        "id": "4dee70f9cb993118",
        "type": "server-state-changed",
        "z": "4aedf9e8.044e08",
        "name": "front door",
        "server": "8b52884a.b76658",
        "version": 6,
        "outputs": 2,
        "exposeAsEntityConfig": "",
        "entities": {
            "entity": [
                "binary_sensor.front_door_contact_sensor_contact"
            ],
            "substring": [],
            "regex": []
        },
        "outputInitially": false,
        "stateType": "str",
        "ifState": "off",
        "ifStateType": "str",
        "ifStateOperator": "is",
        "outputOnlyOnStateChange": true,
        "for": 0,
        "forType": "num",
        "forUnits": "minutes",
        "ignorePrevStateNull": false,
        "ignorePrevStateUnknown": false,
        "ignorePrevStateUnavailable": false,
        "ignoreCurrentStateUnknown": true,
        "ignoreCurrentStateUnavailable": true,
        "outputProperties": [
            {
                "property": "payload",
                "propertyType": "msg",
                "value": "",
                "valueType": "entityState"
            },
            {
                "property": "data",
                "propertyType": "msg",
                "value": "",
                "valueType": "eventData"
            },
            {
                "property": "topic",
                "propertyType": "msg",
                "value": "",
                "valueType": "triggerId"
            }
        ],
        "x": 100,
        "y": 1600,
        "wires": [
            [],
            [
                "9637fd97fca06cc2",
                "57d24fab2cc21bf7"
            ]
        ]
    },
    {
        "id": "4fc12d785f985db3",
        "type": "server-state-changed",
        "z": "4aedf9e8.044e08",
        "name": "kitchen door",
        "server": "8b52884a.b76658",
        "version": 6,
        "outputs": 2,
        "exposeAsEntityConfig": "",
        "entities": {
            "entity": [
                "binary_sensor.kitchen_contact_sensor_contact"
            ],
            "substring": [],
            "regex": []
        },
        "outputInitially": false,
        "stateType": "str",
        "ifState": "off",
        "ifStateType": "str",
        "ifStateOperator": "is",
        "outputOnlyOnStateChange": true,
        "for": 0,
        "forType": "num",
        "forUnits": "minutes",
        "ignorePrevStateNull": false,
        "ignorePrevStateUnknown": false,
        "ignorePrevStateUnavailable": false,
        "ignoreCurrentStateUnknown": true,
        "ignoreCurrentStateUnavailable": true,
        "outputProperties": [
            {
                "property": "payload",
                "propertyType": "msg",
                "value": "",
                "valueType": "entityState"
            },
            {
                "property": "data",
                "propertyType": "msg",
                "value": "",
                "valueType": "eventData"
            },
            {
                "property": "topic",
                "propertyType": "msg",
                "value": "",
                "valueType": "triggerId"
            }
        ],
        "x": 110,
        "y": 1660,
        "wires": [
            [],
            [
                "9637fd97fca06cc2",
                "57d24fab2cc21bf7"
            ]
        ]
    },
    {
        "id": "189a46476efd5beb",
        "type": "api-call-service",
        "z": "4aedf9e8.044e08",
        "name": "arm alarm home",
        "server": "8b52884a.b76658",
        "version": 7,
        "debugenabled": false,
        "action": "alarm_control_panel.alarm_arm_home",
        "floorId": [],
        "areaId": [],
        "deviceId": [],
        "entityId": [
            "alarm_control_panel.alarm_panel"
        ],
        "labelId": [],
        "data": "{\"code\":\"{{ alarm_code }}\"}",
        "dataType": "json",
        "mergeContext": "",
        "mustacheAltTags": false,
        "outputProperties": [
            {
                "property": "payload",
                "propertyType": "msg",
                "value": "",
                "valueType": "data"
            }
        ],
        "queue": "none",
        "blockInputOverrides": false,
        "domain": "alarm_control_panel",
        "service": "alarm_arm_home",
        "x": 1260,
        "y": 140,
        "wires": [
            []
        ]
    },
    {
        "id": "03f68328699a88c3",
        "type": "credentials",
        "z": "4aedf9e8.044e08",
        "name": "alarm code",
        "props": [
            {
                "value": "alarm_code",
                "type": "msg"
            }
        ],
        "x": 1050,
        "y": 140,
        "wires": [
            [
                "189a46476efd5beb"
            ]
        ]
    },
    {
        "id": "d1dcac1eeeb1de5c",
        "type": "api-call-service",
        "z": "4aedf9e8.044e08",
        "name": "Alarm triggered Alexa message",
        "server": "8b52884a.b76658",
        "version": 7,
        "debugenabled": false,
        "action": "notify.alexa_media_everywhere",
        "floorId": [],
        "areaId": [],
        "deviceId": [],
        "entityId": [],
        "labelId": [],
        "data": "{ \"message\": \"{{payload}}\", \"data\": { \"type\": \"announce\" }, \"target\": \"{{service}}\" }",
        "dataType": "json",
        "mergeContext": "",
        "mustacheAltTags": false,
        "outputProperties": [],
        "queue": "none",
        "blockInputOverrides": false,
        "domain": "notify",
        "service": "alexa_media_everywhere",
        "x": 770,
        "y": 820,
        "wires": [
            [
                "a16755e15d896fc1"
            ]
        ]
    },
    {
        "id": "c7a9e7a495ed59d3",
        "type": "function",
        "z": "4aedf9e8.044e08",
        "name": "Message",
        "func": "var message = \"Please vacate the premises, the authorities have been alerted.\"\n\nmsg.payload = {\n    \"data\": {\n        message,\n    }\n}\nreturn [ msg ];\n",
        "outputs": 1,
        "timeout": "",
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 540,
        "y": 820,
        "wires": [
            [
                "d1dcac1eeeb1de5c"
            ]
        ]
    },
    {
        "id": "7617c5a77ae8e5fb",
        "type": "comment",
        "z": "4aedf9e8.044e08",
        "name": "upstairs PIR",
        "info": "",
        "x": 110,
        "y": 1160,
        "wires": []
    },
    {
        "id": "8030f590b2e88311",
        "type": "comment",
        "z": "4aedf9e8.044e08",
        "name": "Activate alarm",
        "info": "",
        "x": 110,
        "y": 40,
        "wires": []
    },
    {
        "id": "5dffbd88127b7314",
        "type": "comment",
        "z": "4aedf9e8.044e08",
        "name": "Deactivate alarm",
        "info": "",
        "x": 120,
        "y": 320,
        "wires": []
    },
    {
        "id": "f69bf36c5d17a719",
        "type": "comment",
        "z": "4aedf9e8.044e08",
        "name": "Notifications",
        "info": "",
        "x": 110,
        "y": 640,
        "wires": []
    },
    {
        "id": "581603c66ffcc56c",
        "type": "mqtt out",
        "z": "4aedf9e8.044e08",
        "name": "",
        "topic": "zigbee2mqtt/alarm_siren/set",
        "qos": "",
        "retain": "",
        "respTopic": "",
        "contentType": "",
        "userProps": "",
        "correl": "",
        "expiry": "",
        "broker": "649859a4.a17818",
        "x": 1380,
        "y": 760,
        "wires": []
    },
    {
        "id": "a16755e15d896fc1",
        "type": "template",
        "z": "4aedf9e8.044e08",
        "name": "Sound siren",
        "field": "payload",
        "fieldType": "msg",
        "format": "json",
        "syntax": "mustache",
        "template": "{\n    \"warning\": {\n        \"level\": \"low\",\n        \"duration\": 300, \n        \"mode\": \"emergency\", \n        \"strobe\": true,\n        \"strobe_duty_cycle\": 1,\n        \"strobe_level\": \"very_high\"\n    }\n}",
        "output": "str",
        "x": 1110,
        "y": 820,
        "wires": [
            [
                "581603c66ffcc56c"
            ]
        ]
    },
    {
        "id": "c28e839a592e1ad9",
        "type": "template",
        "z": "4aedf9e8.044e08",
        "name": "Stop siren",
        "field": "payload",
        "fieldType": "msg",
        "format": "json",
        "syntax": "mustache",
        "template": "{\n    \"warning\": {\n        \"mode\": \"stop\",\n        \"strobe\": false\n    }\n}",
        "output": "str",
        "x": 1100,
        "y": 760,
        "wires": [
            [
                "581603c66ffcc56c"
            ]
        ]
    },
    {
        "id": "f77b8eb2c40d940c",
        "type": "server-state-changed",
        "z": "4aedf9e8.044e08",
        "name": "attic smoke",
        "server": "8b52884a.b76658",
        "version": 6,
        "outputs": 2,
        "exposeAsEntityConfig": "",
        "entities": {
            "entity": [
                "binary_sensor.smoke_detector_office_smoke"
            ],
            "substring": [],
            "regex": []
        },
        "outputInitially": false,
        "stateType": "str",
        "ifState": "off",
        "ifStateType": "str",
        "ifStateOperator": "is",
        "outputOnlyOnStateChange": true,
        "for": 0,
        "forType": "num",
        "forUnits": "minutes",
        "ignorePrevStateNull": true,
        "ignorePrevStateUnknown": true,
        "ignorePrevStateUnavailable": true,
        "ignoreCurrentStateUnknown": false,
        "ignoreCurrentStateUnavailable": false,
        "outputProperties": [
            {
                "property": "payload",
                "propertyType": "msg",
                "value": "office",
                "valueType": "str"
            },
            {
                "property": "data",
                "propertyType": "msg",
                "value": "",
                "valueType": "eventData"
            },
            {
                "property": "topic",
                "propertyType": "msg",
                "value": "",
                "valueType": "triggerId"
            }
        ],
        "x": 110,
        "y": 1080,
        "wires": [
            [],
            [
                "6202624186e1ae93"
            ]
        ]
    },
    {
        "id": "6202624186e1ae93",
        "type": "function",
        "z": "4aedf9e8.044e08",
        "name": "Alarm Triggerred Android msg",
        "func": "var detector = msg.payload\nvar category = \"alarm\"\nvar title = \"🔥 FIRE ALARM TRIGGERED! 🔥\"\nvar message = detector + \" FIRE ALARM HAS TRIGGERED! OMG WTFBBQ!!!!111 🔥 \\n\"\n\nmsg.payload = {\n    \"data\": {\n        message,\n        title,\n        data: {\n            push: {\n                category: category,\n                sound: {\n                  name: \"ct-error.caf\",\n                  critical: 1,\n                  volume: 1.0\n                }\n            }\n        }\n    }\n}\nreturn [ msg ];\n",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 370,
        "y": 1080,
        "wires": [
            [
                "5024eb29f1ce0b1a"
            ]
        ]
    },
    {
        "id": "ac34c90be2e2b3f2",
        "type": "comment",
        "z": "4aedf9e8.044e08",
        "name": "Fire alarm",
        "info": "",
        "x": 100,
        "y": 1020,
        "wires": []
    },
    {
        "id": "f44bdbe9bc774810",
        "type": "server-state-changed",
        "z": "4aedf9e8.044e08",
        "name": "kitchen motion",
        "server": "8b52884a.b76658",
        "version": 6,
        "outputs": 2,
        "exposeAsEntityConfig": "",
        "entities": {
            "entity": [
                "binary_sensor.everything_presence_one_042214_pir"
            ],
            "substring": [],
            "regex": []
        },
        "outputInitially": false,
        "stateType": "str",
        "ifState": "off",
        "ifStateType": "str",
        "ifStateOperator": "is",
        "outputOnlyOnStateChange": true,
        "for": 0,
        "forType": "num",
        "forUnits": "minutes",
        "ignorePrevStateNull": false,
        "ignorePrevStateUnknown": false,
        "ignorePrevStateUnavailable": false,
        "ignoreCurrentStateUnknown": true,
        "ignoreCurrentStateUnavailable": true,
        "outputProperties": [
            {
                "property": "payload",
                "propertyType": "msg",
                "value": "",
                "valueType": "entityState"
            },
            {
                "property": "data",
                "propertyType": "msg",
                "value": "",
                "valueType": "eventData"
            },
            {
                "property": "topic",
                "propertyType": "msg",
                "value": "",
                "valueType": "triggerId"
            }
        ],
        "x": 110,
        "y": 1420,
        "wires": [
            [],
            [
                "9637fd97fca06cc2",
                "57d24fab2cc21bf7"
            ]
        ]
    },
    {
        "id": "29dcdd2d6838845a",
        "type": "server-state-changed",
        "z": "4aedf9e8.044e08",
        "name": "hallway motion",
        "server": "8b52884a.b76658",
        "version": 6,
        "outputs": 2,
        "exposeAsEntityConfig": "",
        "entities": {
            "entity": [
                "binary_sensor.hallway_motion_sensor_occupancy"
            ],
            "substring": [],
            "regex": []
        },
        "outputInitially": false,
        "stateType": "str",
        "ifState": "off",
        "ifStateType": "str",
        "ifStateOperator": "is",
        "outputOnlyOnStateChange": true,
        "for": 0,
        "forType": "num",
        "forUnits": "minutes",
        "ignorePrevStateNull": false,
        "ignorePrevStateUnknown": false,
        "ignorePrevStateUnavailable": false,
        "ignoreCurrentStateUnknown": true,
        "ignoreCurrentStateUnavailable": true,
        "outputProperties": [
            {
                "property": "payload",
                "propertyType": "msg",
                "value": "",
                "valueType": "entityState"
            },
            {
                "property": "data",
                "propertyType": "msg",
                "value": "",
                "valueType": "eventData"
            },
            {
                "property": "topic",
                "propertyType": "msg",
                "value": "",
                "valueType": "triggerId"
            }
        ],
        "x": 120,
        "y": 1480,
        "wires": [
            [],
            [
                "9637fd97fca06cc2",
                "57d24fab2cc21bf7"
            ]
        ]
    },
    {
        "id": "e65d3edb261c0d66",
        "type": "comment",
        "z": "4aedf9e8.044e08",
        "name": "Contact",
        "info": "",
        "x": 90,
        "y": 1560,
        "wires": []
    },
    {
        "id": "70430a531f0ace66",
        "type": "comment",
        "z": "4aedf9e8.044e08",
        "name": "downstairs PIR",
        "info": "",
        "x": 120,
        "y": 1380,
        "wires": []
    },
    {
        "id": "8c322281909ac78a",
        "type": "server-state-changed",
        "z": "4aedf9e8.044e08",
        "name": "pixel charging",
        "server": "8b52884a.b76658",
        "version": 6,
        "outputs": 2,
        "exposeAsEntityConfig": "",
        "entities": {
            "entity": [
                "binary_sensor.pixel_7a_is_charging"
            ],
            "substring": [],
            "regex": []
        },
        "outputInitially": false,
        "stateType": "str",
        "ifState": "on",
        "ifStateType": "str",
        "ifStateOperator": "is",
        "outputOnlyOnStateChange": true,
        "for": "0",
        "forType": "num",
        "forUnits": "minutes",
        "ignorePrevStateNull": true,
        "ignorePrevStateUnknown": true,
        "ignorePrevStateUnavailable": true,
        "ignoreCurrentStateUnknown": false,
        "ignoreCurrentStateUnavailable": false,
        "outputProperties": [
            {
                "property": "payload",
                "propertyType": "msg",
                "value": "",
                "valueType": "entityState"
            },
            {
                "property": "topic",
                "propertyType": "msg",
                "value": "",
                "valueType": "triggerId"
            }
        ],
        "x": 110,
        "y": 140,
        "wires": [
            [
                "3144c43313354558"
            ],
            []
        ]
    },
    {
        "id": "3144c43313354558",
        "type": "time-range-switch",
        "z": "4aedf9e8.044e08",
        "name": "11pm-6am",
        "lat": "51.293768",
        "lon": "-2.491740",
        "startTime": "23:00",
        "endTime": "06:00",
        "startOffset": 0,
        "endOffset": 0,
        "x": 290,
        "y": 140,
        "wires": [
            [
                "cd1caa8c.300358"
            ],
            []
        ]
    },
    {
        "id": "74cfab23ac35113d",
        "type": "comment",
        "z": "4aedf9e8.044e08",
        "name": "Home",
        "info": "",
        "x": 90,
        "y": 100,
        "wires": []
    },
    {
        "id": "6e2a8fdfaa300fb1",
        "type": "comment",
        "z": "4aedf9e8.044e08",
        "name": "Away",
        "info": "",
        "x": 90,
        "y": 200,
        "wires": []
    },
    {
        "id": "f14b5800d398c3d7",
        "type": "trigger-state",
        "z": "4aedf9e8.044e08",
        "name": "pixel charging => discharging",
        "server": "8b52884a.b76658",
        "version": 5,
        "inputs": 0,
        "outputs": 2,
        "exposeAsEntityConfig": "",
        "entities": {
            "entity": [
                "binary_sensor.pixel_7a_is_charging"
            ],
            "substring": [],
            "regex": []
        },
        "debugEnabled": false,
        "constraints": [
            {
                "targetType": "this_entity",
                "targetValue": "",
                "propertyType": "current_state",
                "propertyValue": "new_state.state",
                "comparatorType": "is",
                "comparatorValueDatatype": "str",
                "comparatorValue": "off"
            },
            {
                "targetType": "this_entity",
                "targetValue": "",
                "propertyType": "previous_state",
                "propertyValue": "old_state.state",
                "comparatorType": "is",
                "comparatorValueDatatype": "str",
                "comparatorValue": "on"
            }
        ],
        "customOutputs": [],
        "outputInitially": false,
        "stateType": "str",
        "enableInput": false,
        "x": 160,
        "y": 360,
        "wires": [
            [
                "73c30e71.e8d46"
            ],
            []
        ]
    },
    {
        "id": "17c4236cbba2b0c2",
        "type": "server-state-changed",
        "z": "4aedf9e8.044e08",
        "name": "Alarm Pending",
        "server": "8b52884a.b76658",
        "version": 6,
        "outputs": 2,
        "exposeAsEntityConfig": "",
        "entities": {
            "entity": [],
            "substring": [
                "alarm_control_panel.alarm_panel"
            ],
            "regex": []
        },
        "outputInitially": false,
        "stateType": "str",
        "ifState": "pending",
        "ifStateType": "str",
        "ifStateOperator": "is",
        "outputOnlyOnStateChange": false,
        "for": "40",
        "forType": "num",
        "forUnits": "seconds",
        "ignorePrevStateNull": false,
        "ignorePrevStateUnknown": false,
        "ignorePrevStateUnavailable": false,
        "ignoreCurrentStateUnknown": false,
        "ignoreCurrentStateUnavailable": false,
        "outputProperties": [
            {
                "property": "payload",
                "propertyType": "msg",
                "value": "",
                "valueType": "entityState"
            },
            {
                "property": "data",
                "propertyType": "msg",
                "value": "",
                "valueType": "eventData"
            },
            {
                "property": "topic",
                "propertyType": "msg",
                "value": "",
                "valueType": "triggerId"
            }
        ],
        "x": 120,
        "y": 940,
        "wires": [
            [
                "c85448c0fde92f57"
            ],
            []
        ]
    },
    {
        "id": "555044cee562afbd",
        "type": "api-call-service",
        "z": "4aedf9e8.044e08",
        "name": "Notify Alexa everywhere",
        "server": "8b52884a.b76658",
        "version": 7,
        "debugenabled": false,
        "action": "notify.alexa_media_everywhere",
        "floorId": [],
        "areaId": [],
        "deviceId": [],
        "entityId": [],
        "labelId": [],
        "data": "{ \"message\": \"{{payload}}\", \"data\": { \"type\": \"announce\" }, \"target\": \"{{service}}\" }",
        "dataType": "json",
        "mergeContext": "",
        "mustacheAltTags": false,
        "outputProperties": [],
        "queue": "none",
        "blockInputOverrides": false,
        "domain": "notify",
        "service": "alexa_media_everywhere",
        "x": 530,
        "y": 940,
        "wires": [
            [
                "8f0cae300c03f28d"
            ]
        ]
    },
    {
        "id": "c85448c0fde92f57",
        "type": "function",
        "z": "4aedf9e8.044e08",
        "name": "20 seconds...",
        "func": "var message = \"Alarm activated. You have 20 seconds to comply.\"\n\nmsg.payload = {\n    \"data\": {\n        message,\n    }\n}\nreturn [ msg ];\n",
        "outputs": 1,
        "timeout": "",
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 310,
        "y": 940,
        "wires": [
            [
                "555044cee562afbd"
            ]
        ]
    },
    {
        "id": "47970d34ca8fcdef",
        "type": "function",
        "z": "4aedf9e8.044e08",
        "name": "10 seconds...",
        "func": "var message = \"Alarm activated. You have 10 seconds to comply.\"\n\nmsg.payload = {\n    \"data\": {\n        message,\n    }\n}\nreturn [ msg ];\n",
        "outputs": 1,
        "timeout": "",
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1090,
        "y": 940,
        "wires": [
            [
                "503043e6b2373087"
            ]
        ]
    },
    {
        "id": "503043e6b2373087",
        "type": "api-call-service",
        "z": "4aedf9e8.044e08",
        "name": "Notify Alexa everywhere",
        "server": "8b52884a.b76658",
        "version": 7,
        "debugenabled": false,
        "action": "notify.alexa_media_everywhere",
        "floorId": [],
        "areaId": [],
        "deviceId": [],
        "entityId": [],
        "labelId": [],
        "data": "{ \"message\": \"{{payload}}\", \"data\": { \"type\": \"announce\" }, \"target\": \"{{service}}\" }",
        "dataType": "json",
        "mergeContext": "",
        "mustacheAltTags": false,
        "outputProperties": [],
        "queue": "none",
        "blockInputOverrides": false,
        "domain": "notify",
        "service": "alexa_media_everywhere",
        "x": 1310,
        "y": 940,
        "wires": [
            []
        ]
    },
    {
        "id": "5024eb29f1ce0b1a",
        "type": "link out",
        "z": "4aedf9e8.044e08",
        "name": "link out 2",
        "mode": "link",
        "links": [
            "651cf36dfd9ea601"
        ],
        "x": 535,
        "y": 1080,
        "wires": []
    },
    {
        "id": "651cf36dfd9ea601",
        "type": "link in",
        "z": "4aedf9e8.044e08",
        "name": "link in 2",
        "links": [
            "5024eb29f1ce0b1a",
            "6529d1c46782bfcc",
            "2e21fe95824d7621"
        ],
        "x": 1065,
        "y": 680,
        "wires": [
            [
                "e2f0bf60.7c222"
            ]
        ]
    },
    {
        "id": "6529d1c46782bfcc",
        "type": "link out",
        "z": "4aedf9e8.044e08",
        "name": "link out 3",
        "mode": "link",
        "links": [
            "651cf36dfd9ea601"
        ],
        "x": 785,
        "y": 880,
        "wires": []
    },
    {
        "id": "2e21fe95824d7621",
        "type": "link out",
        "z": "4aedf9e8.044e08",
        "name": "link out 4",
        "mode": "link",
        "links": [
            "651cf36dfd9ea601"
        ],
        "x": 985,
        "y": 680,
        "wires": []
    },
    {
        "id": "0c9a7af0b87001f7",
        "type": "api-current-state",
        "z": "4aedf9e8.044e08",
        "name": "home?",
        "server": "8b52884a.b76658",
        "version": 3,
        "outputs": 2,
        "halt_if": "False",
        "halt_if_type": "str",
        "halt_if_compare": "is",
        "entity_id": "sensor.russell_home_status",
        "state_type": "str",
        "blockInputOverrides": false,
        "outputProperties": [
            {
                "property": "payload",
                "propertyType": "msg",
                "value": "",
                "valueType": "entityState"
            },
            {
                "property": "data",
                "propertyType": "msg",
                "value": "",
                "valueType": "entity"
            },
            {
                "property": "topic",
                "propertyType": "msg",
                "value": "",
                "valueType": "triggerId"
            }
        ],
        "for": 0,
        "forType": "num",
        "forUnits": "minutes",
        "x": 630,
        "y": 140,
        "wires": [
            [],
            [
                "8d782ee4.3daf1"
            ]
        ]
    },
    {
        "id": "9be81bff399ad3a2",
        "type": "server-state-changed",
        "z": "4aedf9e8.044e08",
        "name": "lounge door",
        "server": "8b52884a.b76658",
        "version": 6,
        "outputs": 2,
        "exposeAsEntityConfig": "",
        "entities": {
            "entity": [
                "binary_sensor.lounge_door_contact_sensor_contact"
            ],
            "substring": [],
            "regex": []
        },
        "outputInitially": false,
        "stateType": "str",
        "ifState": "off",
        "ifStateType": "str",
        "ifStateOperator": "is",
        "outputOnlyOnStateChange": true,
        "for": 0,
        "forType": "num",
        "forUnits": "minutes",
        "ignorePrevStateNull": false,
        "ignorePrevStateUnknown": false,
        "ignorePrevStateUnavailable": false,
        "ignoreCurrentStateUnknown": true,
        "ignoreCurrentStateUnavailable": true,
        "outputProperties": [
            {
                "property": "payload",
                "propertyType": "msg",
                "value": "",
                "valueType": "entityState"
            },
            {
                "property": "data",
                "propertyType": "msg",
                "value": "",
                "valueType": "eventData"
            },
            {
                "property": "topic",
                "propertyType": "msg",
                "value": "",
                "valueType": "triggerId"
            }
        ],
        "x": 110,
        "y": 1720,
        "wires": [
            [],
            [
                "9637fd97fca06cc2",
                "57d24fab2cc21bf7"
            ]
        ]
    },
    {
        "id": "c0307b82767a5553",
        "type": "server-state-changed",
        "z": "4aedf9e8.044e08",
        "name": "dining windows",
        "server": "8b52884a.b76658",
        "version": 6,
        "outputs": 2,
        "exposeAsEntityConfig": "",
        "entities": {
            "entity": [
                "binary_sensor.dining_room_contact_l_contact",
                "binary_sensor.dining_room_contact_r_contact"
            ],
            "substring": [],
            "regex": []
        },
        "outputInitially": false,
        "stateType": "str",
        "ifState": "off",
        "ifStateType": "str",
        "ifStateOperator": "is",
        "outputOnlyOnStateChange": true,
        "for": 0,
        "forType": "num",
        "forUnits": "minutes",
        "ignorePrevStateNull": false,
        "ignorePrevStateUnknown": false,
        "ignorePrevStateUnavailable": false,
        "ignoreCurrentStateUnknown": true,
        "ignoreCurrentStateUnavailable": true,
        "outputProperties": [
            {
                "property": "payload",
                "propertyType": "msg",
                "value": "",
                "valueType": "entityState"
            },
            {
                "property": "data",
                "propertyType": "msg",
                "value": "",
                "valueType": "eventData"
            },
            {
                "property": "topic",
                "propertyType": "msg",
                "value": "",
                "valueType": "triggerId"
            }
        ],
        "x": 120,
        "y": 1780,
        "wires": [
            [],
            [
                "9637fd97fca06cc2",
                "57d24fab2cc21bf7"
            ]
        ]
    },
    {
        "id": "58ab7aded9d726f1",
        "type": "server-state-changed",
        "z": "4aedf9e8.044e08",
        "name": "lounge windows",
        "server": "8b52884a.b76658",
        "version": 6,
        "outputs": 2,
        "exposeAsEntityConfig": "",
        "entities": {
            "entity": [
                "binary_sensor.lounge_window_contact_l_contact"
            ],
            "substring": [],
            "regex": []
        },
        "outputInitially": false,
        "stateType": "str",
        "ifState": "off",
        "ifStateType": "str",
        "ifStateOperator": "is",
        "outputOnlyOnStateChange": true,
        "for": 0,
        "forType": "num",
        "forUnits": "minutes",
        "ignorePrevStateNull": false,
        "ignorePrevStateUnknown": false,
        "ignorePrevStateUnavailable": false,
        "ignoreCurrentStateUnknown": true,
        "ignoreCurrentStateUnavailable": true,
        "outputProperties": [
            {
                "property": "payload",
                "propertyType": "msg",
                "value": "",
                "valueType": "entityState"
            },
            {
                "property": "data",
                "propertyType": "msg",
                "value": "",
                "valueType": "eventData"
            },
            {
                "property": "topic",
                "propertyType": "msg",
                "value": "",
                "valueType": "triggerId"
            }
        ],
        "x": 120,
        "y": 1840,
        "wires": [
            [],
            [
                "9637fd97fca06cc2",
                "57d24fab2cc21bf7"
            ]
        ]
    },
    {
        "id": "09990574cfea180b",
        "type": "api-current-state",
        "z": "4aedf9e8.044e08",
        "name": "disarmed?",
        "server": "8b52884a.b76658",
        "version": 3,
        "outputs": 2,
        "halt_if": "disarmed",
        "halt_if_type": "str",
        "halt_if_compare": "is",
        "entity_id": "alarm_control_panel.alarm_panel",
        "state_type": "str",
        "blockInputOverrides": true,
        "outputProperties": [
            {
                "property": "payload",
                "propertyType": "msg",
                "value": "",
                "valueType": "entityState"
            },
            {
                "property": "data",
                "propertyType": "msg",
                "value": "",
                "valueType": "entity"
            }
        ],
        "for": "",
        "forType": "num",
        "forUnits": "seconds",
        "override_topic": false,
        "state_location": "payload",
        "override_payload": "msg",
        "entity_location": "data",
        "override_data": "msg",
        "x": 910,
        "y": 940,
        "wires": [
            [],
            [
                "47970d34ca8fcdef"
            ]
        ]
    },
    {
        "id": "8f0cae300c03f28d",
        "type": "delay",
        "z": "4aedf9e8.044e08",
        "name": "",
        "pauseType": "delay",
        "timeout": "10",
        "timeoutUnits": "seconds",
        "rate": "1",
        "nbRateUnits": "1",
        "rateUnits": "second",
        "randomFirst": "1",
        "randomLast": "5",
        "randomUnits": "seconds",
        "drop": false,
        "allowrate": false,
        "outputs": 1,
        "x": 740,
        "y": 940,
        "wires": [
            [
                "09990574cfea180b"
            ]
        ]
    },
    {
        "id": "216eeb1e6b3d9e94",
        "type": "api-call-service",
        "z": "9cf6f1c7be069f0a",
        "d": true,
        "name": "office light",
        "server": "8b52884a.b76658",
        "version": 7,
        "debugenabled": false,
        "action": "switch.",
        "floorId": [],
        "areaId": [],
        "deviceId": [],
        "entityId": [
            "switch.office_light_switch"
        ],
        "labelId": [],
        "data": "",
        "dataType": "json",
        "mergeContext": "",
        "mustacheAltTags": false,
        "outputProperties": [
            {
                "property": "payload",
                "propertyType": "msg",
                "value": "",
                "valueType": "data"
            }
        ],
        "queue": "none",
        "blockInputOverrides": false,
        "domain": "switch",
        "service": "",
        "x": 1560,
        "y": 400,
        "wires": [
            []
        ]
    },
    {
        "id": "10b730be93c36924",
        "type": "comment",
        "z": "9cf6f1c7be069f0a",
        "name": "RF-Link",
        "info": "",
        "x": 90,
        "y": 100,
        "wires": []
    },
    {
        "id": "ce9f1927ecf0b77c",
        "type": "api-current-state",
        "z": "9cf6f1c7be069f0a",
        "d": true,
        "name": "light off?",
        "server": "8b52884a.b76658",
        "version": 3,
        "outputs": 2,
        "halt_if": "off",
        "halt_if_type": "str",
        "halt_if_compare": "is",
        "entity_id": "switch.office_light_switch",
        "state_type": "str",
        "blockInputOverrides": false,
        "outputProperties": [
            {
                "property": "payload",
                "propertyType": "msg",
                "value": "",
                "valueType": "entityState"
            },
            {
                "property": "data",
                "propertyType": "msg",
                "value": "",
                "valueType": "entity"
            }
        ],
        "for": 0,
        "forType": "num",
        "forUnits": "minutes",
        "override_topic": false,
        "state_location": "payload",
        "override_payload": "msg",
        "entity_location": "data",
        "override_data": "msg",
        "x": 1160,
        "y": 400,
        "wires": [
            [
                "43b507f0a4c03a0c"
            ],
            []
        ]
    },
    {
        "id": "43b507f0a4c03a0c",
        "type": "function",
        "z": "9cf6f1c7be069f0a",
        "d": true,
        "name": "turn_on",
        "func": "var service = \"turn_on\"\n\nmsg.payload = {\n    \"service\": service,\n}\nreturn [ msg ];\n",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1380,
        "y": 380,
        "wires": [
            [
                "216eeb1e6b3d9e94"
            ]
        ]
    },
    {
        "id": "4b48f3e738b62edb",
        "type": "api-current-state",
        "z": "9cf6f1c7be069f0a",
        "d": true,
        "name": "alarm not disarmed?",
        "server": "8b52884a.b76658",
        "version": 3,
        "outputs": 2,
        "halt_if": "disarmed",
        "halt_if_type": "str",
        "halt_if_compare": "is",
        "entity_id": "alarm_control_panel.alarm_panel",
        "state_type": "str",
        "blockInputOverrides": false,
        "outputProperties": [
            {
                "property": "payload",
                "propertyType": "msg",
                "value": "",
                "valueType": "entityState"
            },
            {
                "property": "data",
                "propertyType": "msg",
                "value": "",
                "valueType": "entity"
            },
            {
                "property": "topic",
                "propertyType": "msg",
                "value": "",
                "valueType": "triggerId"
            }
        ],
        "for": 0,
        "forType": "num",
        "forUnits": "minutes",
        "x": 820,
        "y": 320,
        "wires": [
            [],
            [
                "ba9e3e83d7bce571"
            ]
        ]
    },
    {
        "id": "ba9e3e83d7bce571",
        "type": "credentials",
        "z": "9cf6f1c7be069f0a",
        "d": true,
        "name": "alarm code",
        "props": [
            {
                "value": "alarm_code",
                "type": "msg"
            }
        ],
        "x": 1050,
        "y": 320,
        "wires": [
            [
                "06360ca603140fd6"
            ]
        ]
    },
    {
        "id": "06360ca603140fd6",
        "type": "api-call-service",
        "z": "9cf6f1c7be069f0a",
        "d": true,
        "name": "disarm alarm",
        "server": "8b52884a.b76658",
        "version": 7,
        "debugenabled": false,
        "action": "alarm_control_panel.alarm_disarm",
        "floorId": [],
        "areaId": [],
        "deviceId": [],
        "entityId": [
            "alarm_control_panel.alarm_panel"
        ],
        "labelId": [],
        "data": "{\"code\":\"{{ alarm_code }}\"}",
        "dataType": "json",
        "mergeContext": "",
        "mustacheAltTags": false,
        "outputProperties": [
            {
                "property": "payload",
                "propertyType": "msg",
                "value": "",
                "valueType": "data"
            }
        ],
        "queue": "none",
        "blockInputOverrides": false,
        "domain": "alarm_control_panel",
        "service": "alarm_disarm",
        "x": 1250,
        "y": 320,
        "wires": [
            []
        ]
    },
    {
        "id": "89b8ee7cc03fec61",
        "type": "api-call-service",
        "z": "9cf6f1c7be069f0a",
        "d": true,
        "name": "notify Russell android",
        "server": "8b52884a.b76658",
        "version": 7,
        "debugenabled": false,
        "action": "notify.mobile_app_pixel_7a",
        "floorId": [],
        "areaId": [],
        "deviceId": [],
        "entityId": [],
        "labelId": [],
        "data": "",
        "dataType": "json",
        "mergeContext": "",
        "mustacheAltTags": false,
        "outputProperties": [
            {
                "property": "payload",
                "propertyType": "msg",
                "value": "",
                "valueType": "data"
            }
        ],
        "queue": "none",
        "blockInputOverrides": false,
        "domain": "notify",
        "service": "mobile_app_pixel_7a",
        "x": 1680,
        "y": 100,
        "wires": [
            []
        ]
    },
    {
        "id": "26d6d10d7af28c12",
        "type": "function",
        "z": "9cf6f1c7be069f0a",
        "d": true,
        "name": "Message",
        "func": "var message = \"Someone is at the door\"\n\nmsg.payload = {\n    \"data\": {\n        message,\n    }\n}\nreturn [ msg ];\n",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 780,
        "y": 240,
        "wires": [
            [
                "7dc7d1c6d76cbc49"
            ]
        ]
    },
    {
        "id": "7dc7d1c6d76cbc49",
        "type": "api-call-service",
        "z": "9cf6f1c7be069f0a",
        "d": true,
        "name": "Alexa notify",
        "server": "8b52884a.b76658",
        "version": 7,
        "debugenabled": false,
        "action": "notify.alexa_media_office_echo",
        "floorId": [],
        "areaId": [],
        "deviceId": [],
        "entityId": [],
        "labelId": [],
        "data": "{ \"message\": \"{{payload}}\", \"data\": { \"type\": \"announce\" }, \"target\": \"{{service}}\" }",
        "dataType": "json",
        "mergeContext": "",
        "mustacheAltTags": false,
        "outputProperties": [],
        "queue": "none",
        "blockInputOverrides": false,
        "domain": "notify",
        "service": "alexa_media_office_echo",
        "x": 1030,
        "y": 240,
        "wires": [
            []
        ]
    },
    {
        "id": "62dc0308d6967c76",
        "type": "function",
        "z": "9cf6f1c7be069f0a",
        "d": true,
        "name": "Format notification",
        "func": "const frigate_external_url = \"https://frigate.microserver.space\"\nconst ha_external_url  = \"https://hass.microserver.space\";\n\nmsg.event_id     = msg.payload;\nmsg.clip         = ha_external_url + \"/api/frigate/notifications/\" + msg.event_id + \"/driveway\" + \"/clip.mp4\";\nmsg.thumbnail    = ha_external_url + \"/api/frigate/notifications/\" + msg.event_id + \"/thumbnail.jpg?format=android\";\nmsg.uri          = \"https://frigate.microserver.space/api/driveway?h=1080\";\nmsg.message     = \"Someone is at the door\";\nmsg.payload     = { data: {'message': msg.message, data: {'image': msg.thumbnail, 'clickAction': msg.clip, 'sticky': true,'color': \"#2DF56D\", 'actions': [{'action': \"URI\",'title': \"Watch Live Stream\", 'uri': msg.uri  }],'ttl': 0, 'group': \"motion-group\", 'priority': \"High\"  }}};\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1450,
        "y": 100,
        "wires": [
            [
                "89b8ee7cc03fec61"
            ]
        ]
    },
    {
        "id": "74dea37d901958f9",
        "type": "http request",
        "z": "9cf6f1c7be069f0a",
        "d": true,
        "name": "",
        "method": "GET",
        "ret": "txt",
        "paytoqs": "ignore",
        "url": "http://frigate.home.svc:5000/api/events?camera=driveway&limit=1",
        "tls": "",
        "persist": false,
        "proxy": "",
        "authType": "",
        "senderr": false,
        "x": 950,
        "y": 100,
        "wires": [
            [
                "c1627889623a1856"
            ]
        ]
    },
    {
        "id": "c1627889623a1856",
        "type": "json",
        "z": "9cf6f1c7be069f0a",
        "d": true,
        "name": "",
        "property": "payload",
        "action": "",
        "pretty": false,
        "x": 1110,
        "y": 100,
        "wires": [
            [
                "d55eced5cfec1646"
            ]
        ]
    },
    {
        "id": "d55eced5cfec1646",
        "type": "change",
        "z": "9cf6f1c7be069f0a",
        "d": true,
        "name": "event id",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "payload.0.id",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1260,
        "y": 100,
        "wires": [
            [
                "62dc0308d6967c76"
            ]
        ]
    },
    {
        "id": "18fcfd08a14d7c72",
        "type": "server-events",
        "z": "9cf6f1c7be069f0a",
        "d": true,
        "name": "",
        "server": "8b52884a.b76658",
        "version": 3,
        "exposeAsEntityConfig": "",
        "eventType": "button_pressed",
        "waitForRunning": true,
        "outputProperties": [
            {
                "property": "payload",
                "propertyType": "msg",
                "value": "",
                "valueType": "eventData"
            },
            {
                "property": "topic",
                "propertyType": "msg",
                "value": "$outputData(\"eventData\").event_type",
                "valueType": "jsonata"
            }
        ],
        "x": 140,
        "y": 200,
        "wires": [
            [
                "deef176193c829dd"
            ]
        ]
    },
    {
        "id": "6fb50a6d90e7016a",
        "type": "change",
        "z": "9cf6f1c7be069f0a",
        "d": true,
        "name": "entity id",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "payload.entity_id",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 980,
        "y": 400,
        "wires": [
            [
                "ce9f1927ecf0b77c"
            ]
        ]
    },
    {
        "id": "aa0889237fb55e03",
        "type": "delay",
        "z": "9cf6f1c7be069f0a",
        "d": true,
        "name": "",
        "pauseType": "rate",
        "timeout": "2",
        "timeoutUnits": "minutes",
        "rate": "1",
        "nbRateUnits": "1",
        "rateUnits": "second",
        "randomFirst": "1",
        "randomLast": "5",
        "randomUnits": "seconds",
        "drop": true,
        "allowrate": false,
        "outputs": 1,
        "x": 790,
        "y": 400,
        "wires": [
            [
                "6fb50a6d90e7016a"
            ]
        ]
    },
    {
        "id": "deef176193c829dd",
        "type": "switch",
        "z": "9cf6f1c7be069f0a",
        "d": true,
        "name": "Door bell - > A -> B -> C -> D",
        "property": "payload.entity_id",
        "propertyType": "msg",
        "rules": [
            {
                "t": "eq",
                "v": "switch.friedland_57399aa6_1",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "switch.remote_button_a",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "switch.remote_button_b",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "switch.remote_button_c",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "switch.remote_button_d",
                "vt": "str"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 5,
        "x": 460,
        "y": 200,
        "wires": [
            [
                "26d6d10d7af28c12",
                "731b30d4df389a06",
                "c61a5fe61b8e0a04"
            ],
            [
                "4b48f3e738b62edb"
            ],
            [],
            [],
            [
                "aa0889237fb55e03"
            ]
        ]
    },
    {
        "id": "731b30d4df389a06",
        "type": "api-call-service",
        "z": "9cf6f1c7be069f0a",
        "d": true,
        "name": "event log",
        "server": "8b52884a.b76658",
        "version": 7,
        "debugenabled": false,
        "action": "logbook.log",
        "floorId": [],
        "areaId": [],
        "deviceId": [],
        "entityId": [
            "switch.friedland_57399aa6_1"
        ],
        "labelId": [],
        "data": "{\"name\": \"doorbell\",\"message\": \"was pressed\"}",
        "dataType": "jsonata",
        "mergeContext": "",
        "mustacheAltTags": false,
        "outputProperties": [],
        "queue": "none",
        "blockInputOverrides": false,
        "domain": "logbook",
        "service": "log",
        "x": 780,
        "y": 160,
        "wires": [
            []
        ]
    },
    {
        "id": "c61a5fe61b8e0a04",
        "type": "delay",
        "z": "9cf6f1c7be069f0a",
        "d": true,
        "name": "",
        "pauseType": "delay",
        "timeout": "5",
        "timeoutUnits": "seconds",
        "rate": "1",
        "nbRateUnits": "1",
        "rateUnits": "second",
        "randomFirst": "1",
        "randomLast": "5",
        "randomUnits": "seconds",
        "drop": false,
        "allowrate": false,
        "outputs": 1,
        "x": 780,
        "y": 100,
        "wires": [
            [
                "74dea37d901958f9"
            ]
        ]
    },
    {
        "id": "37436049ac7af60e",
        "type": "inject",
        "z": "9cf6f1c7be069f0a",
        "d": true,
        "name": "",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "",
        "payloadType": "date",
        "x": 760,
        "y": 20,
        "wires": [
            [
                "74dea37d901958f9"
            ]
        ]
    },
    {
        "id": "f73ae51be2cbb9c1",
        "type": "api-call-service",
        "z": "9cf6f1c7be069f0a",
        "d": true,
        "name": "Turn off eye",
        "server": "8b52884a.b76658",
        "version": 7,
        "debugenabled": false,
        "action": "light.turn_off",
        "floorId": [],
        "areaId": [],
        "deviceId": [],
        "entityId": [
            "light.dig_quad_v3"
        ],
        "labelId": [],
        "data": "",
        "dataType": "jsonata",
        "mergeContext": "",
        "mustacheAltTags": false,
        "outputProperties": [],
        "queue": "none",
        "blockInputOverrides": true,
        "domain": "light",
        "service": "turn_off",
        "x": 350,
        "y": 580,
        "wires": [
            []
        ]
    },
    {
        "id": "4db1050f0cf42fe1",
        "type": "comment",
        "z": "9cf6f1c7be069f0a",
        "name": "Halloween thing",
        "info": "",
        "x": 120,
        "y": 520,
        "wires": []
    },
    {
        "id": "a586ea72360f6b11",
        "type": "api-call-service",
        "z": "9cf6f1c7be069f0a",
        "d": true,
        "name": "Solid",
        "server": "8b52884a.b76658",
        "version": 7,
        "debugenabled": false,
        "action": "select.select_first",
        "floorId": [],
        "areaId": [],
        "deviceId": [],
        "entityId": [
            "select.dig_quad_v3_preset"
        ],
        "labelId": [],
        "data": "",
        "dataType": "jsonata",
        "mergeContext": "",
        "mustacheAltTags": false,
        "outputProperties": [],
        "queue": "none",
        "blockInputOverrides": true,
        "domain": "select",
        "service": "select_first",
        "x": 970,
        "y": 740,
        "wires": [
            []
        ]
    },
    {
        "id": "35e10f42241e51f1",
        "type": "api-call-service",
        "z": "9cf6f1c7be069f0a",
        "d": true,
        "name": "Blink",
        "server": "8b52884a.b76658",
        "version": 7,
        "debugenabled": false,
        "action": "select.select_last",
        "floorId": [],
        "areaId": [],
        "deviceId": [],
        "entityId": [
            "select.dig_quad_v3_preset"
        ],
        "labelId": [],
        "data": "",
        "dataType": "jsonata",
        "mergeContext": "",
        "mustacheAltTags": false,
        "outputProperties": [],
        "queue": "none",
        "blockInputOverrides": true,
        "domain": "select",
        "service": "select_last",
        "x": 590,
        "y": 740,
        "wires": [
            [
                "da8c75c20b9dbd64"
            ]
        ]
    },
    {
        "id": "6a263cd88a54c7ac",
        "type": "trigger-state",
        "z": "9cf6f1c7be069f0a",
        "d": true,
        "name": "clear -> person detected",
        "server": "8b52884a.b76658",
        "version": 5,
        "inputs": 0,
        "outputs": 2,
        "exposeAsEntityConfig": "",
        "entities": {
            "entity": [
                "binary_sensor.doorbell_person_occupancy"
            ],
            "substring": [],
            "regex": []
        },
        "debugEnabled": false,
        "constraints": [
            {
                "targetType": "this_entity",
                "targetValue": "",
                "propertyType": "current_state",
                "propertyValue": "new_state.state",
                "comparatorType": "is",
                "comparatorValueDatatype": "str",
                "comparatorValue": "on"
            },
            {
                "targetType": "this_entity",
                "targetValue": "",
                "propertyType": "previous_state",
                "propertyValue": "old_state.state",
                "comparatorType": "is",
                "comparatorValueDatatype": "str",
                "comparatorValue": "off"
            }
        ],
        "customOutputs": [],
        "outputInitially": false,
        "stateType": "str",
        "enableInput": false,
        "exposeToHomeAssistant": false,
        "haConfig": [
            {
                "property": "name",
                "value": ""
            },
            {
                "property": "icon",
                "value": ""
            }
        ],
        "x": 150,
        "y": 780,
        "wires": [
            [
                "7b32370c09eb0e4e"
            ],
            []
        ]
    },
    {
        "id": "da8c75c20b9dbd64",
        "type": "delay",
        "z": "9cf6f1c7be069f0a",
        "d": true,
        "name": "",
        "pauseType": "delay",
        "timeout": "5",
        "timeoutUnits": "seconds",
        "rate": "1",
        "nbRateUnits": "1",
        "rateUnits": "second",
        "randomFirst": "1",
        "randomLast": "5",
        "randomUnits": "seconds",
        "drop": false,
        "allowrate": false,
        "outputs": 1,
        "x": 780,
        "y": 740,
        "wires": [
            [
                "a586ea72360f6b11"
            ]
        ]
    },
    {
        "id": "c2a9fc48902111a5",
        "type": "inject",
        "z": "9cf6f1c7be069f0a",
        "d": true,
        "name": "",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "",
        "payloadType": "date",
        "x": 400,
        "y": 660,
        "wires": [
            [
                "35e10f42241e51f1"
            ]
        ]
    },
    {
        "id": "e12dd79354d325b2",
        "type": "light-scheduler-filter",
        "z": "9cf6f1c7be069f0a",
        "d": true,
        "settings": "f26da246.74a7f",
        "events": "[{\"start\":{\"dow\":2,\"mod\":5},\"end\":{\"dow\":2,\"mod\":1435}},{\"start\":{\"dow\":3,\"mod\":5},\"end\":{\"dow\":3,\"mod\":1435}},{\"start\":{\"dow\":4,\"mod\":5},\"end\":{\"dow\":4,\"mod\":1435}},{\"start\":{\"dow\":5,\"mod\":5},\"end\":{\"dow\":5,\"mod\":1435}},{\"start\":{\"dow\":6,\"mod\":5},\"end\":{\"dow\":6,\"mod\":1435}},{\"start\":{\"dow\":0,\"mod\":5},\"end\":{\"dow\":0,\"mod\":1435}},{\"start\":{\"dow\":1,\"mod\":5},\"end\":{\"dow\":1,\"mod\":1435}}]",
        "name": "dark? (filter)",
        "onlyWhenDark": true,
        "scheduleRndMax": 0,
        "sunElevationThreshold": "0",
        "sunShowElevationInStatus": true,
        "x": 110,
        "y": 580,
        "wires": [
            [],
            [
                "f73ae51be2cbb9c1"
            ]
        ]
    },
    {
        "id": "08cc838761b3435a",
        "type": "inject",
        "z": "9cf6f1c7be069f0a",
        "d": true,
        "name": "",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "",
        "payloadType": "date",
        "x": 780,
        "y": 840,
        "wires": [
            [
                "a586ea72360f6b11"
            ]
        ]
    },
    {
        "id": "20de5915c4a8ebbc",
        "type": "trigger-state",
        "z": "9cf6f1c7be069f0a",
        "d": true,
        "name": "unavailable -> on",
        "server": "8b52884a.b76658",
        "version": 5,
        "inputs": 0,
        "outputs": 2,
        "exposeAsEntityConfig": "",
        "entities": {
            "entity": [
                "light.dig_quad_v3"
            ],
            "substring": [],
            "regex": []
        },
        "debugEnabled": false,
        "constraints": [
            {
                "targetType": "this_entity",
                "targetValue": "",
                "propertyType": "current_state",
                "propertyValue": "new_state.state",
                "comparatorType": "is",
                "comparatorValueDatatype": "str",
                "comparatorValue": "on"
            },
            {
                "targetType": "this_entity",
                "targetValue": "",
                "propertyType": "previous_state",
                "propertyValue": "old_state.state",
                "comparatorType": "is_not",
                "comparatorValueDatatype": "str",
                "comparatorValue": "on"
            }
        ],
        "customOutputs": [],
        "outputInitially": true,
        "stateType": "str",
        "enableInput": false,
        "x": 760,
        "y": 640,
        "wires": [
            [
                "a586ea72360f6b11"
            ],
            []
        ]
    },
    {
        "id": "7b32370c09eb0e4e",
        "type": "light-scheduler-filter",
        "z": "9cf6f1c7be069f0a",
        "d": true,
        "settings": "f26da246.74a7f",
        "events": "[{\"start\":{\"dow\":2,\"mod\":5},\"end\":{\"dow\":2,\"mod\":1435}},{\"start\":{\"dow\":3,\"mod\":5},\"end\":{\"dow\":3,\"mod\":1435}},{\"start\":{\"dow\":4,\"mod\":5},\"end\":{\"dow\":4,\"mod\":1435}},{\"start\":{\"dow\":5,\"mod\":5},\"end\":{\"dow\":5,\"mod\":1435}},{\"start\":{\"dow\":6,\"mod\":5},\"end\":{\"dow\":6,\"mod\":1435}},{\"start\":{\"dow\":0,\"mod\":5},\"end\":{\"dow\":0,\"mod\":1435}},{\"start\":{\"dow\":1,\"mod\":5},\"end\":{\"dow\":1,\"mod\":1435}}]",
        "name": "dark? (filter)",
        "onlyWhenDark": true,
        "scheduleRndMax": 0,
        "sunElevationThreshold": "0",
        "sunShowElevationInStatus": true,
        "x": 410,
        "y": 740,
        "wires": [
            [
                "35e10f42241e51f1"
            ],
            []
        ]
    },
    {
        "id": "b43cd58e779f418f",
        "type": "http request",
        "z": "9cf6f1c7be069f0a",
        "d": true,
        "name": "",
        "method": "POST",
        "ret": "txt",
        "paytoqs": "body",
        "url": "https://habitica.com/api/v3/tasks/ae90a17b-597f-44e6-80b0-69e194896bc7/score/up",
        "tls": "",
        "persist": false,
        "proxy": "",
        "insecureHTTPParser": false,
        "authType": "",
        "senderr": false,
        "headers": [],
        "x": 790,
        "y": 960,
        "wires": [
            []
        ]
    },
    {
        "id": "5d41c143bd102136",
        "type": "function",
        "z": "9cf6f1c7be069f0a",
        "d": true,
        "name": "format",
        "func": "var key = msg.key\nvar user = msg.user\n\n//msg.payload = \"data to post\";\nmsg.headers = {};\nmsg.headers['x-api-user'] = user;\nmsg.headers['x-api-key'] = key;\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 610,
        "y": 960,
        "wires": [
            [
                "b43cd58e779f418f"
            ]
        ]
    },
    {
        "id": "8895c40ab576f5c2",
        "type": "credentials",
        "z": "9cf6f1c7be069f0a",
        "d": true,
        "name": "credentials",
        "props": [
            {
                "value": "key",
                "type": "msg"
            },
            {
                "value": "user",
                "type": "msg"
            }
        ],
        "x": 430,
        "y": 960,
        "wires": [
            [
                "5d41c143bd102136"
            ]
        ]
    },
    {
        "id": "a2d9e6910b6bf68b",
        "type": "comment",
        "z": "9cf6f1c7be069f0a",
        "name": "Habitica complete task",
        "info": "",
        "x": 110,
        "y": 920,
        "wires": []
    },
    {
        "id": "20c8b5997b63e7ed",
        "type": "comment",
        "z": "9cf6f1c7be069f0a",
        "name": "Hyperion",
        "info": "",
        "x": 120,
        "y": 1040,
        "wires": []
    },
    {
        "id": "ba93f0e29b5d98a1",
        "type": "http request",
        "z": "9cf6f1c7be069f0a",
        "d": true,
        "name": "",
        "method": "POST",
        "ret": "txt",
        "paytoqs": "body",
        "url": "http://hyperhdr.russhome.xyz:8090/json-rpc",
        "tls": "",
        "persist": false,
        "proxy": "",
        "insecureHTTPParser": false,
        "authType": "",
        "senderr": false,
        "headers": [],
        "x": 1630,
        "y": 1120,
        "wires": [
            []
        ]
    },
    {
        "id": "7a308ec0c72ccb31",
        "type": "function",
        "z": "9cf6f1c7be069f0a",
        "d": true,
        "name": "format",
        "func": "const command = msg.payload.state;\nconst component = msg.payload.component;\nmsg.headers = {};\nmsg.headers[\"Content-Type\"] = \"application/json\";\nmsg.payload = {\n     \"command\":\"componentstate\",\n     \"componentstate\":{\n       \"component\": component,\n       \"state\":command\n     }\n    };\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1430,
        "y": 1120,
        "wires": [
            [
                "ba93f0e29b5d98a1"
            ]
        ]
    },
    {
        "id": "dd17a9ab4546b537",
        "type": "server-state-changed",
        "z": "9cf6f1c7be069f0a",
        "d": true,
        "name": "shield state",
        "server": "8b52884a.b76658",
        "version": 6,
        "outputs": 1,
        "exposeAsEntityConfig": "",
        "entities": {
            "entity": [
                "media_player.android_tv_10_20_0_13"
            ],
            "substring": [],
            "regex": []
        },
        "outputInitially": true,
        "stateType": "str",
        "ifState": "",
        "ifStateType": "str",
        "ifStateOperator": "is",
        "outputOnlyOnStateChange": true,
        "for": 0,
        "forType": "num",
        "forUnits": "minutes",
        "ignorePrevStateNull": false,
        "ignorePrevStateUnknown": false,
        "ignorePrevStateUnavailable": false,
        "ignoreCurrentStateUnknown": false,
        "ignoreCurrentStateUnavailable": false,
        "outputProperties": [
            {
                "property": "payload",
                "propertyType": "msg",
                "value": "",
                "valueType": "entityState"
            },
            {
                "property": "data",
                "propertyType": "msg",
                "value": "",
                "valueType": "eventData"
            },
            {
                "property": "topic",
                "propertyType": "msg",
                "value": "",
                "valueType": "triggerId"
            }
        ],
        "x": 130,
        "y": 1120,
        "wires": [
            [
                "91f387a44ca991a3"
            ]
        ]
    },
    {
        "id": "8cabbd8c69169c8b",
        "type": "switch",
        "z": "9cf6f1c7be069f0a",
        "d": true,
        "name": "switch",
        "property": "payload",
        "propertyType": "msg",
        "rules": [
            {
                "t": "eq",
                "v": "single",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "double",
                "vt": "str"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 2,
        "x": 410,
        "y": 1240,
        "wires": [
            [
                "5492281fa2ad67c8"
            ],
            [
                "28f932ddd23b6eaa"
            ]
        ]
    },
    {
        "id": "2094b6cd173dd527",
        "type": "switch",
        "z": "9cf6f1c7be069f0a",
        "d": true,
        "name": "instance state",
        "property": "payload.info.components[0].enabled",
        "propertyType": "msg",
        "rules": [
            {
                "t": "true"
            },
            {
                "t": "false"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 2,
        "x": 820,
        "y": 1200,
        "wires": [
            [
                "88da13a932af2a88"
            ],
            [
                "e8173119d19d6f79"
            ]
        ]
    },
    {
        "id": "60e2e97cef1390a9",
        "type": "switch",
        "z": "9cf6f1c7be069f0a",
        "d": true,
        "name": "HDR state",
        "property": "payload.info.components[1].enabled",
        "propertyType": "msg",
        "rules": [
            {
                "t": "true"
            },
            {
                "t": "false"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 2,
        "x": 810,
        "y": 1280,
        "wires": [
            [
                "0c03cce0ff0b29cf"
            ],
            [
                "2d0f62af6ff45a02"
            ]
        ]
    },
    {
        "id": "88da13a932af2a88",
        "type": "function",
        "z": "9cf6f1c7be069f0a",
        "d": true,
        "name": "Instance Off",
        "func": "msg = {payload: {state: false, \"component\": \"ALL\"}}\nreturn [ msg ];\n",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1130,
        "y": 1120,
        "wires": [
            [
                "7a308ec0c72ccb31"
            ]
        ]
    },
    {
        "id": "e8173119d19d6f79",
        "type": "function",
        "z": "9cf6f1c7be069f0a",
        "d": true,
        "name": "Instance On",
        "func": "msg = {payload: {state: true, \"component\": \"ALL\"}}\nreturn [ msg ];\n",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1130,
        "y": 1200,
        "wires": [
            [
                "7a308ec0c72ccb31"
            ]
        ]
    },
    {
        "id": "2d0f62af6ff45a02",
        "type": "function",
        "z": "9cf6f1c7be069f0a",
        "d": true,
        "name": "HDR Mode On",
        "func": "msg = {payload: {state: true, \"component\": \"HDR\"}}\nreturn [ msg ];\n",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1140,
        "y": 1360,
        "wires": [
            [
                "7a308ec0c72ccb31"
            ]
        ]
    },
    {
        "id": "0c03cce0ff0b29cf",
        "type": "function",
        "z": "9cf6f1c7be069f0a",
        "d": true,
        "name": "HDR Mode Off",
        "func": "msg = {payload: {state: false, \"component\": \"HDR\"}}\nreturn [ msg ];\n",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1140,
        "y": 1280,
        "wires": [
            [
                "7a308ec0c72ccb31"
            ]
        ]
    },
    {
        "id": "5492281fa2ad67c8",
        "type": "subflow:998559de1e6b81d6",
        "z": "9cf6f1c7be069f0a",
        "d": true,
        "name": "",
        "x": 620,
        "y": 1200,
        "wires": [
            [
                "2094b6cd173dd527"
            ]
        ]
    },
    {
        "id": "28f932ddd23b6eaa",
        "type": "subflow:998559de1e6b81d6",
        "z": "9cf6f1c7be069f0a",
        "d": true,
        "name": "",
        "x": 620,
        "y": 1280,
        "wires": [
            [
                "60e2e97cef1390a9"
            ]
        ]
    },
    {
        "id": "685c4449f9f482aa",
        "type": "api-call-service",
        "z": "9cf6f1c7be069f0a",
        "d": true,
        "name": "subwoofer",
        "server": "8b52884a.b76658",
        "version": 7,
        "debugenabled": false,
        "action": "switch.",
        "floorId": [],
        "areaId": [],
        "deviceId": [
            "183749c90d59028b1f4a15f19fae6d68"
        ],
        "entityId": [
            "switch.localbytes_plug_pm_dc3584"
        ],
        "labelId": [],
        "data": "",
        "dataType": "json",
        "mergeContext": "",
        "mustacheAltTags": false,
        "outputProperties": [
            {
                "property": "payload",
                "propertyType": "msg",
                "value": "",
                "valueType": "data"
            }
        ],
        "queue": "none",
        "blockInputOverrides": false,
        "domain": "switch",
        "service": "",
        "x": 1130,
        "y": 1040,
        "wires": [
            []
        ]
    },
    {
        "id": "2e5a11d811c61dc2",
        "type": "plex-ws-playing",
        "z": "9cf6f1c7be069f0a",
        "d": true,
        "name": "Plex",
        "server": "06a202b01db68d7e",
        "allowUpdates": false,
        "filters": [],
        "x": 110,
        "y": 1360,
        "wires": [
            [
                "b9b61a1431198f1e"
            ]
        ]
    },
    {
        "id": "b9b61a1431198f1e",
        "type": "rbe",
        "z": "9cf6f1c7be069f0a",
        "d": true,
        "name": "",
        "func": "rbe",
        "gap": "",
        "start": "",
        "inout": "out",
        "septopics": true,
        "property": "session.Media[0].videoProfile",
        "topi": "topic",
        "x": 330,
        "y": 1360,
        "wires": [
            [
                "d8f8aaaf9a8cf60c"
            ]
        ]
    },
    {
        "id": "d8f8aaaf9a8cf60c",
        "type": "switch",
        "z": "9cf6f1c7be069f0a",
        "d": true,
        "name": "playing HDR?",
        "property": "session.Media[0].videoProfile",
        "propertyType": "msg",
        "rules": [
            {
                "t": "neq",
                "v": "main 10",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "main 10",
                "vt": "str"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 2,
        "x": 820,
        "y": 1360,
        "wires": [
            [
                "0c03cce0ff0b29cf"
            ],
            [
                "2d0f62af6ff45a02"
            ]
        ]
    },
    {
        "id": "91f387a44ca991a3",
        "type": "switch",
        "z": "9cf6f1c7be069f0a",
        "d": true,
        "name": "1. off -> 2.playing  -> 3. standby -> 4. idle -> 5. paused",
        "property": "payload",
        "propertyType": "msg",
        "rules": [
            {
                "t": "eq",
                "v": "off",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "playing",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "standby",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "idle",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "paused",
                "vt": "str"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 5,
        "x": 460,
        "y": 1120,
        "wires": [
            [
                "ab743ee4b74464bf"
            ],
            [
                "ac1068a7cc5d90b2"
            ],
            [
                "ac1068a7cc5d90b2"
            ],
            [
                "ac1068a7cc5d90b2"
            ],
            [
                "ac1068a7cc5d90b2"
            ]
        ]
    },
    {
        "id": "ac1068a7cc5d90b2",
        "type": "function",
        "z": "9cf6f1c7be069f0a",
        "d": true,
        "name": "turn_on",
        "func": "var service = \"turn_on\"\n\nmsg.payload = {\n    \"service\": service,\n}\nreturn [ msg ];\n",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 800,
        "y": 1120,
        "wires": [
            [
                "685c4449f9f482aa",
                "e8173119d19d6f79"
            ]
        ]
    },
    {
        "id": "ab743ee4b74464bf",
        "type": "function",
        "z": "9cf6f1c7be069f0a",
        "d": true,
        "name": "turn_off",
        "func": "var service = \"turn_off\"\n\nmsg.payload = {\n    \"service\": service,\n}\nreturn [ msg ];\n",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 800,
        "y": 1040,
        "wires": [
            [
                "88da13a932af2a88",
                "685c4449f9f482aa"
            ]
        ]
    },
    {
        "id": "0acbea29e9610ade",
        "type": "mqtt in",
        "z": "9cf6f1c7be069f0a",
        "d": true,
        "name": "",
        "topic": "zigbee2mqtt/hyperion_button/action",
        "qos": "2",
        "datatype": "auto-detect",
        "broker": "649859a4.a17818",
        "nl": false,
        "rap": true,
        "rh": 0,
        "inputs": 0,
        "x": 180,
        "y": 1240,
        "wires": [
            [
                "8cabbd8c69169c8b"
            ]
        ]
    },
    {
        "id": "094f5926144118f9",
        "type": "mqtt in",
        "z": "9cf6f1c7be069f0a",
        "d": true,
        "name": "",
        "topic": "zigbee2mqtt/push_button/action",
        "qos": "2",
        "datatype": "auto-detect",
        "broker": "649859a4.a17818",
        "nl": false,
        "rap": true,
        "rh": 0,
        "inputs": 0,
        "x": 170,
        "y": 960,
        "wires": [
            [
                "8895c40ab576f5c2"
            ]
        ]
    }
]